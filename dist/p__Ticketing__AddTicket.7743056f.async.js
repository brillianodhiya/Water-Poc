"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2125],{82826:function(F,L,r){r.d(L,{Z:function(){return _}});var R=r(1413),u=r(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},h=$,Z=r(84089),p=function(m,c){return u.createElement(Z.Z,(0,R.Z)((0,R.Z)({},m),{},{ref:c,icon:h}))};p.displayName="ArrowLeftOutlined";var _=u.forwardRef(p)},39173:function(F,L,r){r.d(L,{w:function(){return v}});var R=r(97983),u=r.n(R),$=r(40794),h=r.n($),Z=r(12741),p=r.n(Z),_=r(95971),b=r(40038),m=r(67294),c=r(85893),v=function(T){var W=T.onChange,U=T.areaId,I=T.value,j=T.style,E=T.type,n=E===void 0?"not-rounded":E,P=T.useAll,D=T.disabled,i=(0,m.useState)([]),o=p()(i,2),t=o[0],g=o[1],d=m.useState(!1),y=p()(d,2),e=y[0],A=y[1],s=function(x,B){var S;return((S=B==null?void 0:B.children)!==null&&S!==void 0?S:"").toLowerCase().includes(x.toLowerCase())},G=function(){var a=h()(u()().mark(function x(){var B;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return A(!0),k.next=3,(0,_.cH)({params:{area_id:U}});case 3:B=k.sent,console.log(B,"data tenant"),A(!1),B.error||g(B.data);case 7:case"end":return k.stop()}},x)}));return function(){return a.apply(this,arguments)}}();return m.useEffect(function(){return G(),function(){}},[U]),(0,c.jsxs)(b.Z,{showSearch:!0,value:I,placeholder:"Tenant Name",loading:e,onChange:W,className:n,optionFilterProp:"children",filterOption:s,disabled:D,children:[P&&(0,c.jsx)(b.Z.Option,{value:0,children:"All Tenant"},0),t.map(function(a){return(0,c.jsx)(b.Z.Option,{value:a.id,children:a.name},a.id)})]})}},87606:function(F,L,r){r.r(L);var R=r(97983),u=r.n(R),$=r(40794),h=r.n($),Z=r(12741),p=r.n(Z),_=r(98435),b=r(39173),m=r(82826),c=r(38402),v=r(30028),l=r(80737),T=r(14538),W=r(71577),U=r(26713),I=r(58492),j=r(21802),E=r(27049),n=r(11382),P=r(71230),D=r(15746),i=r(40038),o=r(69677),t=r(13174),g=r(30381),d=r.n(g),y=r(29218),e=r.n(y),A=r(67294),s=r(70405),G=r(9212),a=r(85893);d().locale("en");var x=function(){var S=l.Z.useForm(),k=p()(S,1),re=k[0],te=A.useState(!1),z=p()(te,2),ae=z[0],K=z[1],ne=A.useState([]),H=p()(ne,2),se=H[0],oe=H[1],ue=A.useState([]),Y=p()(ue,2),ie=Y[0],de=Y[1],le=A.useState("installation"),J=p()(le,2),_e=J[0],ce=J[1],pe=A.useState([]),Q=p()(pe,2),me=Q[0],ge=Q[1],fe=A.useState(1),V=p()(fe,2),X=V[0],he=V[1],Ee=A.useState(1),q=p()(Ee,2),ee=q[0],ve=q[1],Pe=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return K(!0),C.next=3,(0,t.Os)({});case 3:O=C.sent,K(!1),O.error||oe(O.data);case 6:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),Te=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return K(!0),C.next=3,(0,t.kt)({});case 3:O=C.sent,console.log(O.data,"ticket node type data"),K(!1),O.error||de(O.data);case 7:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),De=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return K(!0),C.next=3,(0,t._v)({params:{type:ee,tenant_id:X}});case 3:O=C.sent,console.log(O.data,"device core data"),K(!1),O.error||ge(O.data);case 7:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),Oe=function(){var f=h()(u()().mark(function M(O){var w,C;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return console.log(O),w={area_id:O.area_id,tenant_id:O.tenant_id,type_id:O.type_id,technician_id:O.technician,note:O.note,ticket_type:O.type_ticket,node_id:O.deveui},N.next=4,(0,G.Z)({url:"/ticket/iki/create",method:"POST",data:w});case 4:C=N.sent,K(!1),C?T.Z.success({content:C.data.message,onOk:function(){v.history.push("/ticket")}}):T.Z.error({content:C.message}),console.log(w,"body");case 8:case"end":return N.stop()}},M)}));return function(O){return f.apply(this,arguments)}}(),Ce=function(){Pe(),Te(),De()};return A.useEffect(function(){Ce()},[ee,X]),(0,a.jsxs)(c._z,{breadcrumb:void 0,title:(0,a.jsx)(W.Z,{type:"link",onClick:function(){return v.history.push("/ticket")},size:"large",children:(0,a.jsxs)(U.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,a.jsx)(m.Z,{onClick:function(){return v.history.push("/ticket")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,a.jsxs)(I.Z,{children:[(0,a.jsx)(I.Z.Item,{children:"Ticket"}),(0,a.jsx)(I.Z.Item,{href:"#",children:"Add Ticket"})]}),(0,a.jsx)(j.Z.Title,{level:5,children:"Add Ticket"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},childrenContentStyle:{minHeight:"70vh"},children:[(0,a.jsxs)(s.ql,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:"IKI IoT Platform | User"}),(0,a.jsx)("link",{rel:"icon",href:"/iki-logo-no-text.png",type:"image/x-icon"})]}),(0,a.jsx)(E.Z,{style:{paddingTop:0,marginTop:0}}),(0,a.jsx)(n.Z,{spinning:ae,children:(0,a.jsx)(l.Z,{form:re,name:"add-area",onFinish:Oe,layout:"vertical",style:{margin:"0px auto",width:700},children:(0,a.jsxs)(P.Z,{gutter:[16,16],children:[(0,a.jsxs)(D.Z,{span:12,children:[(0,a.jsx)(l.Z.Item,{label:"Select Area",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",children:(0,a.jsx)(_.U,{onChange:function(M){console.log(M,"area id")}})}),(0,a.jsx)(l.Z.Item,{label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",children:(0,a.jsx)(b.w,{onChange:function(M){console.log("tenant id",M),he(M)}})}),(0,a.jsx)(l.Z.Item,{label:"Technician",name:"technician",rules:[{required:!0,message:"Please select Techinician!"}],requiredMark:"optional",children:(0,a.jsx)(i.Z,{placeholder:"Technician",className:"not-rounded",children:se.map(function(f){return(0,a.jsx)(i.Z.Option,{value:f.id,children:f.name},f.id)})})})]}),(0,a.jsxs)(D.Z,{span:12,children:[(0,a.jsx)(l.Z.Item,{label:"Type Ticket",name:"type_ticket",rules:[{required:!0,message:"Please input Type Ticket!"}],requiredMark:"optional",children:(0,a.jsx)(i.Z,{className:"not-rounded",options:[{value:"installation",label:"Installation"},{value:"maintenance",label:"Maintenance"}],placeholder:"Type Ticket",onChange:function(M){return ce(M)}})}),(0,a.jsx)(l.Z.Item,{label:"Device Type",name:"type_id",rules:[{required:!0,message:"Please selet Device Type!"}],requiredMark:"optional",children:(0,a.jsx)(i.Z,{placeholder:"Device Type",onChange:function(M){console.log(M,"device type"),ve(M)},className:"not-rounded",children:ie.map(function(f){return(0,a.jsx)(i.Z.Option,{value:f.type_id,children:f.name},f.type_id)})})}),_e!="installation"&&(0,a.jsx)(l.Z.Item,{label:"DevEui",name:"deveui",rules:[{required:!0,message:"Please selet DevEui!"}],requiredMark:"optional",children:(0,a.jsx)(i.Z,{placeholder:"DevEui",className:"not-rounded",children:me.map(function(f){return(0,a.jsx)(i.Z.Option,{value:f.devEui,children:f.deveui},f.id)})})})]}),(0,a.jsx)(D.Z,{span:24,children:(0,a.jsx)(l.Z.Item,{label:"Note",name:"note",rules:[{required:!1,message:"Please input note!"}],requiredMark:"optional",children:(0,a.jsx)(o.Z.TextArea,{placeholder:"Message",rows:3})})}),(0,a.jsx)(D.Z,{span:24,children:(0,a.jsx)(E.Z,{style:{padding:0,margin:0}})}),(0,a.jsx)(D.Z,{span:24,children:(0,a.jsx)("div",{style:{textAlign:"right"},children:(0,a.jsxs)(U.Z,{children:[(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(W.Z,{type:"default",htmlType:"button",onClick:function(){return v.history.push("/ticket")},children:"Cancel"})}),(0,a.jsx)(l.Z.Item,{children:(0,a.jsx)(W.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]})})})]})})})]})};L.default=x},95971:function(F,L,r){r.d(L,{GU:function(){return I},cH:function(){return v},mZ:function(){return W},rR:function(){return T}});var R=r(97983),u=r.n(R),$=r(11281),h=r.n($),Z=r(40794),p=r.n(Z),_=r(12461),b=r(9669),m=r.n(b),c=r(9212);function v(j){return l.apply(this,arguments)}function l(){return l=p()(u()().mark(function j(E){var n,P;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,c.Z.get("/tenant",h()({method:"GET"},E||{}));case 3:return n=i.sent,P=n.data,i.abrupt("return",{data:P.data,error:!1,message:"Success Get",responseCode:P.responseCode});case 8:if(i.prev=8,i.t0=i.catch(0),!m().isAxiosError(i.t0)){i.next=16;break}return console.log("error message: ",i.t0.message),_.ZP.error(i.t0.message),i.abrupt("return",{data:null,error:!0,message:i.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",i.t0),_.ZP.error("An unexpected error occurred"),i.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return i.stop()}},j,null,[[0,8]])})),l.apply(this,arguments)}var T=function(){var j=p()(u()().mark(function E(n){var P,D,i;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.Z.put("/tenant/".concat(n.id),{image:n.image,area_id:n.area_id,name:n.name,pic_name:n.pic_name,address:n.address,latitude:n.latitude,longitude:n.longitude,member_id:n.member_id,type:n.type,area_name:n.area_name,phone:n.phone,email:n.email,username:n.username,password:n.password,nama_unit:n.nama_unit,kode_unit:n.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return P=t.sent,D=P.data,t.abrupt("return",h()(h()({},D),{},{status:"ok",error:!1}));case 8:if(t.prev=8,t.t0=t.catch(0),!m().isAxiosError(t.t0)){t.next=17;break}return console.log("error message: ",t.t0.message),i=t.t0.response,i.data.message?_.ZP.error(i.data.message):_.ZP.error(t.t0.message),t.abrupt("return",{responseCode:400,message:t.t0.message,error:!0});case 17:return console.log("unexpected error: ",t.t0),_.ZP.error("An unexpected error occured"),t.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return t.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}(),W=function(){var j=p()(u()().mark(function E(n){var P,D,i;return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.Z.post("/tenant",{image:n.image,area_id:n.area_id,name:n.name,pic_name:n.pic_name,address:n.address,latitude:n.latitude,longitude:n.longitude,type:n.type,area_name:n.area_name,phone:n.phone,email:n.email,username:n.username,password:n.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return P=t.sent,D=P.data,t.abrupt("return",h()(h()({},D),{},{status:"ok",error:!1}));case 8:if(t.prev=8,t.t0=t.catch(0),!m().isAxiosError(t.t0)){t.next=17;break}return console.log("error message: ",t.t0.message),i=t.t0.response,i.data.message?_.ZP.error(i.data.message):_.ZP.error(t.t0.message),t.abrupt("return",{responseCode:400,message:t.t0.message,error:!0});case 17:return console.log("unexpected error: ",t.t0),_.ZP.error("An unexpected error occured"),t.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return t.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}(),U=null,I=function(){var j=p()(u()().mark(function E(n){var P,D;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,c.Z.get("/tenant/detail/".concat(n),{method:"GET"});case 3:return P=o.sent,D=P.data,o.abrupt("return",{data:D.data,error:!1,message:"Success Get",responseCode:D.responseCode});case 8:if(o.prev=8,o.t0=o.catch(0),!m().isAxiosError(o.t0)){o.next=16;break}return console.log("error message: ",o.t0.message),_.ZP.error(o.t0.message),o.abrupt("return",{data:null,error:!0,message:o.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",o.t0),_.ZP.error("An unexpected error occurred"),o.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return o.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}()},13174:function(F,L,r){r.d(L,{Ij:function(){return P},NY:function(){return U},Os:function(){return j},_v:function(){return v},kt:function(){return T},zz:function(){return D}});var R=r(97983),u=r.n(R),$=r(11281),h=r.n($),Z=r(40794),p=r.n(Z),_=r(12461),b=r(9669),m=r.n(b),c=r(9212);function v(o){return l.apply(this,arguments)}function l(){return l=p()(u()().mark(function o(t){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/device",h()({method:"GET"},t||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!m().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),l.apply(this,arguments)}function T(o){return W.apply(this,arguments)}function W(){return W=p()(u()().mark(function o(t){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/ticket/type/node/list",h()({method:"GET"},t||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!m().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),W.apply(this,arguments)}function U(o){return I.apply(this,arguments)}function I(){return I=p()(u()().mark(function o(t){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/ticket/iki/all",h()({method:"GET"},t||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!m().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),I.apply(this,arguments)}function j(o){return E.apply(this,arguments)}function E(){return E=p()(u()().mark(function o(t){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/user/bita/list?role=teknisi",h()({method:"GET"},t||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!m().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),E.apply(this,arguments)}var n=null,P=function(){var o=p()(u()().mark(function t(g){var d,y,e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.Z.put("/ticket/update/teknisi/"+g.no_ticket,{technician:g.technician});case 3:return d=s.sent,y=d.data,s.abrupt("return",h()(h()({},y),{},{status:"ok",error:!1}));case 8:if(s.prev=8,s.t0=s.catch(0),!m().isAxiosError(s.t0)){s.next=17;break}return console.log("error message: ",s.t0.message),e=s.t0.response,e.data.message?_.ZP.error(e.data.message):_.ZP.error(s.t0.message),s.abrupt("return",{responseCode:400,message:s.t0.message,error:!0});case 17:return console.log("unexpected error: ",s.t0),_.ZP.error("An unexpected error occured"),s.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return s.stop()}},t,null,[[0,8]])}));return function(g){return o.apply(this,arguments)}}(),D=function(){var o=p()(u()().mark(function t(g){var d,y,e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.Z.put("/ticket/iki/cancel/"+g.id);case 3:return d=s.sent,y=d.data,s.abrupt("return",h()(h()({},y),{},{status:"ok",error:!1}));case 8:if(s.prev=8,s.t0=s.catch(0),!m().isAxiosError(s.t0)){s.next=17;break}return console.log("error message: ",s.t0.message),e=s.t0.response,e.data.message?_.ZP.error(e.data.message):_.ZP.error(s.t0.message),s.abrupt("return",{responseCode:400,message:s.t0.message,error:!0});case 17:return console.log("unexpected error: ",s.t0),_.ZP.error("An unexpected error occured"),s.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return s.stop()}},t,null,[[0,8]])}));return function(g){return o.apply(this,arguments)}}(),i=null},27049:function(F,L,r){var R=r(87462),u=r(4942),$=r(94184),h=r.n($),Z=r(67294),p=r(53124),_=function(m,c){var v={};for(var l in m)Object.prototype.hasOwnProperty.call(m,l)&&c.indexOf(l)<0&&(v[l]=m[l]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,l=Object.getOwnPropertySymbols(m);T<l.length;T++)c.indexOf(l[T])<0&&Object.prototype.propertyIsEnumerable.call(m,l[T])&&(v[l[T]]=m[l[T]]);return v},b=function(c){var v,l=Z.useContext(p.E_),T=l.getPrefixCls,W=l.direction,U=c.prefixCls,I=c.type,j=I===void 0?"horizontal":I,E=c.orientation,n=E===void 0?"center":E,P=c.orientationMargin,D=c.className,i=c.children,o=c.dashed,t=c.plain,g=_(c,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),d=T("divider",U),y=n.length>0?"-".concat(n):n,e=!!i,A=n==="left"&&P!=null,s=n==="right"&&P!=null,G=h()(d,"".concat(d,"-").concat(j),(v={},(0,u.Z)(v,"".concat(d,"-with-text"),e),(0,u.Z)(v,"".concat(d,"-with-text").concat(y),e),(0,u.Z)(v,"".concat(d,"-dashed"),!!o),(0,u.Z)(v,"".concat(d,"-plain"),!!t),(0,u.Z)(v,"".concat(d,"-rtl"),W==="rtl"),(0,u.Z)(v,"".concat(d,"-no-default-orientation-margin-left"),A),(0,u.Z)(v,"".concat(d,"-no-default-orientation-margin-right"),s),v),D),a=(0,R.Z)((0,R.Z)({},A&&{marginLeft:P}),s&&{marginRight:P});return Z.createElement("div",(0,R.Z)({className:G},g,{role:"separator"}),i&&j!=="vertical"&&Z.createElement("span",{className:"".concat(d,"-inner-text"),style:a},i))};L.Z=b}}]);
