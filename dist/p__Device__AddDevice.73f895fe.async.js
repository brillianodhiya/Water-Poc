"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2098],{39173:function(z,y,e){e.d(y,{w:function(){return R}});var Z=e(97983),l=e.n(Z),B=e(40794),v=e.n(B),U=e(12741),c=e.n(U),p=e(95971),I=e(40038),j=e(67294),O=e(85893),R=function(M){var K=M.onChange,D=M.areaId,d=M.value,E=M.style,i=M.type,a=i===void 0?"not-rounded":i,o=M.useAll,m=M.disabled,t=(0,j.useState)([]),s=c()(t,2),n=s[0],k=s[1],C=j.useState(!1),b=c()(C,2),G=b[0],W=b[1],N=function(){var L=v()(l()().mark(function S(){var f;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return W(!0),r.next=3,(0,p.cH)({params:{area_id:D}});case 3:f=r.sent,console.log(f,"data tenant"),W(!1),f.error||k(f.data);case 7:case"end":return r.stop()}},S)}));return function(){return L.apply(this,arguments)}}();return j.useEffect(function(){return N(),function(){}},[D]),(0,O.jsxs)(I.Z,{value:d,placeholder:"Tenant Name",loading:G,onChange:K,className:a,style:E,disabled:m,children:[o&&(0,O.jsx)(I.Z.Option,{value:0,children:"All Tenant"},0),n.map(function(L){return(0,O.jsx)(I.Z.Option,{value:L.id,children:L.name},L.id)})]})}},3897:function(z,y,e){e.r(y);var Z=e(97983),l=e.n(Z),B=e(40794),v=e.n(B),U=e(12741),c=e.n(U),p=e(98435),I=e(39173),j=e(86873),O=e(72923),R=e(64173),x=e(82826),M=e(91714),K=e(38402),D=e(30028),d=e(80737),E=e(14538),i=e(71577),a=e(26713),o=e(58492),m=e(21802),t=e(11382),s=e(71230),n=e(15746),k=e(41232),C=e(69677),b=e(79915),G=e(30381),W=e.n(G),N=e(29218),L=e.n(N),S=e(18537),f=e(67294),H=e(64593),r=e(85893);W().locale("en");var re=function(){var ae=d.Z.useForm(),ne=c()(ae,1),T=ne[0],te=f.useState({lat:-6.2,lng:106.816666}),J=c()(te,2),F=J[0],se=J[1],de=f.useState(!1),Q=c()(de,2),_e=Q[0],X=Q[1],ie=f.useState(""),Y=c()(ie,2),oe=Y[0],le=Y[1],$=f.useRef(null),ue=f.useState(!0),w=c()(ue,2),me=w[0],V=w[1],ce=f.useState(!1),q=c()(ce,2),pe=q[0],ee=q[1],h=S.Z.parse(window.location.search);f.useEffect(function(){h.area_id&&T.setFields([{name:"area_id",value:parseInt(h==null?void 0:h.area_id)},{name:"tenant_id",value:parseInt(h==null?void 0:h.tenant_id)}])},[]),f.useEffect(function(){(0,j.B)(F.lat,F.lng).then(function(g){T.setFields([{name:"address",value:g}])})},[F]);var Ee=function(){var g=v()(l()().mark(function u(_){var A;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return console.log(_),ee(!0),P.next=4,(0,R.y_)({devEui:_.devEui.split(" ").join(""),model:_.brand,description:_.description,latitude:_.latitude,longitude:_.longitude,interval:_.interval,tenant_id:_.tenant_id,area_id:_.area_id,meter_id:_.meter_id});case 4:A=P.sent,ee(!1),A.error?E.Z.error({content:A.message}):E.Z.success({content:A.message,onOk:function(){try{D.history.back()}catch(Me){D.history.push("/device")}}});case 7:case"end":return P.stop()}},u)}));return function(_){return g.apply(this,arguments)}}(),ge=function(){var g=v()(l()().mark(function u(){var _,A;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return X(!0),P.next=3,(0,R.qW)({devEui:oe.split(" ").join("")});case 3:_=P.sent,X(!1),_.error?(V(!0),T.setFields([{name:"devEui",errors:["Device Id Not Found"]}])):(V(!1),(A=_.data)!==null&&A!==void 0&&A.data||V(!0));case 6:case"end":return P.stop()}},u)}));return function(){return g.apply(this,arguments)}}();return(0,r.jsxs)(K._z,{title:(0,r.jsx)(i.Z,{type:"link",onClick:function(){h.area_id?D.history.push("/area/tenant",{area_id:h.area_id,tenant_id:h.tenant_id||""}):D.history.push("/device")},size:"large",children:(0,r.jsxs)(a.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,r.jsx)(x.Z,{onClick:function(){h.area_id?D.history.push("/area/tenant",{area_id:h.area_id,tenant_id:h.tenant_id||""}):D.history.push("/device")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Item,{children:"Device Management"}),(0,r.jsx)(o.Z.Item,{href:"#",children:"Add Device"})]}),(0,r.jsx)(m.Z.Title,{level:5,children:"Add Device"})]})]})}),children:[(0,r.jsxs)(H.q,{children:[(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("title",{children:"AAT | Device"}),(0,r.jsx)("link",{rel:"icon",href:"/logoaat.png",type:"image/x-icon"})]}),(0,r.jsx)(t.Z,{spinning:pe,children:(0,r.jsxs)(d.Z,{form:T,name:"add-area",onFinish:Ee,layout:"vertical",children:[(0,r.jsxs)(s.Z,{style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingTop:20},gutter:[24,24],children:[(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(d.Z.Item,{label:"Installation Date",name:"installation_date",rules:[{required:!0,message:"Please input installation date!"}],requiredMark:"optional",initialValue:W()(),children:(0,r.jsx)(k.Z,{style:{width:"100%"},disabled:!0,className:"not-rounded"})}),(0,r.jsx)(d.Z.Item,{style:{},label:"Area Name",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(p.U,{style:void 0,type:"",defaultArea0:!1,onChange:function(){T.setFields([{name:"tenant_id",value:void 0}])}})}),(0,r.jsx)(d.Z.Item,{noStyle:!0,shouldUpdate:function(u,_){return u.area_id!==_.area_id},children:function(){return(0,r.jsx)(d.Z.Item,{style:{},label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(I.w,{onChange:function(){},areaId:T.getFieldValue("area_id"),style:void 0,type:""})})}}),(0,r.jsx)(d.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return(0,r.jsx)(d.Z.Item,{requiredMark:"optional",name:"devEui",label:"Device Eui",rules:[{required:!0}],children:(0,r.jsx)(C.Z,{placeholder:"Device Eui",onChange:function(_){le(_.target.value),T.setFields([{name:"devEui",value:_.target.value.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim()}])},onKeyUp:function(){$.current!==null&&window.clearTimeout($.current),$.current=window.setTimeout(function(){ge()},1e3)},onKeyDown:function(){$.current!==null&&window.clearTimeout($.current)},suffix:(0,r.jsx)(t.Z,{spinning:_e})})})}})]}),(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(d.Z.Item,{label:"Meter Id",name:"meter_id",rules:[{required:!1,message:"Please input Meter Id!"}],children:(0,r.jsx)(C.Z,{placeholder:"Meter Id"})}),(0,r.jsx)(d.Z.Item,{label:"Model/Brand",name:"brand",rules:[{required:!1,message:"Please input Model/Brand!"}],children:(0,r.jsx)(C.Z,{placeholder:"Model/Brand"})}),(0,r.jsx)(d.Z.Item,{extra:"Minute",label:"Interval",name:"interval",initialValue:15,rules:[{required:!0,message:"Please input Interval!"}],requiredMark:"optional",children:(0,r.jsx)(b.Z,{prefix:(0,r.jsx)(M.Z,{})})}),(0,r.jsx)(d.Z.Item,{label:"Description",name:"description",rules:[{required:!1,message:"Please input description!"}],requiredMark:"optional",children:(0,r.jsx)(C.Z.TextArea,{placeholder:"Description",rows:3})})]}),(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(O.Z,{center:F,onChange:function(u){se(u),T.setFields([{name:"latitude",value:u.lat},{name:"longitude",value:u.lng}])}}),(0,r.jsx)(d.Z.Item,{requiredMark:"optional",name:"address",label:"Address",children:(0,r.jsx)(C.Z.TextArea,{placeholder:"Address"})}),(0,r.jsxs)(a.Z,{wrap:!0,size:"large",style:{marginTop:"16px"},children:[(0,r.jsx)(d.Z.Item,{requiredMark:"optional",name:"latitude",label:"Latitude",initialValue:"-6.290690",rules:[{required:!0,message:"Masukkan Latitude"}],hidden:!0,children:(0,r.jsx)(C.Z,{placeholder:"Latitude"})}),(0,r.jsx)(d.Z.Item,{requiredMark:"optional",name:"longitude",label:"Longitude",initialValue:"107.141853",rules:[{required:!0,message:"Masukkan Longitude"}],hidden:!0,children:(0,r.jsx)(C.Z,{placeholder:"Longitude"})})]})]})]}),(0,r.jsx)("div",{style:{marginTop:20,textAlign:"right"},children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(d.Z.Item,{children:(0,r.jsx)(i.Z,{type:"default",htmlType:"button",onClick:function(){try{D.history.back()}catch(u){D.history.push("/device")}},children:"Cancel"})}),(0,r.jsx)(d.Z.Item,{children:(0,r.jsx)(i.Z,{type:"primary",onClick:function(){me?T.setFields([{name:"devEui",errors:["Device Id Not Found"]}]):T.submit()},children:"Submit"})})]})})]})})]})};y.default=re},95971:function(z,y,e){e.d(y,{GU:function(){return d},cH:function(){return R},mZ:function(){return K},rR:function(){return M}});var Z=e(97983),l=e.n(Z),B=e(11281),v=e.n(B),U=e(40794),c=e.n(U),p=e(12461),I=e(9669),j=e.n(I),O=e(9212);function R(E){return x.apply(this,arguments)}function x(){return x=c()(l()().mark(function E(i){var a,o;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Z.get("/tenant",v()({method:"GET"},i||{}));case 3:return a=t.sent,o=a.data,t.abrupt("return",{data:o.data,error:!1,message:"Success Get",responseCode:o.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!j().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),p.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),p.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},E,null,[[0,8]])})),x.apply(this,arguments)}var M=function(){var E=c()(l()().mark(function i(a){var o,m,t;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.Z.put("/tenant/".concat(a.id),{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password,nama_unit:a.nama_unit,kode_unit:a.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return o=n.sent,m=o.data,n.abrupt("return",v()(v()({},m),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!j().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?p.ZP.error(t.data.message):p.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),p.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},i,null,[[0,8]])}));return function(a){return E.apply(this,arguments)}}(),K=function(){var E=c()(l()().mark(function i(a){var o,m,t;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.Z.post("/tenant",{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return o=n.sent,m=o.data,n.abrupt("return",v()(v()({},m),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!j().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?p.ZP.error(t.data.message):p.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),p.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},i,null,[[0,8]])}));return function(a){return E.apply(this,arguments)}}(),D=null,d=function(){var E=c()(l()().mark(function i(a){var o,m;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.Z.get("/tenant/detail/".concat(a),{method:"GET"});case 3:return o=s.sent,m=o.data,s.abrupt("return",{data:m.data,error:!1,message:"Success Get",responseCode:m.responseCode});case 8:if(s.prev=8,s.t0=s.catch(0),!j().isAxiosError(s.t0)){s.next=16;break}return console.log("error message: ",s.t0.message),p.ZP.error(s.t0.message),s.abrupt("return",{data:null,error:!0,message:s.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",s.t0),p.ZP.error("An unexpected error occurred"),s.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return s.stop()}},i,null,[[0,8]])}));return function(a){return E.apply(this,arguments)}}()}}]);
