"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2125],{39173:function(F,$,r){r.d($,{w:function(){return m}});var O=r(97983),o=r.n(O),k=r(40794),y=r.n(k),Z=r(12741),E=r.n(Z),c=r(95971),M=r(40038),f=r(67294),l=r(85893),m=function(T){var R=T.onChange,x=T.areaId,I=T.value,D=T.style,h=T.type,a=h===void 0?"not-rounded":h,u=T.useAll,d=T.disabled,t=(0,f.useState)([]),i=E()(t,2),e=i[0],g=i[1],n=f.useState(!1),W=E()(n,2),b=W[0],S=W[1],A=function(){var U=y()(o()().mark(function G(){var L;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return S(!0),B.next=3,(0,c.cH)({params:{area_id:x}});case 3:L=B.sent,console.log(L,"data tenant"),S(!1),L.error||g(L.data);case 7:case"end":return B.stop()}},G)}));return function(){return U.apply(this,arguments)}}();return f.useEffect(function(){return A(),function(){}},[x]),(0,l.jsxs)(M.Z,{value:I,placeholder:"Tenant Name",loading:b,onChange:R,className:a,style:D,disabled:d,children:[u&&(0,l.jsx)(M.Z.Option,{value:0,children:"All Tenant"},0),e.map(function(U){return(0,l.jsx)(M.Z.Option,{value:U.id,children:U.name},U.id)})]})}},55277:function(F,$,r){r.r($),r.d($,{default:function(){return ie}});var O=r(97983),o=r.n(O),k=r(40794),y=r.n(k),Z=r(12741),E=r.n(Z),c=r(98435),M=r(39173),f=r(82826),l=r(1413),m=r(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},T=v,R=r(84089),x=function(z,w){return m.createElement(R.Z,(0,l.Z)((0,l.Z)({},z),{},{ref:w,icon:T}))};x.displayName="UploadOutlined";var I=m.forwardRef(x),D=r(38402),h=r(30028),a=r(80737),u=r(14538),d=r(71577),t=r(26713),i=r(58492),e=r(21802),g=r(27049),n=r(11382),W=r(71230),b=r(15746),S=r(69677),A=r(40038),U=r(78116),G=r(41232),L=r(28530),H=r(13174),B=r(30381),ae=r.n(B),be=r(29218),te=r(70405),ne=r(9212),s=r(85893);ae().locale("en");var se=function(){var z=a.Z.useForm(),w=E()(z,1),ue=w[0],de=m.useState(!1),V=E()(de,2),le=V[0],K=V[1],ce=m.useState([]),Q=E()(ce,2),Y=Q[0],me=Q[1],pe=m.useState([]),J=E()(pe,2),ge=J[0],_e=J[1],fe=m.useState([]),X=E()(fe,2),he=X[0],ve=X[1],Ee=m.useState("installation"),q=E()(Ee,2),Te=q[0],je=q[1],ye=m.useState([]),ee=E()(ye,2),De=ee[0],Pe=ee[1],Ce=function(){var p=y()(o()().mark(function P(){var _;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return K(!0),j.next=3,(0,H.Os)({});case 3:_=j.sent,K(!1),_.error||_e(_.data);case 6:case"end":return j.stop()}},P)}));return function(){return p.apply(this,arguments)}}(),Ae=function(){var p=y()(o()().mark(function P(){var _;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return K(!0),j.next=3,(0,L.aR)({});case 3:_=j.sent,K(!1),_.error||ve(_.data);case 6:case"end":return j.stop()}},P)}));return function(){return p.apply(this,arguments)}}(),Oe=function(){var p=y()(o()().mark(function P(){var _;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return K(!0),j.next=3,(0,L.tC)({});case 3:_=j.sent,console.log(_.data,"device core data"),K(!1),_.error||Pe(_.data);case 7:case"end":return j.stop()}},P)}));return function(){return p.apply(this,arguments)}}(),Ze=function(P){var _=P.fileList;return me(_)},Me=function(){var p=y()(o()().mark(function P(_){var C,j;return o()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return console.log(_),C=new FormData,Y.map(function(re){C.append("images",re.originFileObj)}),C.append("ticket_name",_.ticket_name),C.append("message",_.message),C.append("area_id",_.area_id),C.append("tenant_id",_.tenant_id),C.append("type_ticket",_.type_ticket),C.append("technician",_.technician),C.append("due_date",_.due_date),C.append("type_id",_.type_id),C.append("deveui",_.deveui),N.next=14,(0,ne.Z)({url:"/ticket",method:"POST",data:C,headers:{"Content-Type":"multipart/form-data"}});case 14:j=N.sent,K(!1),j?u.Z.success({content:j.data.message,onOk:function(){h.history.push("/ticket")}}):u.Z.error({content:j.message});case 17:case"end":return N.stop()}},P)}));return function(_){return p.apply(this,arguments)}}();Y.map(function(p){console.log(p.originFileObject,"data")});var Re=function(){Ce(),Ae(),Oe()};return m.useEffect(function(){Re()},[]),(0,s.jsxs)(D._z,{breadcrumb:void 0,title:(0,s.jsx)(d.Z,{type:"link",onClick:function(){return h.history.back()},size:"large",children:(0,s.jsxs)(t.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,s.jsx)(f.Z,{onClick:function(){return h.history.back()},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(i.Z.Item,{children:"Ticket"}),(0,s.jsx)(i.Z.Item,{href:"#",children:"Add Ticket"})]}),(0,s.jsx)(e.Z.Title,{level:5,children:"Add Ticket"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},childrenContentStyle:{minHeight:"70vh"},children:[(0,s.jsxs)(te.ql,{children:[(0,s.jsx)("meta",{charSet:"utf-8"}),(0,s.jsx)("title",{children:"AAT IoT Platform | User"}),(0,s.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,s.jsx)(g.Z,{style:{paddingTop:0,marginTop:0}}),(0,s.jsx)(n.Z,{spinning:le,children:(0,s.jsx)(a.Z,{form:ue,name:"add-area",onFinish:Me,layout:"vertical",style:{margin:"0px auto",width:700},children:(0,s.jsxs)(W.Z,{gutter:[16,16],children:[(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)(a.Z.Item,{label:"Ticket Name",name:"ticket_name",rules:[{required:!0,message:"Please input ticket name!"}],requiredMark:"optional",children:(0,s.jsx)(S.Z,{placeholder:"Ticket Name"})})}),(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)(a.Z.Item,{label:"Description",name:"message",rules:[{required:!0,message:"Please input message!"}],requiredMark:"optional",children:(0,s.jsx)(S.Z.TextArea,{placeholder:"Message",rows:3})})}),(0,s.jsxs)(b.Z,{span:12,children:[(0,s.jsx)(a.Z.Item,{label:"Select Area",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",children:(0,s.jsx)(c.U,{onChange:function(){}})}),(0,s.jsx)(a.Z.Item,{label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",children:(0,s.jsx)(M.w,{onChange:function(){}})}),(0,s.jsx)(a.Z.Item,{label:"Technician",name:"technician",rules:[{required:!0,message:"Please select Techinician!"}],requiredMark:"optional",children:(0,s.jsx)(A.Z,{placeholder:"Technician",className:"not-rounded",children:ge.map(function(p){return(0,s.jsx)(A.Z.Option,{value:p.id,children:p.name},p.id)})})}),(0,s.jsx)(a.Z.Item,{label:"Attachment",name:"attachment",rules:[{required:!1,message:"Please input attachment!"}],requiredMark:"optional",children:(0,s.jsx)(U.Z,{name:"attachment",onChange:Ze,children:(0,s.jsx)(d.Z,{icon:(0,s.jsx)(I,{}),children:"Upload"})})})]}),(0,s.jsxs)(b.Z,{span:12,children:[(0,s.jsx)(a.Z.Item,{label:"Type Ticket",name:"type_ticket",rules:[{required:!0,message:"Please input Type Ticket!"}],requiredMark:"optional",children:(0,s.jsx)(A.Z,{className:"not-rounded",options:[{value:"installation",label:"Installation"},{value:"maintenance",label:"Maintenance"},{value:"unassigned",label:"Unassigned"}],placeholder:"Type Ticket",onChange:function(P){return je(P)}})}),(0,s.jsx)(a.Z.Item,{label:"Device Type",name:"type_id",rules:[{required:!0,message:"Please selet Device Type!"}],requiredMark:"optional",children:(0,s.jsx)(A.Z,{placeholder:"Device Type",className:"not-rounded",children:he.map(function(p){return(0,s.jsx)(A.Z.Option,{value:p.id,children:p.name},p.id)})})}),Te!="installation"&&(0,s.jsx)(a.Z.Item,{label:"DevEui",name:"deveui",rules:[{required:!0,message:"Please selet DevEui!"}],requiredMark:"optional",children:(0,s.jsx)(A.Z,{placeholder:"DevEui",className:"not-rounded",children:De.map(function(p){return(0,s.jsx)(A.Z.Option,{value:p.deveui,children:p.deveui},p.id)})})}),(0,s.jsx)(a.Z.Item,{label:"Due Date",name:"due_date",style:{width:"100%"},rules:[{required:!0,message:"Please input due date!"}],requiredMark:"optional",children:(0,s.jsx)(G.Z,{placeholder:"Due Date",className:"not-rounded",style:{width:"100%"}})})]}),(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)(g.Z,{style:{padding:0,margin:0}})}),(0,s.jsx)(b.Z,{span:24,children:(0,s.jsx)("div",{style:{textAlign:"right"},children:(0,s.jsxs)(t.Z,{children:[(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(d.Z,{type:"default",htmlType:"button",onClick:function(){return h.history.push("/ticket")},children:"Cancel"})}),(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(d.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]})})})]})})})]})},ie=se},95971:function(F,$,r){r.d($,{GU:function(){return I},cH:function(){return m},mZ:function(){return R},rR:function(){return T}});var O=r(97983),o=r.n(O),k=r(11281),y=r.n(k),Z=r(40794),E=r.n(Z),c=r(12461),M=r(9669),f=r.n(M),l=r(9212);function m(D){return v.apply(this,arguments)}function v(){return v=E()(o()().mark(function D(h){var a,u;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.Z.get("/tenant",y()({method:"GET"},h||{}));case 3:return a=t.sent,u=a.data,t.abrupt("return",{data:u.data,error:!1,message:"Success Get",responseCode:u.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!f().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),c.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),c.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},D,null,[[0,8]])})),v.apply(this,arguments)}var T=function(){var D=E()(o()().mark(function h(a){var u,d,t;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.put("/tenant/".concat(a.id),{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,member_id:a.member_id,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password,nama_unit:a.nama_unit,kode_unit:a.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return u=e.sent,d=u.data,e.abrupt("return",y()(y()({},d),{},{status:"ok",error:!1}));case 8:if(e.prev=8,e.t0=e.catch(0),!f().isAxiosError(e.t0)){e.next=17;break}return console.log("error message: ",e.t0.message),t=e.t0.response,t.data.message?c.ZP.error(t.data.message):c.ZP.error(e.t0.message),e.abrupt("return",{responseCode:400,message:e.t0.message,error:!0});case 17:return console.log("unexpected error: ",e.t0),c.ZP.error("An unexpected error occured"),e.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return e.stop()}},h,null,[[0,8]])}));return function(a){return D.apply(this,arguments)}}(),R=function(){var D=E()(o()().mark(function h(a){var u,d,t;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.post("/tenant",{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return u=e.sent,d=u.data,e.abrupt("return",y()(y()({},d),{},{status:"ok",error:!1}));case 8:if(e.prev=8,e.t0=e.catch(0),!f().isAxiosError(e.t0)){e.next=17;break}return console.log("error message: ",e.t0.message),t=e.t0.response,t.data.message?c.ZP.error(t.data.message):c.ZP.error(e.t0.message),e.abrupt("return",{responseCode:400,message:e.t0.message,error:!0});case 17:return console.log("unexpected error: ",e.t0),c.ZP.error("An unexpected error occured"),e.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return e.stop()}},h,null,[[0,8]])}));return function(a){return D.apply(this,arguments)}}(),x=null,I=function(){var D=E()(o()().mark(function h(a){var u,d;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,l.Z.get("/tenant/detail/".concat(a),{method:"GET"});case 3:return u=i.sent,d=u.data,i.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(i.prev=8,i.t0=i.catch(0),!f().isAxiosError(i.t0)){i.next=16;break}return console.log("error message: ",i.t0.message),c.ZP.error(i.t0.message),i.abrupt("return",{data:null,error:!0,message:i.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",i.t0),c.ZP.error("An unexpected error occurred"),i.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return i.stop()}},h,null,[[0,8]])}));return function(a){return D.apply(this,arguments)}}()},13174:function(F,$,r){r.d($,{Ij:function(){return I},NY:function(){return m},Os:function(){return T},Qn:function(){return h},zz:function(){return D}});var O=r(97983),o=r.n(O),k=r(11281),y=r.n(k),Z=r(40794),E=r.n(Z),c=r(12461),M=r(9669),f=r.n(M),l=r(9212);function m(a){return v.apply(this,arguments)}function v(){return v=E()(o()().mark(function a(u){var d,t;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/ticket/iki/all",y()({method:"GET"},u||{}));case 3:return d=e.sent,t=d.data,e.abrupt("return",{data:t.data,error:!1,message:"Success Get",responseCode:t.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!f().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),c.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),c.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},a,null,[[0,8]])})),v.apply(this,arguments)}function T(a){return R.apply(this,arguments)}function R(){return R=E()(o()().mark(function a(u){var d,t;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/teknisi/all",y()({method:"GET"},u||{}));case 3:return d=e.sent,t=d.data,e.abrupt("return",{data:t.data,error:!1,message:"Success Get",responseCode:t.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!f().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),c.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),c.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},a,null,[[0,8]])})),R.apply(this,arguments)}var x=null,I=function(){var a=E()(o()().mark(function u(d){var t,i,e;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.Z.put("/ticket/update/teknisi/"+d.no_ticket,{technician:d.technician});case 3:return t=n.sent,i=t.data,n.abrupt("return",y()(y()({},i),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!f().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),e=n.t0.response,e.data.message?c.ZP.error(e.data.message):c.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),c.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},u,null,[[0,8]])}));return function(d){return a.apply(this,arguments)}}(),D=function(){var a=E()(o()().mark(function u(d){var t,i,e;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.Z.put("/ticket/iki/cancel/"+d.id);case 3:return t=n.sent,i=t.data,n.abrupt("return",y()(y()({},i),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!f().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),e=n.t0.response,e.data.message?c.ZP.error(e.data.message):c.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),c.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},u,null,[[0,8]])}));return function(d){return a.apply(this,arguments)}}(),h=function(){var a=E()(o()().mark(function u(d){var t,i;return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,g.next=3,l.Z.get("/ticket/iki/all",{method:"GET",params:{id:d}});case 3:return t=g.sent,i=t.data,g.abrupt("return",{data:i.data,error:!1,message:"Success Get",responseCode:i.responseCode});case 8:if(g.prev=8,g.t0=g.catch(0),!f().isAxiosError(g.t0)){g.next=16;break}return console.log("error message: ",g.t0.message),c.ZP.error(g.t0.message),g.abrupt("return",{data:null,error:!0,message:g.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",g.t0),c.ZP.error("An unexpected error occurred"),g.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return g.stop()}},u,null,[[0,8]])}));return function(d){return a.apply(this,arguments)}}()},27049:function(F,$,r){var O=r(87462),o=r(4942),k=r(94184),y=r.n(k),Z=r(67294),E=r(53124),c=function(f,l){var m={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&l.indexOf(v)<0&&(m[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,v=Object.getOwnPropertySymbols(f);T<v.length;T++)l.indexOf(v[T])<0&&Object.prototype.propertyIsEnumerable.call(f,v[T])&&(m[v[T]]=f[v[T]]);return m},M=function(l){var m,v=Z.useContext(E.E_),T=v.getPrefixCls,R=v.direction,x=l.prefixCls,I=l.type,D=I===void 0?"horizontal":I,h=l.orientation,a=h===void 0?"center":h,u=l.orientationMargin,d=l.className,t=l.children,i=l.dashed,e=l.plain,g=c(l,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),n=T("divider",x),W=a.length>0?"-".concat(a):a,b=!!t,S=a==="left"&&u!=null,A=a==="right"&&u!=null,U=y()(n,"".concat(n,"-").concat(D),(m={},(0,o.Z)(m,"".concat(n,"-with-text"),b),(0,o.Z)(m,"".concat(n,"-with-text").concat(W),b),(0,o.Z)(m,"".concat(n,"-dashed"),!!i),(0,o.Z)(m,"".concat(n,"-plain"),!!e),(0,o.Z)(m,"".concat(n,"-rtl"),R==="rtl"),(0,o.Z)(m,"".concat(n,"-no-default-orientation-margin-left"),S),(0,o.Z)(m,"".concat(n,"-no-default-orientation-margin-right"),A),m),d),G=(0,O.Z)((0,O.Z)({},S&&{marginLeft:u}),A&&{marginRight:u});return Z.createElement("div",(0,O.Z)({className:U},g,{role:"separator"}),t&&D!=="vertical"&&Z.createElement("span",{className:"".concat(n,"-inner-text"),style:G},t))};$.Z=M}}]);
