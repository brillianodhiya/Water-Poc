"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9366],{94149:function(w,v,e){e.d(v,{Z:function(){return h}});var d=e(1413),t=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},u=g,m=e(84089),l=function(p,L){return t.createElement(m.Z,(0,d.Z)((0,d.Z)({},p),{},{ref:L,icon:u}))};l.displayName="LockOutlined";var h=t.forwardRef(l)},87547:function(w,v,e){e.d(v,{Z:function(){return h}});var d=e(1413),t=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},u=g,m=e(84089),l=function(p,L){return t.createElement(m.Z,(0,d.Z)((0,d.Z)({},p),{},{ref:L,icon:u}))};l.displayName="UserOutlined";var h=t.forwardRef(l)},26730:function(w,v,e){e.r(v),e.d(v,{default:function(){return R}});var d=e(97983),t=e.n(d),g=e(11281),u=e.n(g),m=e(40794),l=e.n(m),h=e(12741),x=e.n(h),p=e(36205),L=e(87547),N=e(94149),U=e(71063),z=e(14776),T=e(14670),Z=e(12461),M=e(67294),S={container:"container___REQAy",lang:"lang___DAjLY",content:"content___IkUx1",icon:"icon___fqAhh"},V=e(64593),C=e(25126),a=e(85893),F=function(O){var j=O.content;return(0,a.jsx)(T.Z,{style:{marginBottom:24},message:j,type:"error",showIcon:!0})},H=function(){var O=(0,M.useState)({}),j=x()(O,2),A=j[0],$=j[1],I=(0,z.useModel)("@@initialState"),y=I.initialState,P=I.refresh,B=I.setInitialState,E=function(){var f=l()(t()().mark(function i(s){var r,o;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y==null||(r=y.fetchUserInfo)===null||r===void 0?void 0:r.call(y,s);case 2:if(o=n.sent,!o){n.next=8;break}return console.log(o,"USER INFO"),n.next=7,B(function(J){return u()(u()({},J),{},{currentUser:o})});case 7:return n.abrupt("return",{type:"ok"});case 8:return n.abrupt("return",{type:"fail"});case 9:case"end":return n.stop()}},i)}));return function(s){return f.apply(this,arguments)}}(),G=function(){var f=l()(t()().mark(function i(s){var r,o;return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,C.pH)(u()(u()({},s),{},{email:s.email,password:s.password,autoLogin:s.autoLogin}));case 3:if(r=n.sent,console.log(r,"MSG"),r.responseCode!==200){n.next=15;break}return Z.ZP.success(r.message),n.next=9,E(r.token);case 9:return n.next=11,P();case 11:return window.location.replace("/"),n.abrupt("return");case 15:console.log(r),$(r),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(0),o="Login Failed!",console.log(n.t0),Z.ZP.error(o);case 24:case"end":return n.stop()}},i,null,[[0,19]])}));return function(s){return f.apply(this,arguments)}}(),Q=A.status,D=A.type,Y=function(){var f=l()(t()().mark(function i(){var s,r;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=window.localStorage.getItem("token")||"",c.next=3,E(s);case 3:return r=c.sent,c.next=6,P();case 6:r.type=="ok"&&window.location.replace("/");case 7:case"end":return c.stop()}},i)}));return function(){return f.apply(this,arguments)}}();return M.useEffect(function(){window.localStorage.getItem("token")&&Y()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(V.q,{children:[(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("title",{children:"AAT IoT Platform | Login"}),(0,a.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,a.jsxs)("div",{className:S.container,children:[(0,a.jsx)("div",{className:S.lang,"data-lang":!0}),(0,a.jsxs)("div",{className:S.content,children:[(0,a.jsx)("div",{style:{textAlign:"center",marginBottom:"24px"},children:(0,a.jsx)("img",{alt:"logo",src:"/logoaat.png",width:250})}),(0,a.jsxs)(U.U0H,{title:"Log in",subTitle:"Please input your information in the fields below to enter your account",initialValues:{autoLogin:!0},onFinish:function(){var f=l()(t()().mark(function i(s){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,G(s);case 2:case"end":return o.stop()}},i)}));return function(i){return f.apply(this,arguments)}}(),className:"LoginPage",children:[Q==="error"&&D==="account"&&(0,a.jsx)(F,{content:"Verification Code Error"}),(0,a.jsx)(U.VaQ,{name:"email",fieldProps:{size:"large",prefix:(0,a.jsx)(L.Z,{className:S.prefixIcon})},placeholder:"Email",rules:[{required:!0,message:"Email is required!"}],label:"Email",requiredMark:"optional"}),(0,a.jsx)(U.VaQ.Password,{name:"password",fieldProps:{size:"large",prefix:(0,a.jsx)(N.Z,{className:S.prefixIcon})},placeholder:"Password",rules:[{required:!0,message:"Password is required!"}],label:"Password"})]})]}),(0,a.jsx)(p.Z,{})]})]})},R=H}}]);
