"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8835],{38497:function(Ue,w,t){t.r(w),t.d(w,{default:function(){return ct}});var ie=t(11281),v=t.n(ie),oe=t(97983),x=t.n(oe),le=t(40794),$=t.n(le),E=t(12741),p=t.n(E),O=t(28530),P=t(80737),Q=t(14538),W=t(11382),X=t(69677),c=t(67294),e=t(85893),de={labelCol:{span:8},wrapperCol:{span:16}},D=function(T){var q=T.devEui,G=T.description,m=T.onOk,ce=T.onCancel,_=T.open,ee=T.device_id,me=P.Z.useForm(),pe=p()(me,1),Y=pe[0],te=c.useState(!1),H=p()(te,2),B=H[0],N=H[1];c.useEffect(function(){Y.setFields([{name:"description",value:G}])},[_,G]);var R=function(){var fe=$()(x()().mark(function V(g){var K;return x()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return console.log(g),N(!0),k.next=4,(0,O.ur)({device_id:ee,description:g.description});case 4:K=k.sent,K.error?N(!1):(N(!1),Q.Z.success({content:"Success Edit Description "+q+"to "+g.description,onOk:function(){m()}}));case 6:case"end":return k.stop()}},V)}));return function(g){return fe.apply(this,arguments)}}();return(0,e.jsx)(Q.Z,{title:"Edit Description "+q,open:_,onOk:Y.submit,onCancel:ce,okText:"Save",children:(0,e.jsx)(W.Z,{spinning:B,children:(0,e.jsx)(P.Z,v()(v()({},de),{},{form:Y,name:"control-hooks",onFinish:R,children:(0,e.jsx)(P.Z.Item,{name:"description",label:"Description",children:(0,e.jsx)(X.Z.TextArea,{placeholder:"Description"})})}))})})},j=t(45428),r=t(38405),f=t(78120),Z=t(5077),o=t(95971),u=t(91321),i=t(68795),We=t(82826),ye=t(87547),ze=t(87603),Ze=t(86548),Ge=t(28548),Ye=t(88641),He=t(24969),Ce=t(91714),Ne=t(99611),Ve=t(53971),we=t(48689),Qe=t(37446),Xe=t(62816),Je=t(38402),b=t(30028),Ee=t(23349),qe=t(75302),h=t(26713),M=t(71577),J=t(58492),S=t(21802),De=t(59652),ue=t(71230),C=t(15746),_e=t(24093),et=t(20550),tt=t(95439),nt=t(27049),rt=t(13013),z=t(66516),at=t(30381),I=t.n(at),Lt=t(29218),st=t(64593),it=t(42054),ot=t.n(it);I().locale("en");var lt=(0,u.Z)({scriptUrl:"//at.alicdn.com/t/c/font_3875475_w5k22iyjel.js"}),L=Ee.Z.Column,dt=qe.ZP.useBreakpoint,ut=function(){var T,q=c.useState({node_type:[]}),G=p()(q,2),m=G[0],ce=G[1],_=c.useState([]),ee=p()(_,2),me=ee[0],pe=ee[1],Y=c.useState(!1),te=p()(Y,2),H=te[0],B=te[1],N=(0,b.useLocation)(),R=N.state,fe=c.useState(0),V=p()(fe,2),g=V[0],K=V[1],Se=c.useState(""),k=p()(Se,2),ne=k[0],pt=k[1],ft=c.useState(""),Te=p()(ft,2),ht=Te[0],he=Te[1],gt=c.useState(""),Re=p()(gt,2),vt=Re[0],$e=Re[1],Ae=c.useRef(null),xt=c.useState(!1),Fe=p()(xt,2),jt=Fe[0],ge=Fe[1],yt=c.useState({}),Oe=p()(yt,2),A=Oe[0],re=Oe[1],Zt=c.useState([]),Pe=p()(Zt,2),Ct=Pe[0],Et=Pe[1],Dt=c.useState(!1),Me=p()(Dt,2),St=Me[0],ae=Me[1],Tt=c.useState(!1),Ie=p()(Tt,2),Rt=Ie[0],ve=Ie[1],$t=c.useState(!1),Le=p()($t,2),At=Le[0],Be=Le[1],Ft=dt(),Ot=function(){var s=$()(x()().mark(function n(){var a;return x()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return B(!0),l.next=3,(0,O.We)({},g);case 3:a=l.sent,B(!1),a.error||Et(a.data);case 6:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}();c.useEffect(function(){g&&Ot()},[g]);var xe=function(){var s=$()(x()().mark(function n(){var a;return x()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return B(!0),l.next=3,(0,o.GU)(R==null?void 0:R.tenant_id);case 3:a=l.sent,B(!1),a.error||(ce(a.data),a.data.node_type.length>0&&K(a.data.node_type[0].id));case 6:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}();c.useEffect(function(){xe()},[]);var ke=m?m.node_type.length>0?m.node_type.map(function(s){return{label:s.name,value:s.id}}):[]:[],Pt=function(){var s=$()(x()().mark(function n(){var a;return x()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return B(!0),l.next=3,(0,O._v)({params:{type:g,tenant_id:R==null?void 0:R.tenant_id}});case 3:a=l.sent,B(!1),a.error||(a.data.map(function(y,F){a.data[F].area_name=y.Nebula_Area.area_name,a.data[F].tenant_name=y.Nebula_Tenant.name}),pe(a.data));case 6:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}();c.useEffect(function(){g&&Pt()},[g]),console.log(g,"DATA DEVICE");var be=function(n,a,d){a(),he(n[0]),$e(d)},Mt=function(n){n(),he("")},je=function(n){return{filterDropdown:function(d){var l=d.setSelectedKeys,y=d.selectedKeys,F=d.confirm,Ke=d.clearFilters,It=d.close;return(0,e.jsxs)("div",{style:{padding:8},onKeyDown:function(se){return se.stopPropagation()},children:[(0,e.jsx)(X.Z,{ref:Ae,placeholder:"Search ".concat(n),value:y[0],onChange:function(se){return l(se.target.value?[se.target.value]:[])},onPressEnter:function(){return be(y,F,n)},style:{marginBottom:8,display:"block"}}),(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(M.Z,{type:"primary",onClick:function(){return be(y,F,n)},icon:(0,e.jsx)(i.Z,{}),size:"small",style:{width:90},children:"Search"}),(0,e.jsx)(M.Z,{onClick:function(){return Ke&&Mt(Ke)},size:"small",style:{width:90},children:"Reset"}),(0,e.jsx)(M.Z,{type:"link",size:"small",onClick:function(){F({closeDropdown:!1}),he(y[0]),$e(n)},children:"Filter"}),(0,e.jsx)(M.Z,{type:"link",size:"small",onClick:function(){It()},children:"close"})]})]})},filterIcon:function(d){return(0,e.jsx)(i.Z,{style:{color:d?"#1890ff":void 0}})},onFilter:function(d,l){var y;return((y=l[n])!==null&&y!==void 0?y:"").toString().toLowerCase().includes(d.toLowerCase())},onFilterDropdownOpenChange:function(d){d&&setTimeout(function(){var l;return(l=Ae.current)===null||l===void 0?void 0:l.select()},100)},render:function(d){return vt===n?(0,e.jsx)(ot(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[ht],autoEscape:!0,textToHighlight:d?d.toString():""}):d}}};return(0,e.jsxs)(Je._z,{breadcrumb:void 0,title:(0,e.jsx)(M.Z,{type:"link",onClick:function(){return b.history.push("/area/info",{area_id:R.area_id})},size:"large",children:(0,e.jsxs)(h.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(We.Z,{onClick:function(){return b.history.push("/area/info",{area_id:R.area_id})},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(J.Z,{children:[(0,e.jsx)(J.Z.Item,{children:"Area Management"}),(0,e.jsx)(J.Z.Item,{children:"Area"}),(0,e.jsx)(J.Z.Item,{href:"#",children:"Tenant"})]}),(0,e.jsx)(S.Z.Title,{level:5,children:"Detail Tenant"})]})]})}),childrenContentStyle:{minHeight:"80vh"},children:[(0,e.jsxs)(st.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"BITA | Detail Tenant "}),(0,e.jsx)("link",{rel:"icon",href:"/logo.png",type:"image/x-icon"})]}),(0,e.jsx)(Z.X,{device_id:A.id,open:jt,onCancel:function(){return ge(!1)},onOk:function(){ge(!1)},typeName:ne,devEui:A.devEui,desc:A.description}),(0,e.jsx)(j.Y,{devEui:A.devEui,open:St,interval:A.interval,onCancel:function(){ae(!1)},onOk:function(){ae(!1),xe()}}),(0,e.jsx)(D,{devEui:A.devEui,open:Rt,description:A.description,device_id:A.id,onCancel:function(){ve(!1)},onOk:function(){ve(!1),xe()}}),(0,e.jsx)(f.T,{devEui:A.devEui,open:At,onCancel:function(){Be(!1)},onOk:function(){Be(!1)},typeName:ne}),(0,e.jsx)(De.Z,{loading:H,style:{borderRadius:8},children:(0,e.jsxs)(ue.Z,{gutter:[16,16],children:[(0,e.jsx)(C.Z,{xs:24,sm:8,md:6,lg:6,xl:6,xxl:4,children:(0,e.jsx)(_e.C,{shape:"square",style:{border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:8},icon:(0,e.jsx)(ye.Z,{}),size:{xs:124,sm:124,md:144,lg:144,xl:190,xxl:200},src:m.logo})}),(0,e.jsx)(C.Z,{xs:24,sm:16,md:18,lg:18,xl:18,xxl:20,children:(0,e.jsxs)(ue.Z,{gutter:[8,8],children:[(0,e.jsx)(C.Z,{span:24,children:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(S.Z.Text,{type:"secondary",children:"Area"}),(0,e.jsx)(ze.Z,{style:{color:"#BEBEBE"}}),(0,e.jsx)(S.Z.Text,{type:"secondary",children:m==null||(T=m.Nebula_Area)===null||T===void 0?void 0:T.area_name})]})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsxs)(et.Z,{color:"processing",style:{borderRadius:100},children:["Member since ",I()(m.cretedAt).format("MMMM YYYY")]})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsxs)(h.Z,{align:"center",children:[(0,e.jsx)(S.Z.Title,{level:2,style:{marginBottom:"0px"},children:m.name}),(0,e.jsx)(M.Z,{icon:(0,e.jsx)(Ze.Z,{}),type:"link",style:{marginBottom:"12px"},onClick:function(){return b.history.push("/tenant/edit",{dataEdit:m})}})]})}),(0,e.jsx)(C.Z,{span:24,children:(0,e.jsx)(S.Z,{children:m.address})}),(0,e.jsx)(C.Z,{xs:12,sm:12,md:6,lg:4,xxl:3,children:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(ye.Z,{style:{color:"#1890FF"}}),(0,e.jsx)(S.Z,{children:m.pic_name})]})}),(0,e.jsx)(C.Z,{xs:12,sm:12,md:6,lg:4,xxl:3,children:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(Ge.Z,{style:{color:"#1890FF"}}),(0,e.jsx)(S.Z,{children:m.phone})]})}),(0,e.jsx)(C.Z,{xs:12,sm:12,md:6,lg:4,xxl:3,children:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(Ye.Z,{style:{color:"#1890FF"}}),(0,e.jsx)(S.Z,{children:m.email})]})})]})})]})}),Ft.xs&&(0,e.jsx)(tt.Z,{options:ke,onResize:void 0,onResizeCapture:void 0,size:"large",block:!0,style:{maxWidth:300,marginTop:20,marginBottom:20,padding:6,backgroundImage:"radial-gradient(circle at 97% 10%, #EBF2FF 0%, #F5F8FF 28%, #EBF1FF 124%)"},onChange:function(n){K(n),pt(ke.find(function(a){return a.value===n}).label)},value:g}),(0,e.jsxs)(ue.Z,{justify:"space-between",style:{border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:8,marginTop:20},children:[(0,e.jsx)(C.Z,{style:{padding:"24px 20px 15px 20px",fontSize:16},children:"List Device"}),(0,e.jsx)(C.Z,{style:{padding:"24px 20px 15px"},children:(0,e.jsx)(M.Z,{icon:(0,e.jsx)(He.Z,{}),onClick:function(){return b.history.push("/device/create?area_id=".concat(m.area_id,"&tenant_id=").concat(m.id),{area_id:m.area_id,tenant_id:m.id})},children:"Add Device"})}),(0,e.jsx)(nt.Z,{style:{margin:0,padding:0}}),(0,e.jsx)(C.Z,{xxl:3,xl:3,md:5,sm:6,xs:0,children:m.node_type.map(function(s){return(0,e.jsxs)(h.Z,{style:{background:s.id==g?"#E6F7FF":"#fff",width:"100%",padding:"5px 12px"},children:[(0,e.jsx)("img",{src:s.icon,alt:s.name,style:{width:"20px",height:"20px",marginBottom:"2px"}}),(0,e.jsx)(S.Z,{style:{cursor:"pointer",fontWeight:s.id==g?"bold":"normal"},onClick:function(){K(s.id),ne(s.name)},children:s.name})]},s.id)})}),(0,e.jsx)(C.Z,{xxl:21,xl:21,md:19,sm:18,xs:24,style:{padding:10,background:"#E6F7FF"},children:(0,e.jsx)(De.Z,{bodyStyle:{padding:0,margin:0},children:(0,e.jsxs)(Ee.Z,{dataSource:me,loading:H,scroll:{x:1300},children:[(0,e.jsx)(L,{width:200,title:"Installation Date",dataIndex:"instalation_date",render:function(n){return I()(n).format("MMM DD YYYY HH:mm:ss")},sorter:function(n,a){return I()(n.instalation_date).unix()-I()(a.instalation_date).unix()}},"instalation_date"),(0,e.jsx)(L,v()({width:200,title:"Dev Eui",dataIndex:"devEui"},je("devEui")),"devEui"),(0,e.jsx)(L,v()({width:200,title:"Mode / Brand",dataIndex:"model",sorter:function(n,a){return n.model.length-a.model.length}},je("model")),"model"),(0,e.jsx)(L,{width:200,title:"Last Update",dataIndex:"lastUpdate",render:function(n){if(n)return I()(n).format("MMM DD YYYY HH:mm:ss")},sorter:function(n,a){return I()(n.lastUpdate).unix()-I()(a.lastUpdate).unix()}},"lastUpdate"),(0,e.jsx)(L,{width:130,title:"Interval",dataIndex:"interval",sorter:function(n,a){return n.interval-a.interval},render:function(n){return(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(Ce.Z,{style:{color:"gray"}}),(0,e.jsxs)(S.Z,{children:[n," min"]})]})}},"interval"),(0,e.jsx)(L,{width:150,title:"Battery Level",dataIndex:"battery",sorter:function(n,a){return n.battery-a.battery},filters:[{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.QP,{}),"50 - 100"]}),value:"50-100"},{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.xT,{}),"20 - 50"]}),value:"20-50"},{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.t3,{style:{marginLeft:"3px"}})," ","0 - 20"]}),value:"0-20"}],onFilter:function(n,a){return n==="50-100"?a.battery>50:n==="20-50"?a.battery>20&&a.battery<=50:n==="0-20"?a.battery<=20:!0},render:function(n){return(0,e.jsx)(e.Fragment,{children:n>20&&n<=50?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.xT,{}),n]}):n<=20?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.t3,{}),n]}):n>50?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(r.QP,{}),n]}):null})}},"battery"),(0,e.jsx)(L,v()({width:200,title:"Description",dataIndex:"description"},je("description")),"description"),(0,e.jsx)(L,{dataIndex:"id",title:"Action",fixed:"right",width:80,render:function(n,a){return(0,e.jsx)(rt.Z,{trigger:["click"],overlay:(0,e.jsxs)(z.Z,{children:[(0,e.jsxs)(z.Z.Item,{onClick:function(){ge(!0),re(a)},children:[(0,e.jsx)(Ne.Z,{}),"  ","View Log"]},"1"),Ct.map(function(d){if(d=="interval"){var l=(0,e.jsx)(Ze.Z,{}),y=function(){ae(!0),re(a)};switch(d){case"interval":l=(0,e.jsx)(Ce.Z,{}),y=function(){ae(!0),re(a)};break;case"meter reading":l=(0,e.jsx)(Ve.Z,{});break;case"valve":l=(0,e.jsx)(lt,{type:"icon-valve"});break;default:break}return(0,e.jsxs)(z.Z.Item,{onClick:function(){y()},style:{textTransform:"capitalize"},children:[l," ",d]},d)}}),(0,e.jsxs)(z.Z.Item,{onClick:function(){ve(!0),re(a)},style:{textTransform:"capitalize"},children:[(0,e.jsx)(Xe.iFj,{})," Edit Descripton"]},"description"),(0,e.jsxs)(z.Z.Item,{onClick:function(){b.history.push("/device/".concat(a.id,"/delete"))},style:{color:"red"},children:[(0,e.jsx)(we.Z,{})," Unsign"]},"3")]}),placement:"bottomRight",children:(0,e.jsx)(M.Z,{type:"text",children:(0,e.jsx)(Qe.Z,{})})})}},"id")]})})})]})]})},ct=ut},95971:function(Ue,w,t){t.d(w,{GU:function(){return de},cH:function(){return Q},mZ:function(){return c},rR:function(){return X}});var ie=t(97983),v=t.n(ie),oe=t(11281),x=t.n(oe),le=t(40794),$=t.n(le),E=t(12461),p=t(9669),O=t.n(p),P=t(9212);function Q(D){return W.apply(this,arguments)}function W(){return W=$()(v()().mark(function D(j){var r,f;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,P.Z.get("/tenant",x()({method:"GET"},j||{}));case 3:return r=o.sent,f=r.data,o.abrupt("return",{data:f.data,error:!1,message:"Success Get",responseCode:f.responseCode});case 8:if(o.prev=8,o.t0=o.catch(0),!O().isAxiosError(o.t0)){o.next=16;break}return console.log("error message: ",o.t0.message),E.ZP.error(o.t0.message),o.abrupt("return",{data:null,error:!0,message:o.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",o.t0),E.ZP.error("An unexpected error occurred"),o.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return o.stop()}},D,null,[[0,8]])})),W.apply(this,arguments)}var X=function(){var D=$()(v()().mark(function j(r){var f,Z,o;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,P.Z.put("/tenant/".concat(r.id),{image:r.image,area_id:r.area_id,name:r.name,pic_name:r.pic_name,address:r.address,latitude:r.latitude,longitude:r.longitude,type:r.type,area_name:r.area_name,phone:r.phone,email:r.email,username:r.username,password:r.password,nama_unit:r.nama_unit,kode_unit:r.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return f=i.sent,Z=f.data,i.abrupt("return",x()(x()({},Z),{},{status:"ok",error:!1}));case 8:if(i.prev=8,i.t0=i.catch(0),!O().isAxiosError(i.t0)){i.next=17;break}return console.log("error message: ",i.t0.message),o=i.t0.response,o.data.message?E.ZP.error(o.data.message):E.ZP.error(i.t0.message),i.abrupt("return",{responseCode:400,message:i.t0.message,error:!0});case 17:return console.log("unexpected error: ",i.t0),E.ZP.error("An unexpected error occured"),i.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return i.stop()}},j,null,[[0,8]])}));return function(r){return D.apply(this,arguments)}}(),c=function(){var D=$()(v()().mark(function j(r){var f,Z,o;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,P.Z.post("/tenant",{image:r.image,area_id:r.area_id,name:r.name,pic_name:r.pic_name,address:r.address,latitude:r.latitude,longitude:r.longitude,type:r.type,area_name:r.area_name,phone:r.phone,email:r.email,username:r.username,password:r.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return f=i.sent,Z=f.data,i.abrupt("return",x()(x()({},Z),{},{status:"ok",error:!1}));case 8:if(i.prev=8,i.t0=i.catch(0),!O().isAxiosError(i.t0)){i.next=17;break}return console.log("error message: ",i.t0.message),o=i.t0.response,o.data.message?E.ZP.error(o.data.message):E.ZP.error(i.t0.message),i.abrupt("return",{responseCode:400,message:i.t0.message,error:!0});case 17:return console.log("unexpected error: ",i.t0),E.ZP.error("An unexpected error occured"),i.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return i.stop()}},j,null,[[0,8]])}));return function(r){return D.apply(this,arguments)}}(),e=null,de=function(){var D=$()(v()().mark(function j(r){var f,Z;return v()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,P.Z.get("/tenant/detail/".concat(r),{method:"GET"});case 3:return f=u.sent,Z=f.data,u.abrupt("return",{data:Z.data,error:!1,message:"Success Get",responseCode:Z.responseCode});case 8:if(u.prev=8,u.t0=u.catch(0),!O().isAxiosError(u.t0)){u.next=16;break}return console.log("error message: ",u.t0.message),E.ZP.error(u.t0.message),u.abrupt("return",{data:null,error:!0,message:u.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",u.t0),E.ZP.error("An unexpected error occurred"),u.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return u.stop()}},j,null,[[0,8]])}));return function(r){return D.apply(this,arguments)}}()}}]);
