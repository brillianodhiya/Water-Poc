"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2311],{75539:function(N,f,t){t.d(f,{D:function(){return A},q:function(){return Y}});var D=t(67294),A=function(x){x=parseFloat(x),isNaN(x)&&(x=0);var i=new Intl.NumberFormat("id-ID").format(x);return i.split(",").length>1?i.split(",")[1].length<3?i.split(",")[0]+","+(i.split(",")[1]+"000").slice(0,3):i:i+",000"},Y=function(x){return new Intl.NumberFormat("id-ID").format(x)}},73869:function(N,f,t){t.r(f),t.d(f,{default:function(){return te}});var D=t(97983),A=t.n(D),Y=t(40794),M=t.n(Y),x=t(12741),i=t.n(x),$=t(58638),L=t(38402),k=t(23349),F=t(27049),P=t(59652),w=t(71230),O=t(15746),R=t(26713),C=t(21802),G=t(41232),H=t(71577),h=t(67294),K=t(64593),V=t(30381),l=t.n(V),g=t(75539),J=t(98435),Q=t(39173),ue=function(){var I="data:application/vnd.ms-excel;base64,",p='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',m=function(d){return window.btoa(unescape(encodeURIComponent(d)))},y=function(d,u){return d.replace(/{(\w+)}/g,function(c,v){return u[v]})};return function(o,d,u){o.nodeType||(o=document.getElementById(o));var c={worksheet:d||"Worksheet",table:o.innerHTML};document.getElementById("dlink").href=I+m(y(p,c)),document.getElementById("dlink").download=u,document.getElementById("dlink").click()}},X=function(){var I="data:application/vnd.ms-excel;base64,",p='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',m=function(d){return window.btoa(unescape(encodeURIComponent(d)))},y=function(d,u){return d.replace(/{(\w+)}/g,function(c,v){return u[v]})};return function(o,d,u){var c;o.nodeType||(o=(c=document.getElementById(o))===null||c===void 0?void 0:c.getElementsByTagName("table")[0]);var v={worksheet:d||"Worksheet",table:o.innerHTML};document.getElementById("dlink").href=I+m(y(p,v)),document.getElementById("dlink").download=u,document.getElementById("dlink").click()}},q=t(69408),b=t(39347),_=t(83461),e=t(85893),a=k.Z.Column;l().locale("en");var ee=function(){var I=h.useState([]),p=i()(I,2),m=p[0],y=p[1],o=h.useState(!1),d=i()(o,2),u=d[0],c=d[1],v=h.useState(0),W=i()(v,2),j=W[0],ne=W[1],ae=h.useState(0),z=i()(ae,2),S=z[0],re=z[1],oe=h.useState(l()()),B=i()(oe,2),T=B[0],de=B[1],ce=function(){X()("reports-log","Reports Log ","Reports Log "+l()().unix())},le=function(){var r=M()(A()().mark(function n(){var s;return A()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c(!0),E.next=3,(0,q.tq)({params:{area_id:j||void 0,tenant_id:S||void 0,periode:T.format("YYYY-MM")}});case 3:s=E.sent,c(!1),s.error||y(s.data);case 6:case"end":return E.stop()}},n)}));return function(){return r.apply(this,arguments)}}();h.useEffect(function(){return le(),function(){}},[T,j,S]),console.log(m);var se=function(){var n=[{A1:"",A2:"",A3:"PT. BUKIT INDAH TIRTA ALAM",A4:"",A5:"",A6:"",A7:"",A8:"",A9:"",A10:""},{A1:"",A2:"",A3:"",A4:"",A5:"",A6:"",A7:"",A8:"",A9:"",A10:""},{A1:"",A2:"",A3:"Usage List",A4:"",A5:"",A6:"",A7:"",A8:"",A9:"",A10:""},{A1:"",A2:"",A3:"",A4:"",A5:"",A6:"Period",A7:"",A8:"Meter",A9:"",A10:""},{A1:"#",A2:"Kode Unit",A3:"Unit Name",A4:"Meter No.",A5:"Customer Name",A6:"From",A7:"To",A8:"From",A9:"To",A10:"Balance"}];return m.map(function(s,U){n.push({A1:(U+1).toString(),A2:s.kode_unit,A3:s.unit_name,A4:s.meter_id,A5:s.tenant_name,A6:l()(s.start_date).format("DD/MM/YYYY"),A7:l()(s.end_date).format("DD/MM/YYYY"),A8:parseInt(s.start_totalizer).toString(),A9:parseInt(s.end_totalizer).toString(),A10:parseInt(s.usage).toString()})}),n},ie=se();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(K.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("link",{rel:"icon",href:"/logo.png",type:"image/x-icon"})]}),(0,e.jsxs)(L._z,{childrenContentStyle:{minHeight:"70vh"},title:"Report",content:"Report Totalizer of device ",children:[(0,e.jsx)(F.Z,{}),(0,e.jsx)(P.Z,{style:{borderRadius:8,marginBottom:20},bodyStyle:{background:" rgba(230, 247, 255, 0.5)"},children:(0,e.jsx)(w.Z,{gutter:[16,16],align:"bottom",children:(0,e.jsxs)(O.Z,{span:24,style:{textAlign:"left"},children:[(0,e.jsxs)(R.Z,{size:"large",wrap:!0,children:[(0,e.jsxs)(R.Z,{direction:"vertical",children:[(0,e.jsx)(C.Z,{children:"Periode"}),(0,e.jsx)(G.Z.MonthPicker,{allowClear:!1,value:T,onChange:function(n){return de(n)}})]}),(0,e.jsxs)(R.Z,{direction:"vertical",children:[(0,e.jsx)(C.Z,{children:"Area Name"}),(0,e.jsx)(J.U,{onChange:function(n){ne(n)},style:{width:"200px"},type:"rounded",useAll:!0,value:j})]}),(0,e.jsxs)(R.Z,{direction:"vertical",children:[(0,e.jsx)(C.Z,{children:"Tenant Name"}),(0,e.jsx)(Q.w,{onChange:function(n){re(n)},areaId:j==0?void 0:j,style:{width:"200px"},type:"rounded",useAll:!0,value:S})]})]}),(0,e.jsx)(_.CSVLink,{data:ie,headers:[{label:"",key:"A1"},{label:"",key:"A2"},{label:"",key:"A3"},{label:"",key:"A4"},{label:"",key:"A5"},{label:"",key:"A6"},{label:"",key:"A7"},{label:"",key:"A8"},{label:"",key:"A9"},{label:"",key:"A10"}],filename:"Reports_Log_".concat(l()().format("YYYY-MM"),"_").concat(l()().unix(),".csv"),children:(0,e.jsx)(H.Z,{style:{float:"right",marginTop:"24px"},type:"primary",icon:(0,e.jsx)($.Z,{}),children:"Export"})})]})})}),(0,e.jsxs)(k.Z,{dataSource:m,loading:u,style:{borderRadius:8,border:"1px solid #f0f0f0"},size:"small",bordered:!0,scroll:{x:!0},children:[(0,e.jsx)(a,{title:"Area Name",dataIndex:"area_name"},"area_name"),(0,e.jsx)(a,{title:"Kode Unit",dataIndex:"kode_unit"},"kode_unit"),(0,e.jsx)(a,{title:"Unit Name",dataIndex:"unit_name"},"unit_name"),(0,e.jsx)(a,{title:"DevEui",dataIndex:"deveui"},"deveui"),(0,e.jsx)(a,{title:"Meter Id",dataIndex:"meter_id"},"meter_id"),(0,e.jsx)(a,{title:"Customer Name",dataIndex:"tenant_name"},"tenant_name"),(0,e.jsx)(a,{title:"Periode",dataIndex:"periode",render:function(n){return l()(n).format("MMM YYYY")}},"periode"),(0,e.jsx)(a,{title:"Start Date",dataIndex:"start_date",render:function(n){return l()(n).format("DD/MM/YYYY")}},"start_date"),(0,e.jsx)(a,{title:"End Date",dataIndex:"end_date",render:function(n){return l()(n).format("DD/MM/YYYY")}},"end_date"),(0,e.jsxs)(b.Z,{title:"Meter",children:[(0,e.jsx)(a,{title:"Start Totalizer",dataIndex:"start_totalizer",render:function(n){return(0,g.D)(n)}},"start_totalizer"),(0,e.jsx)(a,{title:"End Totalizer",dataIndex:"end_totalizer",render:function(n){return(0,g.D)(n)}},"end_totalizer"),(0,e.jsx)(a,{title:"Usage",dataIndex:"usage",render:function(n){return(0,g.D)(n)}},"usage")]})]}),(0,e.jsxs)("div",{style:{opacity:0,position:"fixed"},children:[(0,e.jsx)("a",{id:"dlink"}),(0,e.jsxs)(k.Z,{dataSource:m,loading:u,style:{borderRadius:8,border:"1px solid #f0f0f0"},bordered:!0,pagination:!1,children:[(0,e.jsx)(a,{title:"Area Name",dataIndex:"area_name"},"area_name"),(0,e.jsx)(a,{title:"Kode Unit",dataIndex:"kode_unit"},"kode_unit"),(0,e.jsx)(a,{title:"Unit Name",dataIndex:"unit_name"},"unit_name"),(0,e.jsx)(a,{title:"DevEui",dataIndex:"deveui"},"deveui"),(0,e.jsx)(a,{title:"Meter Id",dataIndex:"meter_id"},"meter_id"),(0,e.jsx)(a,{title:"Customer Name",dataIndex:"tenant_name"},"tenant_name"),(0,e.jsx)(a,{title:"Periode",dataIndex:"periode",render:function(n){return l()(n).format("MMM YYYY")}},"periode"),(0,e.jsx)(a,{title:"Start Date",dataIndex:"start_date",render:function(n){return l()(n).format("DD/MM/YYYY")}},"start_date"),(0,e.jsx)(a,{title:"End Date",dataIndex:"end_date",render:function(n){return l()(n).format("DD/MM/YYYY")}},"end_date"),(0,e.jsxs)(b.Z,{title:"Meter",children:[(0,e.jsx)(a,{title:"Start Totalizer",dataIndex:"start_totalizer",render:function(n){return(0,g.D)(n)}},"start_totalizer"),(0,e.jsx)(a,{title:"End Totalizer",dataIndex:"end_totalizer",render:function(n){return(0,g.D)(n)}},"end_totalizer"),(0,e.jsx)(a,{title:"Usage",dataIndex:"usage",render:function(n){return(0,g.D)(n)}},"usage")]})]})]})]})]})},te=ee},39347:function(N,f){var t;t={value:!0},f.Z=void 0;function D(Y){return null}var A=D;f.Z=A}}]);
