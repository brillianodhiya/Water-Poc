"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4574],{82826:function(b,E,r){r.d(E,{Z:function(){return O}});var P=r(1413),u=r(67294),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},f=x,v=r(84089),d=function(Z,D){return u.createElement(v.Z,(0,P.Z)((0,P.Z)({},Z),{},{ref:D,icon:f}))};d.displayName="ArrowLeftOutlined";var O=u.forwardRef(d)},47083:function(b,E,r){r.r(E);var P=r(97983),u=r.n(P),x=r(40794),f=r.n(x),v=r(12741),d=r.n(v),O=r(5200),C=r.n(O),Z=r(98435),D=r(87806),k=r(82826),z=r(71063),h=r(14776),a=r(66490),R=r(422),M=r(71577),U=r(26713),g=r(58492),o=r(67669),y=r(27049),N=r(11382),V=r(71230),s=r(15746),m=r(11486),H=r(83652),p=r(67294),e=r(85893),G=function(A){return new Promise(function(I,T){var _=new FileReader;_.readAsDataURL(A),_.onload=function(){return I(_.result)},_.onerror=function(L){return T(L)}})},J=function(A){C()(A);var I=a.Z.useForm(),T=d()(I,1),_=T[0],L=p.useState([]),w=d()(L,2),B=w[0],X=w[1],Y=(0,p.useState)(!1),K=d()(Y,2),ie=K[0],q=K[1],ee=p.useState(!1),W=d()(ee,2),re=W[0],S=W[1],ne=(0,p.useState)(""),F=d()(ne,2),de=F[0],se=F[1],ae=(0,p.useState)(""),$=d()(ae,2),oe=$[0],te=$[1],_e=function(l){var n=l.fileList;return X(n)},ue=function(){var t=f()(u()().mark(function l(n){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!n.url&&!n.preview)){i.next=4;break}return i.next=3,G(n.originFileObj);case 3:n.preview=i.sent;case 4:se(n.url||n.preview),q(!0),te(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return i.stop()}},l)}));return function(n){return t.apply(this,arguments)}}(),le=function(){var t=f()(u()().mark(function l(n){var c;return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log(n),S(!0),j.next=4,(0,D.FZ)({name:n.name,phone:n.phone,email:n.email,role:n.role,password:n.newPassword,photo:B.length>0?B[0].originFileObj:void 0,area_id:n.area_id,address:n.address});case 4:c=j.sent,S(!1),c.error?R.Z.error({content:c.message}):R.Z.success({content:c.message,onOk:function(){h.history.push("/users")}});case 7:case"end":return j.stop()}},l)}));return function(n){return t.apply(this,arguments)}}();return(0,e.jsxs)(z._zJ,{breadcrumb:void 0,title:(0,e.jsx)(M.Z,{type:"link",onClick:function(){return h.history.push("/users")},size:"large",children:(0,e.jsxs)(U.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(k.Z,{onClick:function(){return h.history.push("/users")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(g.Z.Item,{children:"User Management"}),(0,e.jsx)(g.Z.Item,{href:"#",children:"Add User"})]}),(0,e.jsx)(o.Z.Title,{level:5,children:"Add User"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(h.Helmet,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"/Sinar-mas.png",type:"image/x-icon"})]}),(0,e.jsx)(y.Z,{style:{paddingTop:0,marginTop:0}}),(0,e.jsx)(N.Z,{spinning:re,children:(0,e.jsx)(a.Z,{form:_,name:"add-area",onFinish:le,style:{width:500,margin:"0px auto",paddingTop:20},children:(0,e.jsxs)(V.Z,{gutter:16,children:[(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Full Name"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"name",rules:[{required:!0,message:"Please input full name!"}],requiredMark:"optional",children:(0,e.jsx)(m.Z,{placeholder:"Full Name"})})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Email"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"email",rules:[{required:!0,message:"Please input email!",type:"email"}],requiredMark:"optional",children:(0,e.jsx)(m.Z,{placeholder:"Email"})})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Phone"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"phone",rules:[{required:!0,message:"Please input phone!"},{pattern:/^(\+62|62|0)8[1-9][0-9]{6,13}$/g,message:"Phone not valid!"}],requiredMark:"optional",children:(0,e.jsx)(m.Z,{placeholder:"Phone"})})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Role"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"role",rules:[{required:!0,message:"Please select role!"}],requiredMark:"optional",children:(0,e.jsx)(H.Z,{placeholder:"Select Role",className:"not-rounded",options:[{label:"Admin",value:"admin"},{label:"Area",value:"area"},{label:"Technician",value:"teknisi"}],onChange:function(){_.setFieldsValue({area_id:void 0})}})})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{noStyle:!0,shouldUpdate:function(l,n){return l.role_id!==n.role_id},children:function(){return _.getFieldValue("role")=="area"?(0,e.jsx)(o.Z,{children:"Area"}):null}})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{noStyle:!0,shouldUpdate:function(l,n){return l.role_id!==n.role_id},children:function(){return _.getFieldValue("role")=="area"?(0,e.jsx)(a.Z.Item,{name:"area_id",rules:[{required:!0,message:"Please input Area!"}],requiredMark:"optional",children:(0,e.jsx)(Z.U,{})}):null}})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Address"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"address",requiredMark:"optional",children:(0,e.jsx)(m.Z.TextArea,{placeholder:"Address"})})}),(0,e.jsx)(s.Z,{span:24,children:(0,e.jsx)(y.Z,{})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"New Password"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please input password!"}],requiredMark:"optional",children:(0,e.jsx)(m.Z.Password,{placeholder:"Input Password"})})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Retype Password"})}),(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(a.Z.Item,{name:"retypePassword",requiredMark:"optional",rules:[{required:!0,message:"Please input password!"},function(t){var l=t.getFieldValue;return{validator:function(c,i){return!i||l("newPassword")===i?Promise.resolve():Promise.reject(new Error("Passwords not match!"))}}}],children:(0,e.jsx)(m.Z.Password,{placeholder:"Retype Password"})})}),(0,e.jsx)(s.Z,{offset:16,children:(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(M.Z,{type:"primary",htmlType:"submit",children:"Save"})}),(0,e.jsx)(a.Z.Item,{children:(0,e.jsx)(M.Z,{type:"default",htmlType:"button",onClick:function(){return h.history.push("/users")},children:"Cancel"})})]})})]})})})]})};E.default=J}}]);
