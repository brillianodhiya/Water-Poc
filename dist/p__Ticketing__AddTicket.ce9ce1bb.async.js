"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2125],{82826:function(w,b,r){r.d(b,{Z:function(){return _}});var R=r(1413),u=r(67294),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},h=U,Z=r(84089),m=function(p,c){return u.createElement(Z.Z,(0,R.Z)((0,R.Z)({},p),{},{ref:c,icon:h}))};m.displayName="ArrowLeftOutlined";var _=u.forwardRef(m)},39173:function(w,b,r){r.d(b,{w:function(){return v}});var R=r(97983),u=r.n(R),U=r(40794),h=r.n(U),Z=r(12741),m=r.n(Z),_=r(95971),$=r(40038),p=r(67294),c=r(85893),v=function(P){var L=P.onChange,B=P.areaId,I=P.value,j=P.style,E=P.type,n=E===void 0?"not-rounded":E,D=P.useAll,T=P.disabled,i=(0,p.useState)([]),o=m()(i,2),a=o[0],g=o[1],d=p.useState(!1),A=m()(d,2),e=A[0],y=A[1],s=function(x,k){var S;return((S=k==null?void 0:k.children)!==null&&S!==void 0?S:"").toLowerCase().includes(x.toLowerCase())},N=function(){var t=h()(u()().mark(function x(){var k;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return y(!0),K.next=3,(0,_.cH)({params:{area_id:B}});case 3:k=K.sent,console.log(k,"data tenant"),y(!1),k.error||g(k.data);case 7:case"end":return K.stop()}},x)}));return function(){return t.apply(this,arguments)}}();return p.useEffect(function(){return N(),function(){}},[B]),(0,c.jsxs)($.Z,{showSearch:!0,value:I,placeholder:"Tenant Name",loading:e,onChange:L,className:n,optionFilterProp:"children",filterOption:s,disabled:T,children:[D&&(0,c.jsx)($.Z.Option,{value:0,children:"All Tenant"},0),a.map(function(t){return(0,c.jsx)($.Z.Option,{value:t.id,children:t.name},t.id)})]})}},87606:function(w,b,r){r.r(b);var R=r(97983),u=r.n(R),U=r(40794),h=r.n(U),Z=r(12741),m=r.n(Z),_=r(98435),$=r(39173),p=r(82826),c=r(38402),v=r(30028),l=r(80737),P=r(14538),L=r(71577),B=r(26713),I=r(58492),j=r(21802),E=r(27049),n=r(11382),D=r(71230),T=r(15746),i=r(40038),o=r(69677),a=r(13174),g=r(30381),d=r.n(g),A=r(29218),e=r.n(A),y=r(67294),s=r(70405),N=r(9212),t=r(85893);d().locale("en");var x=function(){var S=l.Z.useForm(),K=m()(S,1),re=K[0],ae=y.useState(!1),F=m()(ae,2),te=F[0],W=F[1],ne=y.useState([]),H=m()(ne,2),se=H[0],oe=H[1],ue=y.useState([]),Y=m()(ue,2),ie=Y[0],de=Y[1],le=y.useState("installation"),J=m()(le,2),_e=J[0],ce=J[1],me=y.useState([]),Q=m()(me,2),pe=Q[0],ge=Q[1],fe=y.useState(1),V=m()(fe,2),X=V[0],he=V[1],Ee=y.useState(1),q=m()(Ee,2),ee=q[0],ve=q[1],De=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return W(!0),C.next=3,(0,a.Os)({});case 3:O=C.sent,W(!1),O.error||oe(O.data);case 6:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),Pe=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return W(!0),C.next=3,(0,a.kt)({});case 3:O=C.sent,console.log(O.data,"ticket node type data"),W(!1),O.error||de(O.data);case 7:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),Te=function(){var f=h()(u()().mark(function M(){var O;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return W(!0),C.next=3,(0,a._v)({params:{type:ee,tenant_id:X}});case 3:O=C.sent,console.log(O.data,"device core data"),W(!1),O.error||ge(O.data);case 7:case"end":return C.stop()}},M)}));return function(){return f.apply(this,arguments)}}(),Oe=function(){var f=h()(u()().mark(function M(O){var G,C;return u()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return console.log(O),G={area_id:O.area_id,tenant_id:O.tenant_id,type_id:O.type_id,technician_id:O.technician,note:O.note,ticket_type:O.type_ticket,node_id:O.deveui},z.next=4,(0,N.Z)({url:"/ticket/iki/create",method:"POST",data:G});case 4:C=z.sent,W(!1),C?P.Z.success({content:C.data.message,onOk:function(){v.history.push("/ticket")}}):P.Z.error({content:C.message}),console.log(G,"body");case 8:case"end":return z.stop()}},M)}));return function(O){return f.apply(this,arguments)}}(),Ce=function(){De(),Pe(),Te()};return y.useEffect(function(){Ce()},[ee,X]),(0,t.jsxs)(c._z,{breadcrumb:void 0,title:(0,t.jsx)(L.Z,{type:"link",onClick:function(){return v.history.push("/ticket")},size:"large",children:(0,t.jsxs)(B.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,t.jsx)(p.Z,{onClick:function(){return v.history.push("/ticket")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(I.Z.Item,{children:"Ticket"}),(0,t.jsx)(I.Z.Item,{href:"#",children:"Add Ticket"})]}),(0,t.jsx)(j.Z.Title,{level:5,children:"Add Ticket"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},childrenContentStyle:{minHeight:"70vh"},children:[(0,t.jsxs)(s.ql,{children:[(0,t.jsx)("meta",{charSet:"utf-8"}),(0,t.jsx)("title",{children:"AAT IoT Platform | User"}),(0,t.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,t.jsx)(E.Z,{style:{paddingTop:0,marginTop:0}}),(0,t.jsx)(n.Z,{spinning:te,children:(0,t.jsx)(l.Z,{form:re,name:"add-area",onFinish:Oe,layout:"vertical",style:{margin:"0px auto",width:700},children:(0,t.jsxs)(D.Z,{gutter:[16,16],children:[(0,t.jsxs)(T.Z,{span:12,children:[(0,t.jsx)(l.Z.Item,{label:"Select Area",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",children:(0,t.jsx)(_.U,{onChange:function(M){console.log(M,"area id")}})}),(0,t.jsx)(l.Z.Item,{label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",children:(0,t.jsx)($.w,{onChange:function(M){console.log("tenant id",M),he(M)}})}),(0,t.jsx)(l.Z.Item,{label:"Technician",name:"technician",rules:[{required:!0,message:"Please select Techinician!"}],requiredMark:"optional",children:(0,t.jsx)(i.Z,{placeholder:"Technician",className:"not-rounded",children:se.map(function(f){return(0,t.jsx)(i.Z.Option,{value:f.id,children:f.name},f.id)})})})]}),(0,t.jsxs)(T.Z,{span:12,children:[(0,t.jsx)(l.Z.Item,{label:"Type Ticket",name:"type_ticket",rules:[{required:!0,message:"Please input Type Ticket!"}],requiredMark:"optional",children:(0,t.jsx)(i.Z,{className:"not-rounded",options:[{value:"installation",label:"Installation"},{value:"maintenance",label:"Maintenance"}],placeholder:"Type Ticket",onChange:function(M){return ce(M)}})}),(0,t.jsx)(l.Z.Item,{label:"Device Type",name:"type_id",rules:[{required:!0,message:"Please selet Device Type!"}],requiredMark:"optional",children:(0,t.jsx)(i.Z,{placeholder:"Device Type",onChange:function(M){console.log(M,"device type"),ve(M)},className:"not-rounded",children:ie.map(function(f){return(0,t.jsx)(i.Z.Option,{value:f.type_id,children:f.name},f.type_id)})})}),_e!="installation"&&(0,t.jsx)(l.Z.Item,{label:"DevEui",name:"deveui",rules:[{required:!0,message:"Please selet DevEui!"}],requiredMark:"optional",children:(0,t.jsx)(i.Z,{placeholder:"DevEui",className:"not-rounded",children:pe.map(function(f){return(0,t.jsx)(i.Z.Option,{value:f.devEui,children:f.deveui},f.id)})})})]}),(0,t.jsx)(T.Z,{span:24,children:(0,t.jsx)(l.Z.Item,{label:"Note",name:"note",rules:[{required:!1,message:"Please input note!"}],requiredMark:"optional",children:(0,t.jsx)(o.Z.TextArea,{placeholder:"Message",rows:3})})}),(0,t.jsx)(T.Z,{span:24,children:(0,t.jsx)(E.Z,{style:{padding:0,margin:0}})}),(0,t.jsx)(T.Z,{span:24,children:(0,t.jsx)("div",{style:{textAlign:"right"},children:(0,t.jsxs)(B.Z,{children:[(0,t.jsx)(l.Z.Item,{children:(0,t.jsx)(L.Z,{type:"default",htmlType:"button",onClick:function(){return v.history.push("/ticket")},children:"Cancel"})}),(0,t.jsx)(l.Z.Item,{children:(0,t.jsx)(L.Z,{type:"primary",htmlType:"submit",children:"Submit"})})]})})})]})})})]})};b.default=x},95971:function(w,b,r){r.d(b,{GU:function(){return I},cH:function(){return v},mZ:function(){return L},rR:function(){return P}});var R=r(97983),u=r.n(R),U=r(11281),h=r.n(U),Z=r(40794),m=r.n(Z),_=r(12461),$=r(9669),p=r.n($),c=r(9212);function v(j){return l.apply(this,arguments)}function l(){return l=m()(u()().mark(function j(E){var n,D;return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,c.Z.get("/tenant",h()({method:"GET"},E||{}));case 3:return n=i.sent,D=n.data,i.abrupt("return",{data:D.data,error:!1,message:"Success Get",responseCode:D.responseCode});case 8:if(i.prev=8,i.t0=i.catch(0),!p().isAxiosError(i.t0)){i.next=16;break}return console.log("error message: ",i.t0.message),_.ZP.error(i.t0.message),i.abrupt("return",{data:null,error:!0,message:i.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",i.t0),_.ZP.error("An unexpected error occurred"),i.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return i.stop()}},j,null,[[0,8]])})),l.apply(this,arguments)}var P=function(){var j=m()(u()().mark(function E(n){var D,T,i;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.Z.put("/tenant/".concat(n.id),{image:n.image,area_id:n.area_id,name:n.name,pic_name:n.pic_name,address:n.address,latitude:n.latitude,longitude:n.longitude,member_id:n.member_id,type:n.type,area_name:n.area_name,phone:n.phone,email:n.email,username:n.username,password:n.password,nama_unit:n.nama_unit,kode_unit:n.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return D=a.sent,T=D.data,a.abrupt("return",h()(h()({},T),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!p().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),i=a.t0.response,i.data.message?_.ZP.error(i.data.message):_.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),_.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}(),L=function(){var j=m()(u()().mark(function E(n){var D,T,i;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.Z.post("/tenant",{image:n.image,area_id:n.area_id,name:n.name,pic_name:n.pic_name,address:n.address,latitude:n.latitude,longitude:n.longitude,type:n.type,area_name:n.area_name,phone:n.phone,email:n.email,username:n.username,password:n.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return D=a.sent,T=D.data,a.abrupt("return",h()(h()({},T),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!p().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),i=a.t0.response,i.data.message?_.ZP.error(i.data.message):_.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),_.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}(),B=null,I=function(){var j=m()(u()().mark(function E(n){var D,T;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,c.Z.get("/tenant/detail/".concat(n),{method:"GET"});case 3:return D=o.sent,T=D.data,o.abrupt("return",{data:T.data,error:!1,message:"Success Get",responseCode:T.responseCode});case 8:if(o.prev=8,o.t0=o.catch(0),!p().isAxiosError(o.t0)){o.next=16;break}return console.log("error message: ",o.t0.message),_.ZP.error(o.t0.message),o.abrupt("return",{data:null,error:!0,message:o.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",o.t0),_.ZP.error("An unexpected error occurred"),o.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return o.stop()}},E,null,[[0,8]])}));return function(n){return j.apply(this,arguments)}}()},13174:function(w,b,r){r.d(b,{Ij:function(){return D},NY:function(){return B},Os:function(){return j},_v:function(){return v},kt:function(){return P},zz:function(){return T}});var R=r(97983),u=r.n(R),U=r(11281),h=r.n(U),Z=r(40794),m=r.n(Z),_=r(12461),$=r(9669),p=r.n($),c=r(9212);function v(o){return l.apply(this,arguments)}function l(){return l=m()(u()().mark(function o(a){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/device",h()({method:"GET"},a||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!p().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),l.apply(this,arguments)}function P(o){return L.apply(this,arguments)}function L(){return L=m()(u()().mark(function o(a){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/ticket/type/node/list",h()({method:"GET"},a||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!p().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),L.apply(this,arguments)}function B(o){return I.apply(this,arguments)}function I(){return I=m()(u()().mark(function o(a){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/ticket/iki/all",h()({method:"GET"},a||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!p().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),I.apply(this,arguments)}function j(o){return E.apply(this,arguments)}function E(){return E=m()(u()().mark(function o(a){var g,d;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.get("/user/bita/list?role=teknisi",h()({method:"GET"},a||{}));case 3:return g=e.sent,d=g.data,e.abrupt("return",{data:d.data,error:!1,message:"Success Get",responseCode:d.responseCode});case 8:if(e.prev=8,e.t0=e.catch(0),!p().isAxiosError(e.t0)){e.next=16;break}return console.log("error message: ",e.t0.message),_.ZP.error(e.t0.message),e.abrupt("return",{data:null,error:!0,message:e.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",e.t0),_.ZP.error("An unexpected error occurred"),e.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return e.stop()}},o,null,[[0,8]])})),E.apply(this,arguments)}var n=null,D=function(){var o=m()(u()().mark(function a(g){var d,A,e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.Z.put("/ticket/update/teknisi/"+g.no_ticket,{technician:g.technician});case 3:return d=s.sent,A=d.data,s.abrupt("return",h()(h()({},A),{},{status:"ok",error:!1}));case 8:if(s.prev=8,s.t0=s.catch(0),!p().isAxiosError(s.t0)){s.next=17;break}return console.log("error message: ",s.t0.message),e=s.t0.response,e.data.message?_.ZP.error(e.data.message):_.ZP.error(s.t0.message),s.abrupt("return",{responseCode:400,message:s.t0.message,error:!0});case 17:return console.log("unexpected error: ",s.t0),_.ZP.error("An unexpected error occured"),s.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return s.stop()}},a,null,[[0,8]])}));return function(g){return o.apply(this,arguments)}}(),T=function(){var o=m()(u()().mark(function a(g){var d,A,e;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c.Z.put("/ticket/iki/cancel/"+g.id);case 3:return d=s.sent,A=d.data,s.abrupt("return",h()(h()({},A),{},{status:"ok",error:!1}));case 8:if(s.prev=8,s.t0=s.catch(0),!p().isAxiosError(s.t0)){s.next=17;break}return console.log("error message: ",s.t0.message),e=s.t0.response,e.data.message?_.ZP.error(e.data.message):_.ZP.error(s.t0.message),s.abrupt("return",{responseCode:400,message:s.t0.message,error:!0});case 17:return console.log("unexpected error: ",s.t0),_.ZP.error("An unexpected error occured"),s.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return s.stop()}},a,null,[[0,8]])}));return function(g){return o.apply(this,arguments)}}(),i=null},27049:function(w,b,r){var R=r(87462),u=r(4942),U=r(94184),h=r.n(U),Z=r(67294),m=r(53124),_=function(p,c){var v={};for(var l in p)Object.prototype.hasOwnProperty.call(p,l)&&c.indexOf(l)<0&&(v[l]=p[l]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,l=Object.getOwnPropertySymbols(p);P<l.length;P++)c.indexOf(l[P])<0&&Object.prototype.propertyIsEnumerable.call(p,l[P])&&(v[l[P]]=p[l[P]]);return v},$=function(c){var v,l=Z.useContext(m.E_),P=l.getPrefixCls,L=l.direction,B=c.prefixCls,I=c.type,j=I===void 0?"horizontal":I,E=c.orientation,n=E===void 0?"center":E,D=c.orientationMargin,T=c.className,i=c.children,o=c.dashed,a=c.plain,g=_(c,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),d=P("divider",B),A=n.length>0?"-".concat(n):n,e=!!i,y=n==="left"&&D!=null,s=n==="right"&&D!=null,N=h()(d,"".concat(d,"-").concat(j),(v={},(0,u.Z)(v,"".concat(d,"-with-text"),e),(0,u.Z)(v,"".concat(d,"-with-text").concat(A),e),(0,u.Z)(v,"".concat(d,"-dashed"),!!o),(0,u.Z)(v,"".concat(d,"-plain"),!!a),(0,u.Z)(v,"".concat(d,"-rtl"),L==="rtl"),(0,u.Z)(v,"".concat(d,"-no-default-orientation-margin-left"),y),(0,u.Z)(v,"".concat(d,"-no-default-orientation-margin-right"),s),v),T),t=(0,R.Z)((0,R.Z)({},y&&{marginLeft:D}),s&&{marginRight:D});return Z.createElement("div",(0,R.Z)({className:N},g,{role:"separator"}),i&&j!=="vertical"&&Z.createElement("span",{className:"".concat(d,"-inner-text"),style:t},i))};b.Z=$}}]);
