"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8282],{82826:function(G,T,r){r.d(T,{Z:function(){return f}});var A=r(1413),i=r(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},P=R,C=r(84089),E=function(c,d){return i.createElement(C.Z,(0,A.Z)((0,A.Z)({},c),{},{ref:d,icon:P}))};E.displayName="ArrowLeftOutlined";var f=i.forwardRef(E)},98435:function(G,T,r){r.d(T,{U:function(){return j}});var A=r(97983),i=r.n(A),R=r(40794),P=r.n(R),C=r(12741),E=r.n(C),f=r(4745),x=r(40038),c=r(67294),d=r(85893),j=function(u){var v=u.disabled,L=u.onChange,U=u.value,B=u.style,h=u.type,l=h===void 0?"not-rounded":h,t=u.useAll,m=u.defaultArea0,p=m===void 0?!1:m,n=(0,c.useState)([]),s=E()(n,2),o=s[0],a=s[1],F=c.useState(!1),e=E()(F,2),S=e[0],W=e[1],N=function(){var Z=P()(i()().mark(function $(){var b;return i()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return W(!0),K.next=3,(0,f.bg)({});case 3:b=K.sent,W(!1),b.error||(a(b.data),p&&b.data.length>0&&L(b.data[0].id));case 6:case"end":return K.stop()}},$)}));return function(){return Z.apply(this,arguments)}}();return c.useEffect(function(){N()},[]),(0,d.jsxs)(x.Z,{value:U,placeholder:"Area Name",loading:S,onChange:L,className:l,style:B,disabled:v,children:[t&&(0,d.jsx)(x.Z.Option,{value:0,children:"All Area"},0),o.map(function(Z){return(0,d.jsx)(x.Z.Option,{value:Z.id,children:Z.area_name},Z.id)})]})}},11555:function(G,T,r){r.r(T);var A=r(97983),i=r.n(A),R=r(40794),P=r.n(R),C=r(12741),E=r.n(C),f=r(5200),x=r.n(f),c=r(98435),d=r(87806),j=r(82826),g=r(38402),u=r(30028),v=r(80737),L=r(14538),U=r(71577),B=r(26713),h=r(58492),l=r(21802),t=r(27049),m=r(11382),p=r(71230),n=r(15746),s=r(69677),o=r(40038),a=r(67294),F=r(64593),e=r(85893),S=function(Z){return new Promise(function($,b){var y=new FileReader;y.readAsDataURL(Z),y.onload=function(){return $(y.result)},y.onerror=function(K){return b(K)}})},W=function(Z){x()(Z);var $=v.Z.useForm(),b=E()($,1),y=b[0],K=(0,u.useLocation)(),M=K.state,q=a.useState([]),z=E()(q,2),de=z[0],V=z[1],ee=(0,a.useState)(!1),H=E()(ee,2),ue=H[0],re=H[1],ae=a.useState(!1),J=E()(ae,2),ne=J[0],Q=J[1],se=(0,a.useState)(""),X=E()(se,2),_e=X[0],te=X[1],le=(0,a.useState)(""),Y=E()(le,2),me=Y[0],oe=Y[1],ce=function(O){var _=O.fileList;return V(_)},pe=function(){var D=P()(i()().mark(function O(_){return i()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!_.url&&!_.preview)){I.next=4;break}return I.next=3,S(_.originFileObj);case 3:_.preview=I.sent;case 4:te(_.url||_.preview),re(!0),oe(_.name||_.url.substring(_.url.lastIndexOf("/")+1));case 7:case"end":return I.stop()}},O)}));return function(_){return D.apply(this,arguments)}}();console.log(M.dataEdit),a.useEffect(function(){if(M.dataEdit){var D,O;y.setFields([{name:"name",value:M.dataEdit.name},{name:"email",value:M.dataEdit.email},{name:"email",value:M.dataEdit.email},{name:"phone",value:M.dataEdit.phone},{name:"role",value:M.dataEdit.role},{name:"area_id",value:(D=M.dataEdit)===null||D===void 0||(O=D.Nebula_Area)===null||O===void 0?void 0:O.id},{name:"address",value:M.dataEdit.address}]),V([{uid:"1",name:"default logo",status:"done",url:M.dataEdit.photo}])}else u.history.push("/users/company")},[M.dataEdit]);var ie=function(){var D=P()(i()().mark(function O(_){var w;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return console.log(_),Q(!0),k.next=4,(0,d.L)({name:_.name,phone:_.phone,email:_.email,id:M.dataEdit.id,password:_.newPassword});case 4:w=k.sent,Q(!1),w.error?L.Z.error({content:w.message}):L.Z.success({content:w.message,onOk:function(){u.history.back()}});case 7:case"end":return k.stop()}},O)}));return function(_){return D.apply(this,arguments)}}();return(0,e.jsxs)(g._z,{breadcrumb:void 0,title:(0,e.jsx)(U.Z,{type:"link",onClick:function(){return u.history.push("/users")},size:"large",children:(0,e.jsxs)(B.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(j.Z,{onClick:function(){return u.history.push("/users")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(h.Z.Item,{children:"User Management"}),(0,e.jsx)(h.Z.Item,{href:"#",children:"Edit User"})]}),(0,e.jsx)(l.Z.Title,{level:5,children:"Edit User"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(F.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"BITA IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"/Sinar-mas.png",type:"image/x-icon"})]}),(0,e.jsx)(t.Z,{style:{paddingTop:0,marginTop:0}}),(0,e.jsx)(m.Z,{spinning:ne,children:(0,e.jsx)(v.Z,{form:y,name:"add-area",onFinish:ie,style:{width:500,margin:"0px auto",paddingTop:20},children:(0,e.jsxs)(p.Z,{gutter:16,children:[(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Full Name"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"name",rules:[{required:!0,message:"Please input full name!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Full Name"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Email"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"email",rules:[{required:!0,message:"Please input email!",type:"email"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Email",disabled:!0})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Phone"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"phone",rules:[{required:!0,message:"Please input phone!"},{pattern:/^(\+62|62|0)8[1-9][0-9]{6,13}$/g,message:"Phone not valid!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Phone"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Role"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"role",rules:[{required:!0,message:"Please select role!"}],requiredMark:"optional",children:(0,e.jsx)(o.Z,{placeholder:"Select Role",className:"not-rounded",disabled:!0,options:[{label:"Admin",value:"admin"},{label:"Area",value:"area"}],onChange:function(){y.setFieldsValue({area_id:void 0})}})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,shouldUpdate:function(O,_){return O.role_id!==_.role_id},children:function(){return y.getFieldValue("role")=="area"?(0,e.jsx)(l.Z,{children:"Area"}):null}})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,shouldUpdate:function(O,_){return O.role_id!==_.role_id},children:function(){return y.getFieldValue("role")=="area"?(0,e.jsx)(v.Z.Item,{name:"area_id",rules:[{required:!0,message:"Please input Area!"}],requiredMark:"optional",children:(0,e.jsx)(c.U,{disabled:!0})}):null}})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Address"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"address",requiredMark:"optional",children:(0,e.jsx)(s.Z.TextArea,{placeholder:"Address"})})}),(0,e.jsx)(n.Z,{span:24,children:(0,e.jsx)(t.Z,{})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"New Password"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please input password!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z.Password,{placeholder:"Input Password"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(l.Z,{children:"Retype Password"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{name:"retypePassword",requiredMark:"optional",rules:[{required:!0,message:"Please input password!"},function(D){var O=D.getFieldValue;return{validator:function(w,I){return!I||O("newPassword")===I?Promise.resolve():Promise.reject(new Error("Passwords not match!"))}}}],children:(0,e.jsx)(s.Z.Password,{placeholder:"Retype Password"})})}),(0,e.jsx)(n.Z,{offset:16,children:(0,e.jsxs)(B.Z,{children:[(0,e.jsx)(v.Z.Item,{children:(0,e.jsx)(U.Z,{type:"primary",htmlType:"submit",children:"Save"})}),(0,e.jsx)(v.Z.Item,{children:(0,e.jsx)(U.Z,{type:"default",htmlType:"button",onClick:function(){return u.history.push("/users")},children:"Cancel"})})]})})]})})})]})};T.default=W},4745:function(G,T,r){r.d(T,{OO:function(){return v},Ug:function(){return B},_J:function(){return L},bg:function(){return j},yz:function(){return u}});var A=r(11281),i=r.n(A),R=r(97983),P=r.n(R),C=r(40794),E=r.n(C),f=r(12461),x=r(9669),c=r.n(x),d=r(9212);function j(h){return g.apply(this,arguments)}function g(){return g=E()(P()().mark(function h(l){var t,m;return P()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.Z.get("/area",i()({method:"GET"},l||{}));case 3:return t=n.sent,m=t.data,n.abrupt("return",{data:m.data,error:!1,message:"Success Get",responseCode:m.responseCode});case 8:if(n.prev=8,n.t0=n.catch(0),!c().isAxiosError(n.t0)){n.next=16;break}return console.log("error message: ",n.t0.message),f.ZP.error(n.t0.message),n.abrupt("return",{data:null,error:!0,message:n.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",n.t0),f.ZP.error("An unexpected error occurred"),n.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return n.stop()}},h,null,[[0,8]])})),g.apply(this,arguments)}var u=function(){var h=E()(P()().mark(function l(t){var m,p;return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d.Z.get("/area/detail/".concat(t),{method:"GET"});case 3:return m=s.sent,p=m.data,s.abrupt("return",{data:p.data,error:!1,message:"Success Get",responseCode:p.responseCode});case 8:if(s.prev=8,s.t0=s.catch(0),!c().isAxiosError(s.t0)){s.next=16;break}return console.log("error message: ",s.t0.message),f.ZP.error(s.t0.message),s.abrupt("return",{data:null,error:!0,message:s.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",s.t0),f.ZP.error("An unexpected error occurred"),s.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return s.stop()}},l,null,[[0,8]])}));return function(t){return h.apply(this,arguments)}}(),v=function(){var h=E()(P()().mark(function l(t){var m,p,n;return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,d.Z.post("/area",{company_name:t.company_name,area_name:t.area_name,pic_name:t.pic_name,billing_address:t.billing_address,image:t.image,phone:t.phone,email_pic:t.email_pic,email_pic_admin:t.email_pic_admin,address:t.address,latitude:t.latitude,longitude:t.longitude},{headers:{"Content-Type":"multipart/form-data"}});case 3:return m=o.sent,p=m.data,o.abrupt("return",i()(i()({},p),{},{status:"ok",error:!1}));case 8:if(o.prev=8,o.t0=o.catch(0),!c().isAxiosError(o.t0)){o.next=17;break}return console.log("error message: ",o.t0.message),n=o.t0.response,n.data.message?f.ZP.error(n.data.message):f.ZP.error(o.t0.message),o.abrupt("return",{responseCode:400,message:o.t0.message,error:!0});case 17:return console.log("unexpected error: ",o.t0),f.ZP.error("An unexpected error occured"),o.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return o.stop()}},l,null,[[0,8]])}));return function(t){return h.apply(this,arguments)}}(),L=function(){var h=E()(P()().mark(function l(t,m){var p,n,s;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.post("/area/setting/"+m,i()({},t));case 3:return p=a.sent,n=p.data,a.abrupt("return",i()(i()({},n),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!c().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),s=a.t0.response,s.data.message?f.ZP.error(s.data.message):f.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),f.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},l,null,[[0,8]])}));return function(t,m){return h.apply(this,arguments)}}(),U=null,B=function(){var h=E()(P()().mark(function l(t,m){var p,n,s;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d.Z.put("/area/"+m,t);case 3:return p=a.sent,n=p.data,a.abrupt("return",i()(i()({},n),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!c().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),s=a.t0.response,s.data.message?f.ZP.error(s.data.message):f.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),f.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},l,null,[[0,8]])}));return function(t,m){return h.apply(this,arguments)}}()},27049:function(G,T,r){var A=r(87462),i=r(4942),R=r(94184),P=r.n(R),C=r(67294),E=r(53124),f=function(c,d){var j={};for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&d.indexOf(g)<0&&(j[g]=c[g]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,g=Object.getOwnPropertySymbols(c);u<g.length;u++)d.indexOf(g[u])<0&&Object.prototype.propertyIsEnumerable.call(c,g[u])&&(j[g[u]]=c[g[u]]);return j},x=function(d){var j,g=C.useContext(E.E_),u=g.getPrefixCls,v=g.direction,L=d.prefixCls,U=d.type,B=U===void 0?"horizontal":U,h=d.orientation,l=h===void 0?"center":h,t=d.orientationMargin,m=d.className,p=d.children,n=d.dashed,s=d.plain,o=f(d,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),a=u("divider",L),F=l.length>0?"-".concat(l):l,e=!!p,S=l==="left"&&t!=null,W=l==="right"&&t!=null,N=P()(a,"".concat(a,"-").concat(B),(j={},(0,i.Z)(j,"".concat(a,"-with-text"),e),(0,i.Z)(j,"".concat(a,"-with-text").concat(F),e),(0,i.Z)(j,"".concat(a,"-dashed"),!!n),(0,i.Z)(j,"".concat(a,"-plain"),!!s),(0,i.Z)(j,"".concat(a,"-rtl"),v==="rtl"),(0,i.Z)(j,"".concat(a,"-no-default-orientation-margin-left"),S),(0,i.Z)(j,"".concat(a,"-no-default-orientation-margin-right"),W),j),m),Z=(0,A.Z)((0,A.Z)({},S&&{marginLeft:t}),W&&{marginRight:t});return C.createElement("div",(0,A.Z)({className:N},o,{role:"separator"}),p&&B!=="vertical"&&C.createElement("span",{className:"".concat(a,"-inner-text"),style:Z},p))};T.Z=x}}]);
