"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7315],{78491:function(et,k,n){n.r(k),n.d(k,{default:function(){return Le}});var de=n(12741),c=n.n(de),ue=n(24969),U=n(38402),F=n(30028),ve=n(71230),A=n(15746),Y=n(21802),g=n(71577),fe=n(30381),D=n.n(fe),tt=n(29218),l=n(67294),V=n(64593),he=n(11281),f=n.n(he),xe=n(97983),y=n.n(xe),me=n(40794),O=n.n(me),je=n(45428),p=n(38405),ge=n(78120),ye=n(5077),H=n(28530),pe=n(69408),Se=n(91321),u=n(62816),K=n(23349),Ce=n(69677),h=n(26713),W=n(14538),B=n(20550),De=n(13013),I=n(66516),Ze=n(18537),Re=n(42054),$e=n.n(Re),e=n(85893),Ie=(0,Se.Z)({scriptUrl:"//at.alicdn.com/t/c/font_3875475_w5k22iyjel.js"}),d=K.Z.Column;D().locale("en");var Te=function(T){var Z=T.isFocused,w=T.counter,Q=l.useState([]),R=c()(Q,2),X=R[0],Oe=R[1],we=l.useState(!1),J=c()(we,2),Me=J[0],S=J[1],Pe=l.useState(""),b=c()(Pe,2),ze=b[0],M=b[1],Ne=l.useState(""),q=c()(Ne,2),ke=q[0],_=q[1],ee=l.useRef(null),Ue=l.useState([]),te=c()(Ue,2),nt=te[0],Ae=te[1],$=Ze.Z.parse(window.location.search),Ye=l.useState(!1),ne=c()(Ye,2),Ve=ne[0],P=ne[1],He=l.useState({}),ae=c()(He,2),m=ae[0],z=ae[1],Ke=l.useState([]),re=c()(Ke,2),We=re[0],Be=re[1],Ge=l.useState(!1),se=c()(Ge,2),Qe=se[0],E=se[1],Xe=l.useState(!1),ie=c()(Xe,2),Je=ie[0],oe=ie[1];console.log($,"query parsed");var N=function(){var i=O()(y()().mark(function t(){var a;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return S(!0),s.next=3,(0,H._v)({params:$});case 3:a=s.sent,S(!1),a.error||(a.data.map(function(o,v){a.data[v].area_name=o.Nebula_Area.area_name,a.data[v].tenant_name=o.Nebula_Tenant.name}),Oe(a.data),Ae(a.data));case 6:case"end":return s.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),be=function(){var i=O()(y()().mark(function t(){var a;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return S(!0),s.next=3,(0,H.We)({},$.node_type);case 3:a=s.sent,S(!1),a.error||Be(a.data);case 6:case"end":return s.stop()}},t)}));return function(){return i.apply(this,arguments)}}();l.useEffect(function(){Z?(N(),be()):F.history.push("/device/Node")},[Z,w]);var le=function(t,a,r){a(),M(t[0]),_(r)},qe=function(t){t(),M("")},j=function(t){return{filterDropdown:function(r){var s=r.setSelectedKeys,o=r.selectedKeys,v=r.confirm,x=r.clearFilters,ce=r.close;return(0,e.jsxs)("div",{style:{padding:8},onKeyDown:function(L){return L.stopPropagation()},children:[(0,e.jsx)(Ce.Z,{ref:ee,placeholder:"Search ".concat(t),value:o[0],onChange:function(L){return s(L.target.value?[L.target.value]:[])},onPressEnter:function(){return le(o,v,t)},style:{marginBottom:8,display:"block"}}),(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(g.Z,{type:"primary",onClick:function(){return le(o,v,t)},icon:(0,e.jsx)(u.l62,{}),size:"small",style:{width:90},children:"Search"}),(0,e.jsx)(g.Z,{onClick:function(){return x&&qe(x)},size:"small",style:{width:90},children:"Reset"}),(0,e.jsx)(g.Z,{type:"link",size:"small",onClick:function(){v({closeDropdown:!1}),M(o[0]),_(t)},children:"Filter"}),(0,e.jsx)(g.Z,{type:"link",size:"small",onClick:function(){ce()},children:"close"})]})]})},filterIcon:function(r){return(0,e.jsx)(u.l62,{style:{color:r?"#1890ff":void 0}})},onFilter:function(r,s){var o;return((o=s[t])!==null&&o!==void 0?o:"").toString().toLowerCase().includes(r.toLowerCase())},onFilterDropdownOpenChange:function(r){r&&setTimeout(function(){var s;return(s=ee.current)===null||s===void 0?void 0:s.select()},100)},render:function(r){return ke===t?(0,e.jsx)($e(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[ze],autoEscape:!0,textToHighlight:r?r.toString():""}):r}}},_e=function(t){W.Z.confirm({title:"Do you Want to unsign these node?",icon:(0,e.jsx)(u.SYL,{}),content:"Device Eui: "+t.devEui,onOk:function(){var a=O()(y()().mark(function s(){var o;return y()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return S(!0),x.next=3,(0,pe.TZ)({devEui:t.devEui,node_id:t.id});case 3:o=x.sent,S(!1),o.error||W.Z.success({content:"Success unsigned node "+t.devEui,onOk:function(){N()}});case 6:case"end":return x.stop()}},s)}));function r(){return a.apply(this,arguments)}return r}(),onCancel:function(){console.log("Cancel")}})};return(0,e.jsxs)(U._z,{childrenContentStyle:{minHeight:"70vh"},title:" ",extra:void 0,children:[(0,e.jsxs)(V.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | Device"}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsx)(ye.X,{device_id:m.id,open:Ve,onCancel:function(){return P(!1)},onOk:function(){P(!1)},typeName:$.node_type_name,devEui:m.devEui,desc:m.description}),(0,e.jsx)(je.Y,{devEui:m.devEui,open:Qe,interval:m.interval,onCancel:function(){E(!1)},onOk:function(){E(!1),N()}}),(0,e.jsx)(ge.T,{devEui:m.devEui,dataModal:m,open:Je,onCancel:function(){oe(!1)},onOk:function(){oe(!1)},typeName:$.node_type_name}),(0,e.jsxs)(K.Z,{dataSource:X,loading:Me,scroll:{x:1300},children:[(0,e.jsx)(d,f()(f()({},j("tenant_name")),{},{width:200,title:"Tenant",dataIndex:"tenant_name",sorter:function(t,a){return t.tenant_name.length-a.tenant_name.length}})),(0,e.jsx)(d,f()({width:200,title:"Device Type",dataIndex:"device_type"},j("device_type")),"device_type"),(0,e.jsx)(d,f()({width:200,title:"Dev Eui",dataIndex:"devEui"},j("devEui")),"devEui"),(0,e.jsx)(d,f()({width:200,title:"Meter Id",dataIndex:"meter_id"},j("meter_id")),"meter_id"),(0,e.jsx)(d,f()({width:200,title:"Totalizer",dataIndex:"totalizer"},j("totalizer")),"totalizer"),(0,e.jsx)(d,{width:200,title:"Last Update",dataIndex:"lastUpdate",render:function(t){if(t)return D()(t).format("MMM DD YYYY HH:mm:ss")},sorter:function(t,a){return D()(t.lastUpdate).unix()-D()(a.lastUpdate).unix()}},"lastUpdate"),(0,e.jsx)(d,f()(f()({width:200,title:"Status",dataIndex:"status"},j("status")),{},{sorter:function(t,a){return t.status.length-a.status.length},render:function(t){return t==="ONLINE"?(0,e.jsx)(B.Z,{color:"green",children:t}):(0,e.jsx)(B.Z,{color:"red",children:t})}}),"status"),(0,e.jsx)(d,{width:130,title:"Interval",dataIndex:"interval",sorter:function(t,a){return t.interval-a.interval},render:function(t){return(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(u.Wyb,{style:{color:"gray"}}),(0,e.jsxs)(Y.Z,{children:[t," min"]})]})}},"interval"),(0,e.jsx)(d,{width:150,title:"Battery Level",dataIndex:"battery",sorter:function(t,a){return t.battery-a.battery},filters:[{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.QP,{}),"50 - 100"]}),value:"50-100"},{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.xT,{}),"20 - 50"]}),value:"20-50"},{text:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.t3,{style:{marginLeft:"3px"}})," ","0 - 20"]}),value:"0-20"}],onFilter:function(t,a){return t==="50-100"?a.battery>50:t==="20-50"?a.battery>20&&a.battery<=50:t==="0-20"?a.battery<=20:!0},render:function(t){return(0,e.jsx)(e.Fragment,{children:t>20&&t<=50?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.xT,{}),t]}):t<=20?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.t3,{}),t]}):t>50?(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(p.QP,{}),t]}):null})}},"battery"),(0,e.jsx)(d,f()({width:200,title:"Description",dataIndex:"description"},j("description")),"description"),(0,e.jsx)(d,{dataIndex:"id",width:80,title:"Action",fixed:"right",render:function(t,a){return(0,e.jsx)(De.Z,{trigger:["click"],overlay:(0,e.jsxs)(I.Z,{children:[(0,e.jsxs)(I.Z.Item,{onClick:function(){P(!0),z(a)},children:[(0,e.jsx)(u.lY0,{}),"  ","View Log"]},"1"),We.map(function(r){var s=(0,e.jsx)(u.pW8,{}),o=function(){E(!0),z(a)};switch(r){case"interval":s=(0,e.jsx)(u.Wyb,{}),o=function(){E(!0),z(a)};break;case"meter reading":s=(0,e.jsx)(u.dU4,{});break;case"valve":s=(0,e.jsx)(Ie,{type:"icon-valve"});break;default:break}return(0,e.jsxs)(I.Z.Item,{onClick:function(){o()},style:{textTransform:"capitalize"},children:[s," ",r]},r)}),(0,e.jsxs)(I.Z.Item,{onClick:function(){_e(a)},style:{color:"red"},children:[(0,e.jsx)(u.E0z,{})," Unsign"]},"3")]}),placement:"bottomRight",children:(0,e.jsx)(g.Z,{type:"text",children:(0,e.jsx)(u.xjY,{})})})}},"id")]})]})},G=Te;D().locale("en");var Ee=function(){var T=l.useState(1),Z=c()(T,2),w=Z[0],Q=Z[1],R=(0,F.useParams)();return R.sub=="list"?(0,e.jsx)(G,{isFocused:!0,counter:w}):(0,e.jsxs)(U._z,{title:" ",style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},childrenContentStyle:{minHeight:"75vh"},children:[(0,e.jsxs)(V.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | Device"}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsxs)(ve.Z,{gutter:[16,16],children:[(0,e.jsxs)(A.Z,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingBottom:"18px"},children:[(0,e.jsx)(Y.Z.Title,{level:4,children:"Device Management"}),R.id?(0,e.jsxs)(g.Z,{style:{},onClick:function(){F.history.push("/device/create")},children:[(0,e.jsx)(ue.Z,{})," Add Device"]}):null]}),(0,e.jsx)(A.Z,{span:24,children:(0,e.jsx)(G,{isFocused:!0,counter:0})})]})]})},Le=Ee}}]);
