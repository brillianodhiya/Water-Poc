"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6251],{75539:function(J,A,n){n.d(A,{DT:function(){return Z},et:function(){return b},qi:function(){return M}});var U=n(67294),Z=function(c){c=parseFloat(c),isNaN(c)&&(c=0);var x=new Intl.NumberFormat("id-ID").format(c);return x.split(",").length>1?x.split(",")[1].length<3?x.split(",")[0]+","+(x.split(",")[1]+"000").slice(0,3):x:x+",000"},M=function(c){return new Intl.NumberFormat("id-ID").format(c)},b=function(c){return c==null?void 0:c.toLocaleString("id-ID",{style:"currency",currency:"IDR"})}},63694:function(J,A,n){n.r(A),n.d(A,{default:function(){return pe}});var U=n(12741),Z=n.n(U),M=n(5200),b=n.n(M),S=n(97983),c=n.n(S),x=n(40794),R=n.n(x),z=n(38402),O=n(23349),_=n(71577),T=n(26713),$=n(58492),t=n(21802),P=n(11382),D=n(27049),h=n(71230),a=n(15746),d=n(20550),v=n(24093),ae=n(30381),H=n.n(ae),Pe=n(29218),C=n(67294),le=n(84730),G=n(30028),ie=n(82826),se=n(58638),oe=n(41231),e=n(85893),de=function(p){var l=p.data,m=function(y){return y==null?void 0:y.toLocaleString("id-ID",{style:"currency",currency:"IDR"})};return(0,e.jsxs)(h.Z,{gutter:[16,16],style:{maxWidth:700,float:"right"},children:[(0,e.jsx)(a.Z,{span:18,children:(0,e.jsx)(t.Z.Title,{level:4,children:"Sub Total"})}),(0,e.jsx)(a.Z,{span:6,children:(0,e.jsx)(t.Z.Title,{level:4,style:{textAlign:"right"},children:m(l==null?void 0:l.sub_total)})}),(0,e.jsx)(a.Z,{span:8,children:(0,e.jsx)(t.Z,{children:"PPN"})}),(0,e.jsx)(a.Z,{span:10,children:(0,e.jsxs)(t.Z,{children:[l==null?void 0:l.ppn,"%"]})}),(0,e.jsx)(a.Z,{span:6,style:{textAlign:"right"},children:(0,e.jsxs)(t.Z,{children:[m(l==null?void 0:l.ppn_value)," "]})}),(0,e.jsx)(a.Z,{span:8,children:(0,e.jsx)(t.Z,{children:"Materai"})}),(0,e.jsx)(a.Z,{span:10,children:(0,e.jsx)(t.Z,{children:m(l==null?void 0:l.materai)})}),(0,e.jsx)(a.Z,{span:6,children:(0,e.jsx)(t.Z,{style:{textAlign:"right"},children:m(l==null?void 0:l.materai)})}),(0,e.jsx)(a.Z,{span:18,children:(0,e.jsx)(t.Z,{children:"Biaya Transaksi"})}),(0,e.jsx)(a.Z,{span:6,children:(0,e.jsx)(t.Z,{style:{textAlign:"right"},children:m(l==null?void 0:l.biaya_transaksi)})}),(0,e.jsx)(D.Z,{style:{height:1,backgroundColor:"black",marginTop:0}}),(0,e.jsx)(a.Z,{span:18,children:(0,e.jsx)(t.Z.Title,{level:4,children:"Grand Total"})}),(0,e.jsx)(a.Z,{span:6,children:(0,e.jsx)(t.Z.Title,{level:4,style:{textAlign:"right"},children:m(l==null?void 0:l.grand_total)})})]})},ue=de,K=n(80737),ce=n(14538),ve=n(69677),he=function(p){var l=K.Z.useForm(),m=Z()(l,1),E=m[0],y=function(){},f=["john.doe@example.com","jane.doe@example.com","alex.smith@example.com","emily.nguyen@example.com","david.lee@example.com"];return(0,e.jsx)(ce.Z,{title:(0,e.jsxs)(t.Z,{style:{fontSize:16},children:["Send to Customers ",(0,e.jsx)("span",{style:{fontWeight:"bold"},children:p.title})]}),open:p.open,onOk:function(){},onCancel:function(){p.onCancel()},width:1200,children:(0,e.jsxs)(K.Z,{form:E,name:"add",onFinish:y,layout:"vertical",children:[(0,e.jsx)("div",{style:{padding:24,marginBottom:20,border:"1px solid  rgba(0, 0, 0, 0.06)"},children:(0,e.jsxs)(h.Z,{justify:"space-between",children:[(0,e.jsx)(a.Z,{xxl:14,sm:14,xs:24,children:(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(a.Z,{span:4,children:(0,e.jsx)(t.Z,{children:"No Faktur"})}),(0,e.jsx)(a.Z,{span:20,children:(0,e.jsx)(t.Z,{style:{fontSize:16},children:": IKI.__DEV__.1658-INV-011122-1658G"})}),(0,e.jsx)(a.Z,{span:4,children:(0,e.jsx)(t.Z,{children:"Tanggal Faktur"})}),(0,e.jsx)(a.Z,{span:20,children:(0,e.jsx)(t.Z,{style:{fontSize:16,fontWeight:"bold"},children:": Nov 12 2020"})}),(0,e.jsx)(a.Z,{span:4,children:(0,e.jsx)(t.Z,{children:"Due Date"})}),(0,e.jsx)(a.Z,{span:20,children:(0,e.jsx)(t.Z,{style:{fontSize:16,fontWeight:"bold"},children:": Nov 12 2020"})}),(0,e.jsx)(a.Z,{span:4,children:(0,e.jsx)(t.Z,{children:"No eFaktur"})}),(0,e.jsx)(a.Z,{span:20,children:(0,e.jsx)(t.Z,{style:{fontSize:16,fontWeight:"bold"},children:": 0eee3ed8-2110-4d9c-b790-593bdb30d3b7"})})]})}),(0,e.jsxs)(a.Z,{xxl:10,sm:10,xs:24,children:[(0,e.jsx)(t.Z.Text,{strong:!0,children:"Catatan Invoice"}),(0,e.jsx)(t.Z.Paragraph,{style:{maxWidth:400},children:"Lorem ipsum dolor sit amet, vince adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco"})]})]})}),(0,e.jsxs)(h.Z,{gutter:[16,16],children:[(0,e.jsxs)(a.Z,{span:24,children:[(0,e.jsx)(t.Z,{children:"Email"}),(0,e.jsx)(h.Z,{style:{border:"1px solid rgba(0, 0, 0, 0.06)",padding:"24px 16px",marginTop:"20px"},gutter:[18,16],children:f.map(function(j){return(0,e.jsx)(a.Z,{children:(0,e.jsxs)(t.Z.Link,{style:{fontSize:16,border:"1px solid #91D5FF",padding:"4px 10px"},children:[j," ",(0,e.jsx)("span",{style:{color:" rgba(0, 0, 0, 0.45)"},children:"x"})]})},j)})})]}),(0,e.jsxs)(a.Z,{span:24,children:[(0,e.jsx)(t.Z,{children:"CC"}),(0,e.jsx)(h.Z,{style:{border:"1px solid rgba(0, 0, 0, 0.06)",padding:"24px 16px",marginTop:"20px"},gutter:[18,16],children:f.map(function(j){return(0,e.jsx)(a.Z,{children:(0,e.jsxs)(t.Z.Link,{style:{fontSize:16,border:"1px solid #91D5FF",padding:"4px 10px"},children:[j," ",(0,e.jsx)("span",{style:{color:" rgba(0, 0, 0, 0.45)"},children:"x"})]})})})})]}),(0,e.jsx)(a.Z,{span:24,children:(0,e.jsx)(K.Z.Item,{label:"Catatan Email",name:"email_note",rules:[{required:!0,message:"Please input Catatan Email!"}],requiredMark:"optional",children:(0,e.jsx)(ve.Z.TextArea,{placeholder:"Catatan Email"})})}),(0,e.jsx)(a.Z,{children:(0,e.jsx)(K.Z.Item,{label:"Attach Invoice (Hasil Generate Invoice)"})})]})]})})},me=he,fe=n(46293),Y=n(75539);H().locale("en");var F=O.Z.Column,Q=function(){var W=R()(c()().mark(function p(l){var m,E;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,fetch(l);case 2:return m=f.sent,f.next=5,m.blob();case 5:return E=f.sent,f.abrupt("return",new Promise(function(j){var N=new FileReader;N.readAsDataURL(E),N.onloadend=function(){var V=N.result;j(V)}}));case 7:case"end":return f.stop()}},p)}));return function(l){return W.apply(this,arguments)}}(),X=function(p){return p==null?void 0:p.toLocaleString("id-ID",{style:"currency",currency:"IDR"})},ge=function(p){var l,m,E,y,f;b()(p);var j=(0,G.useParams)(),N=j.id,V=C.useState({}),w=Z()(V,2),r=w[0],xe=w[1],je=C.useState(!1),k=Z()(je,2),Ze=k[0],q=k[1],ye=C.useState(!1),ee=Z()(ye,2),Ie=ee[0],De=ee[1],Ee=C.useState(""),ne=Z()(Ee,2),be=ne[0],Te=ne[1],Ce=C.useState(""),re=Z()(Ce,2),Fe=re[0],Be=re[1];C.useEffect(function(){if(r.id){var g=function(){var u=R()(c()().mark(function i(){var s,o,I,L;return c()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Q(r==null||(s=r.Nebula_Area)===null||s===void 0?void 0:s.photo);case 2:return I=B.sent,B.next=5,Q(r==null||(o=r.Nebula_Node_Type)===null||o===void 0?void 0:o.icon);case 5:L=B.sent,Be(I),Te(L);case 8:case"end":return B.stop()}},i)}));return function(){return u.apply(this,arguments)}}();g()}},[r]);var Ae=function(){var g=R()(c()().mark(function u(){var i;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return q(!0),o.next=3,(0,oe.W)(N);case 3:i=o.sent,console.log(i,"data billing"),q(!1),i.error||xe(i.data);case 7:case"end":return o.stop()}},u)}));return function(){return g.apply(this,arguments)}}();C.useEffect(function(){Ae()},[N]);var Se=function(){var u,i=(u=document.getElementById("invoice"))!==null&&u!==void 0?u:document.createElement("div");(0,fe.rT)(i,{pixelRatio:1}).then(function(s){var o=new le.ZP("p","px","a4"),I=o.getImageProperties(s),L=o.internal.pageSize.getWidth(),te=I.height*L/I.width;o.addImage(s,"PNG",0,0,L,te),o.save("".concat(r==null?void 0:r.invoice,".pdf"))}).catch(function(s){console.log(s,"ERR")})};return(0,e.jsx)(z._z,{childrenContentStyle:{minHeight:"70vh"},title:(0,e.jsx)(_.Z,{type:"link",onClick:function(){return G.history.push("/transaction?tab=billing")},size:"large",children:(0,e.jsxs)(T.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(ie.Z,{onClick:function(){return G.history.push("/transaction?tab=billing")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)($.Z,{children:[(0,e.jsx)($.Z.Item,{children:"Billing and Invoice"}),(0,e.jsx)($.Z.Item,{href:"#",children:"Invoice"})]}),(0,e.jsx)(t.Z.Title,{level:5,children:"Invoice"})]})]})}),children:(0,e.jsxs)(P.Z,{spinning:Ze,children:[(0,e.jsxs)(G.Helmet,{children:[(0,e.jsx)("title",{children:"AAT IoT Platform | Detail Billing "}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsx)(me,{title:r==null||(l=r.Nebula_Area)===null||l===void 0?void 0:l.area_name,open:Ie,onOk:function(){},onCancel:function(){De(!1)}}),(0,e.jsx)(D.Z,{style:{marginTop:0}}),(0,e.jsxs)(h.Z,{justify:"space-between",children:[(0,e.jsx)(a.Z,{children:(0,e.jsx)(T.Z,{children:(0,e.jsx)(_.Z,{onClick:Se,icon:(0,e.jsx)(se.Z,{}),children:"Export Pdf"})})}),(0,e.jsx)(a.Z,{})]}),(0,e.jsx)(D.Z,{style:{backgroundColor:"#1890FF",height:2}}),(0,e.jsxs)("div",{id:"invoice",style:{padding:20},children:[(0,e.jsx)(h.Z,{wrap:!0,justify:"space-between",style:{width:"100%"},children:(0,e.jsx)(a.Z,{span:24,children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"12px"},children:[(0,e.jsx)("img",{width:114,alt:r==null||(m=r.Nebula_Area)===null||m===void 0?void 0:m.area_name,src:Fe}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},children:(0,e.jsx)(t.Z.Title,{level:3,style:{width:200},children:r==null||(E=r.Nebula_Area)===null||E===void 0?void 0:E.area_name})})]})})}),(0,e.jsxs)(h.Z,{justify:"space-between",style:{background:"linear-gradient(285.34deg, #4776E6 0%, #8E54E9 98.2%)",borderRadius:"16px",margin:"20px 0px",padding:24},children:[(0,e.jsxs)(a.Z,{children:[(0,e.jsx)(d.Z,{color:"#E6F7FF",style:{color:"#1890FF",borderRadius:100},children:"Draft Invoice"}),(0,e.jsx)(t.Z,{style:{fontSize:16,color:"#ffffff",marginTop:"14px"},children:"Invoice Number"}),(0,e.jsx)(t.Z,{style:{color:"#ffffff",fontWeight:500},children:r==null?void 0:r.invoice}),(0,e.jsxs)(T.Z,{children:[(0,e.jsx)(t.Z,{style:{color:"#ffffff"},children:"Invoice Date :"}),(0,e.jsx)(t.Z,{style:{color:"#ffffff",fontWeight:500},children:H()(r==null?void 0:r.cut_date).format("MMM DD YYYY")})]})]}),(0,e.jsxs)(a.Z,{style:{textAlign:"right"},children:[(0,e.jsx)(d.Z,{color:(r==null?void 0:r.status)==="new"?"cyan":(r==null?void 0:r.status)==="paid"?"green":(r==null?void 0:r.status)==="unpaid"?"orange":(r==null?void 0:r.status)==="cancel"?"red":"cyan",style:{borderRadius:100,border:"1px solid #ffffff",textTransform:"capitalize"},children:r==null?void 0:r.status}),(0,e.jsx)(t.Z,{style:{fontSize:16,color:"#FFFFFF"},children:"Billed to"}),(0,e.jsx)(t.Z,{style:{fontSize:28,color:"#FFFFFF"},children:r==null||(y=r.Nebula_Tenant)===null||y===void 0?void 0:y.name}),(0,e.jsx)(t.Z,{style:{maxWidth:312,color:"#ffffff"},children:r==null||(f=r.Nebula_Tenant)===null||f===void 0?void 0:f.address})]})]}),(0,e.jsx)(t.Z.Title,{level:4,children:"Bill for this month"}),(0,e.jsxs)(O.Z,{dataSource:[r,{},r,r,r],pagination:!1,size:"middle",scroll:{},children:[(0,e.jsx)(F,{title:"Month",dataIndex:"periode",render:function(u,i,s){return s==0?H()(u).format("MMMM YYYY"):""}},"month"),(0,e.jsx)(F,{title:"Type",dataIndex:"Nebula_Node_Type",render:function(u,i,s){return s==0?(0,e.jsxs)(T.Z,{children:[(0,e.jsx)(v.C,{src:be,alt:"icon-type"}),(0,e.jsx)(t.Z,{children:u==null?void 0:u.name})]}):""}},"Nebula_Node_Type"),(0,e.jsx)(F,{title:"Usage (m3)",dataIndex:"usage",render:function(u,i,s){return s==0?(0,Y.qi)(u):""}},"usage"),(0,e.jsx)(F,{title:"Minimum Usage",dataIndex:"min_usage_threshold",render:function(u,i,s){return s==0?(0,Y.qi)(u):""}},"min_usage_value"),(0,e.jsx)(F,{align:"right",title:"Total Usage (m3)",dataIndex:"billing_usage",width:250,render:function(u,i,s){if(s==0)return(0,Y.qi)(u);if(s==1)return(0,e.jsx)(t.Z,{style:{textAlign:"left"},children:"Tiered pricing"});var o=s-1,I=" < ";return o==1?I=" < ":(o==2||o==3)&&(I=" >= "),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,e.jsxs)(t.Z,{style:{textAlign:"right"},children:[I,i==null?void 0:i["parameter_".concat(o)]]}),(0,e.jsx)(t.Z,{children:(0,Y.qi)(i==null?void 0:i["usage_parameter_".concat(o)])})]})}},"total_usage"),(0,e.jsx)(F,{title:"Price",dataIndex:"price",align:"right",render:function(u,i,s){if(s==0)return"";var o=s-1;return X(i==null?void 0:i["price_parameter_".concat(o)])}},"price"),(0,e.jsx)(F,{title:"Total",dataIndex:"total",align:"right",render:function(u,i,s){if(s==0)return"";var o=s-1;return X(i==null?void 0:i["amount_parameter_".concat(o)])}},"total")]}),(0,e.jsx)(h.Z,{gutter:[16,16],justify:"space-between",style:{marginTop:40},children:(0,e.jsx)(a.Z,{span:24,children:(0,e.jsx)(ue,{data:r})})})]})]})})},pe=ge},41231:function(J,A,n){n.d(A,{W:function(){return $},t:function(){return _}});var U=n(11281),Z=n.n(U),M=n(97983),b=n.n(M),S=n(40794),c=n.n(S),x=n(12461),R=n(9669),z=n.n(R),O=n(9212);function _(t){return T.apply(this,arguments)}function T(){return T=c()(b()().mark(function t(P){var D,h;return b()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,O.Z.get("/billing",Z()({method:"GET"},P||{}));case 3:return D=d.sent,h=D.data,d.abrupt("return",{data:h.data,error:!1,message:"Success Get",responseCode:h.responseCode});case 8:if(d.prev=8,d.t0=d.catch(0),!z().isAxiosError(d.t0)){d.next=16;break}return console.log("error message: ",d.t0.message),x.ZP.error(d.t0.message),d.abrupt("return",{data:null,error:!0,message:d.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",d.t0),x.ZP.error("An unexpected error occurred"),d.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return d.stop()}},t,null,[[0,8]])})),T.apply(this,arguments)}var $=function(){var t=c()(b()().mark(function P(D){var h,a;return b()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.prev=0,v.next=3,O.Z.get("/billing/"+D,{method:"GET"});case 3:return h=v.sent,a=h.data,v.abrupt("return",{data:a.data,error:!1,message:"Success Get",responseCode:a.responseCode});case 8:if(v.prev=8,v.t0=v.catch(0),!z().isAxiosError(v.t0)){v.next=16;break}return console.log("error message: ",v.t0.message),x.ZP.error(v.t0.message),v.abrupt("return",{data:null,error:!0,message:v.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",v.t0),x.ZP.error("An unexpected error occurred"),v.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return v.stop()}},P,null,[[0,8]])}));return function(D){return t.apply(this,arguments)}}()}}]);
