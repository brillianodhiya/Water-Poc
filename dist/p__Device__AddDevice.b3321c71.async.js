"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2098],{82826:function(Y,R,e){e.d(R,{Z:function(){return M}});var E=e(1413),m=e(67294),y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},L=y,j=e(84089),f=function(D,C){return m.createElement(j.Z,(0,E.Z)((0,E.Z)({},D),{},{ref:C,icon:L}))};f.displayName="ArrowLeftOutlined";var M=m.forwardRef(f)},86873:function(Y,R,e){e.d(R,{B:function(){return f}});var E=e(97983),m=e.n(E),y=e(40794),L=e.n(y),j=e(52948),f=function(){var M=L()(m()().mark(function p(D,C){var i;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return j.Z.setApiKey("AIzaSyAcli1qFFLWrhhlDhVUCWkAJqzEY6Cp9UI"),j.Z.setLanguage("en"),j.Z.setRegion("id"),u.next=5,j.Z.fromLatLng(D,C);case 5:return i=u.sent,u.next=8,i==null?void 0:i.results[0].formatted_address;case 8:return u.abrupt("return",u.sent);case 9:case"end":return u.stop()}},p)}));return function(D,C){return M.apply(this,arguments)}}()},72923:function(Y,R,e){e.d(R,{Z:function(){return u}});var E=e(97983),m=e.n(E),y=e(40794),L=e.n(y),j=e(67294),f=e(37054),M=e(69677),p=e(21802),D=e(49288),C=e(20906),i=e(85893),$=M.Z.Search;function u(t){var o=t.center,s=o===void 0?{lat:-6.2,lng:106.816666}:o,a=t.onChange,l=a===void 0?function(d){}:a,c=(0,f.Db)({googleMapsApiKey:"AIzaSyAcli1qFFLWrhhlDhVUCWkAJqzEY6Cp9UI",libraries:["places"]}),v=c.isLoaded;return v?(0,i.jsx)(_,{c:s,onChange:l}):(0,i.jsx)("div",{children:"Loading..."})}function _(t){var o=t.c,s=o===void 0?{lat:-6.2,lng:106.816666}:o,a=t.onChange,l=a===void 0?function(v){}:a,c=(0,j.useMemo)(function(){return s},[s]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",alignItems:"center",alignContent:"center"},children:[(0,i.jsx)(p.Z,{style:{fontSize:"14px",fontWeight:400,marginTop:"12px"},children:"Pin Location"}),(0,i.jsx)(n,{setSelected:l})]}),(0,i.jsx)(f.b6,{onRightClick:function(d){var g=d.latLng.lat(),A=d.latLng.lng();console.log(d,"E");try{l({lat:g,lng:A})}catch(I){}},zoom:16,center:c,mapContainerClassName:"map-container-gateway",children:(0,i.jsx)(f.Jx,{onDragEnd:function(d){var g=d.latLng.lat(),A=d.latLng.lng();try{l({lat:g,lng:A})}catch(I){}},draggable:!0,position:c})})]})}var n=function(o){var s=o.setSelected,a=(0,C.ZP)(),l=a.ready,c=a.value,v=a.setValue,d=a.suggestions,g=d.status,A=d.data,I=a.clearSuggestions,z=function(){var T=L()(m()().mark(function h(K){var V,Z,H,r;return m()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return v(JSON.parse(K).description,!1),I(),b.next=4,(0,C.LM)({address:K});case 4:return V=b.sent,b.next=7,(0,C.WV)(V[0]);case 7:Z=b.sent,H=Z.lat,r=Z.lng,s({lat:H,lng:r});case 11:case"end":return b.stop()}},h)}));return function(K){return T.apply(this,arguments)}}(),k=A.map(function(T){var h=T.place_id,K=T.description;return{label:K,value:JSON.stringify({place_id:h,description:K})}});return(0,i.jsx)(D.Z,{options:k,style:{width:200},onSelect:z,value:c,children:(0,i.jsx)($,{disabled:!l,value:c,onChange:function(h){return v(h.target.value)},placeholder:"Cari Lokasi",style:{width:200}})})}},3897:function(Y,R,e){e.r(R);var E=e(97983),m=e.n(E),y=e(40794),L=e.n(y),j=e(12741),f=e.n(j),M=e(98435),p=e(39173),D=e(86873),C=e(72923),i=e(64173),$=e(82826),u=e(91714),_=e(38402),n=e(30028),t=e(80737),o=e(14538),s=e(71577),a=e(26713),l=e(58492),c=e(21802),v=e(11382),d=e(71230),g=e(15746),A=e(41232),I=e(69677),z=e(79915),k=e(30381),T=e.n(k),h=e(29218),K=e.n(h),V=e(18537),Z=e(67294),H=e(64593),r=e(85893);T().locale("en");var te=function(){var X=t.Z.useForm(),re=f()(X,1),W=re[0],Q=Z.useState({lat:-6.2,lng:106.816666}),q=f()(Q,2),ee=q[0],ae=q[1],oe=Z.useState(!1),P=f()(oe,2),B=P[0],U=P[1],F=Z.useState(""),N=f()(F,2),le=N[0],_e=N[1],ne=Z.useRef(null),ce=Z.useState(!0),ie=f()(ce,2),me=ie[0],se=ie[1],fe=Z.useState(!1),ue=f()(fe,2),ve=ue[0],de=ue[1],w=V.Z.parse(window.location.search);Z.useEffect(function(){w.area_id&&W.setFields([{name:"area_id",value:parseInt(w==null?void 0:w.area_id)},{name:"tenant_id",value:parseInt(w==null?void 0:w.tenant_id)}])},[]),Z.useEffect(function(){(0,D.B)(ee.lat,ee.lng).then(function(S){W.setFields([{name:"address",value:S}])})},[ee]);var ge=function(){var S=L()(m()().mark(function x(O){var J;return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return console.log(O),de(!0),G.next=4,(0,i.y_)({devEui:O.devEui.split(" ").join(""),model:O.brand,description:O.description,latitude:O.latitude,longitude:O.longitude,interval:O.interval,tenant_id:O.tenant_id,area_id:O.area_id,meter_id:O.meter_id});case 4:J=G.sent,de(!1),J.error?o.Z.error({content:J.message}):o.Z.success({content:J.message,onOk:function(){try{n.history.back()}catch(Pe){n.history.push("/device")}}});case 7:case"end":return G.stop()}},x)}));return function(O){return S.apply(this,arguments)}}(),pe=function(){var S=L()(m()().mark(function x(){var O,J;return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return U(!0),G.next=3,(0,i.qW)({devEui:le.split(" ").join("")});case 3:O=G.sent,U(!1),O.error?(se(!0),W.setFields([{name:"devEui",errors:["Device Id Not Found"]}])):(se(!1),(J=O.data)!==null&&J!==void 0&&J.data||se(!0));case 6:case"end":return G.stop()}},x)}));return function(){return S.apply(this,arguments)}}();return(0,r.jsxs)(_._z,{title:(0,r.jsx)(s.Z,{type:"link",onClick:function(){w.area_id?n.history.push("/area/tenant",{area_id:w.area_id,tenant_id:w.tenant_id||""}):n.history.push("/device")},size:"large",children:(0,r.jsxs)(a.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,r.jsx)($.Z,{onClick:function(){w.area_id?n.history.push("/area/tenant",{area_id:w.area_id,tenant_id:w.tenant_id||""}):n.history.push("/device")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(l.Z.Item,{children:"Device Management"}),(0,r.jsx)(l.Z.Item,{href:"#",children:"Add Device"})]}),(0,r.jsx)(c.Z.Title,{level:5,children:"Add Device"})]})]})}),children:[(0,r.jsxs)(H.q,{children:[(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("title",{children:"BITA | Device"}),(0,r.jsx)("link",{rel:"icon",href:"/logo.png",type:"image/x-icon"})]}),(0,r.jsx)(v.Z,{spinning:ve,children:(0,r.jsxs)(t.Z,{form:W,name:"add-area",onFinish:ge,layout:"vertical",children:[(0,r.jsxs)(d.Z,{style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingTop:20},gutter:[24,24],children:[(0,r.jsxs)(g.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(t.Z.Item,{label:"Installation Date",name:"installation_date",rules:[{required:!0,message:"Please input installation date!"}],requiredMark:"optional",initialValue:T()(),children:(0,r.jsx)(A.Z,{style:{width:"100%"},disabled:!0,className:"not-rounded"})}),(0,r.jsx)(t.Z.Item,{style:{},label:"Area Name",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(M.U,{style:void 0,type:"",defaultArea0:!1,onChange:function(){W.setFields([{name:"tenant_id",value:void 0}])}})}),(0,r.jsx)(t.Z.Item,{noStyle:!0,shouldUpdate:function(x,O){return x.area_id!==O.area_id},children:function(){return(0,r.jsx)(t.Z.Item,{style:{},label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(p.w,{onChange:function(){},areaId:W.getFieldValue("area_id"),style:void 0,type:""})})}}),(0,r.jsx)(t.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return(0,r.jsx)(t.Z.Item,{requiredMark:"optional",name:"devEui",label:"Device Eui",rules:[{required:!0}],children:(0,r.jsx)(I.Z,{placeholder:"Device Eui",onChange:function(O){_e(O.target.value),W.setFields([{name:"devEui",value:O.target.value.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim()}])},onKeyUp:function(){ne.current!==null&&window.clearTimeout(ne.current),ne.current=window.setTimeout(function(){pe()},1e3)},onKeyDown:function(){ne.current!==null&&window.clearTimeout(ne.current)},suffix:(0,r.jsx)(v.Z,{spinning:B})})})}})]}),(0,r.jsxs)(g.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(t.Z.Item,{label:"Meter Id",name:"meter_id",rules:[{required:!1,message:"Please input Meter Id!"}],children:(0,r.jsx)(I.Z,{placeholder:"Meter Id"})}),(0,r.jsx)(t.Z.Item,{label:"Model/Brand",name:"brand",rules:[{required:!1,message:"Please input Model/Brand!"}],children:(0,r.jsx)(I.Z,{placeholder:"Model/Brand"})}),(0,r.jsx)(t.Z.Item,{extra:"Minute",label:"Interval",name:"interval",initialValue:15,rules:[{required:!0,message:"Please input Interval!"}],requiredMark:"optional",children:(0,r.jsx)(z.Z,{prefix:(0,r.jsx)(u.Z,{})})}),(0,r.jsx)(t.Z.Item,{label:"Description",name:"description",rules:[{required:!1,message:"Please input description!"}],requiredMark:"optional",children:(0,r.jsx)(I.Z.TextArea,{placeholder:"Description",rows:3})})]}),(0,r.jsxs)(g.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(C.Z,{center:ee,onChange:function(x){ae(x),W.setFields([{name:"latitude",value:x.lat},{name:"longitude",value:x.lng}])}}),(0,r.jsx)(t.Z.Item,{requiredMark:"optional",name:"address",label:"Address",children:(0,r.jsx)(I.Z.TextArea,{placeholder:"Address"})}),(0,r.jsxs)(a.Z,{wrap:!0,size:"large",style:{marginTop:"16px"},children:[(0,r.jsx)(t.Z.Item,{requiredMark:"optional",name:"latitude",label:"Latitude",initialValue:"-6.290690",rules:[{required:!0,message:"Masukkan Latitude"}],hidden:!0,children:(0,r.jsx)(I.Z,{placeholder:"Latitude"})}),(0,r.jsx)(t.Z.Item,{requiredMark:"optional",name:"longitude",label:"Longitude",initialValue:"107.141853",rules:[{required:!0,message:"Masukkan Longitude"}],hidden:!0,children:(0,r.jsx)(I.Z,{placeholder:"Longitude"})})]})]})]}),(0,r.jsx)("div",{style:{marginTop:20,textAlign:"right"},children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(t.Z.Item,{children:(0,r.jsx)(s.Z,{type:"default",htmlType:"button",onClick:function(){try{n.history.back()}catch(x){n.history.push("/device")}},children:"Cancel"})}),(0,r.jsx)(t.Z.Item,{children:(0,r.jsx)(s.Z,{type:"primary",onClick:function(){me?W.setFields([{name:"devEui",errors:["Device Id Not Found"]}]):W.submit()},children:"Submit"})})]})})]})})]})};R.default=te},49288:function(Y,R,e){var E=e(87462),m=e(71002),y=e(97685),L=e(94184),j=e.n(L),f=e(50344),M=e(98423),p=e(67294),D=e(53124),C=e(40038),i=e(96159),$=C.Z.Option;function u(t){return t&&t.type&&(t.type.isSelectOption||t.type.isSelectOptGroup)}var _=function(o,s){var a=o.prefixCls,l=o.className,c=o.popupClassName,v=o.dropdownClassName,d=o.children,g=o.dataSource,A=(0,f.Z)(d),I;if(A.length===1&&(0,i.l$)(A[0])&&!u(A[0])){var z=(0,y.Z)(A,1);I=z[0]}var k=I?function(){return I}:void 0,T;return A.length&&u(A[0])?T=d:T=g?g.map(function(h){if((0,i.l$)(h))return h;switch((0,m.Z)(h)){case"string":return p.createElement($,{key:h,value:h},h);case"object":{var K=h.value;return p.createElement($,{key:K,value:K},h.text)}default:return}}):[],p.createElement(D.C,null,function(h){var K=h.getPrefixCls,V=K("select",a);return p.createElement(C.Z,(0,E.Z)({ref:s},(0,M.Z)(o,["dataSource"]),{prefixCls:V,popupClassName:c||v,className:j()("".concat(V,"-auto-complete"),l),mode:C.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:k}),T)})},n=p.forwardRef(_);n.Option=$,R.Z=n},52948:function(Y,R,e){var E,m=e(13399);function y(n,t,o,s,a,l,c){try{var v=n[l](c),d=v.value}catch(g){return void o(g)}v.done?t(d):Promise.resolve(d).then(s,a)}function L(n){return function(){var t=this,o=arguments;return new Promise(function(s,a){var l=n.apply(t,o);function c(d){y(l,s,a,c,v,"next",d)}function v(d){y(l,s,a,c,v,"throw",d)}c(void 0)})}}E={value:!0},R.Z=void 0;var j=!1,f=null,M="en",p=null,D=null,C="https://maps.googleapis.com/maps/api/geocode/json";function i(n){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];j&&(t?console.warn(n):console.log(n))}function $(n){return u.apply(this,arguments)}function u(){return(u=L(m.mark(function n(t){var o,s;return m.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(t).catch(function(){return Promise.reject(new Error("Error fetching data"))});case 2:return o=a.sent,a.next=5,o.json().catch(function(){return i("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))});case 5:if((s=a.sent).status!=="OK"){a.next=9;break}return i(s),a.abrupt("return",s);case 9:return i("".concat(s.error_message,`.
Server returned status code `).concat(s.status),!0),a.abrupt("return",Promise.reject(new Error("".concat(s.error_message,`.
Server returned status code `).concat(s.status))));case 11:case"end":return a.stop()}},n)}))).apply(this,arguments)}var _={setApiKey:function(n){f=n},setLanguage:function(n){M=n},setRegion:function(n){p=n},setLocationType:function(n){D=n},enableDebug:function(){var n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];j=n},fromLatLng:function(n,t,o,s,a,l){return L(m.mark(function c(){var v,d;return m.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(n&&t){g.next=3;break}return i("Provided coordinates are invalid",!0),g.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return v="".concat(n,",").concat(t),d="".concat(C,"?latlng=").concat(encodeURIComponent(v)),(o||f)&&(d+="&key=".concat(f=o||f)),(s||M)&&(d+="&language=".concat(M=s||M)),(a||p)&&(p=a||p,d+="&region=".concat(encodeURIComponent(p))),(l||D)&&(D=l||D,d+="&location_type=".concat(encodeURIComponent(D))),g.abrupt("return",$(d));case 9:case"end":return g.stop()}},c)}))()},fromAddress:function(n,t,o,s){return L(m.mark(function a(){var l;return m.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(n){c.next=3;break}return i("Provided address is invalid",!0),c.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return l="".concat(C,"?address=").concat(encodeURIComponent(n)),(t||f)&&(l+="&key=".concat(f=t||f)),(o||M)&&(l+="&language=".concat(M=o||M)),(s||p)&&(p=s||p,l+="&region=".concat(encodeURIComponent(p))),c.abrupt("return",$(l));case 8:case"end":return c.stop()}},a)}))()}};R.Z=_},20906:function(Y,R,e){e.d(R,{LM:function(){return p},WV:function(){return D},ZP:function(){return f}});var E=e(67294);function m(){return m=Object.assign||function(u){for(var _=1;_<arguments.length;_++){var n=arguments[_];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(u[t]=n[t])}return u},m.apply(this,arguments)}var y=function(u){var _=(0,E.useRef)(u);return _.current=u,_},L=function(u,_){var n;return function(){for(var t=this,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];n!==null&&(clearTimeout(n),n=null),n=setTimeout(function(){return u.apply(t,s)},_)}},j="\u{1F4A1} use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library",f=function(_){var n=_===void 0?{}:_,t=n.requestOptions,o=n.debounce,s=o===void 0?200:o,a=n.cache,l=a===void 0?24*60*60:a,c=n.cacheKey,v=c===void 0?"upa":c,d=n.googleMaps,g=n.callbackName,A=n.defaultValue,I=A===void 0?"":A,z=n.initOnMount,k=z===void 0?!0:z,T=(0,E.useState)(!1),h=T[0],K=T[1],V=(0,E.useState)(I),Z=V[0],H=V[1],r=(0,E.useState)({loading:!1,status:"",data:[]}),te=r[0],b=r[1],X=(0,E.useRef)(),re=y(t),W=y(d),Q=(0,E.useCallback)(function(){var P;if(!X.current){var B=window,U=B.google,F=W.current,N=(F==null?void 0:F.places)||(U==null||(P=U.maps)==null?void 0:P.places);if(!N){console.error(j);return}X.current=new N.AutocompleteService,K(!0)}},[W]),q=(0,E.useCallback)(function(){b({loading:!1,status:"",data:[]})},[]),ee=(0,E.useCallback)(function(P){P===void 0&&(P=v);try{sessionStorage.removeItem(P)}catch(B){}},[v]),ae=(0,E.useCallback)(L(function(P){var B;if(!P){q();return}b(function(F){return m({},F,{loading:!0})});var U={};try{U=JSON.parse(sessionStorage.getItem(v)||"{}")}catch(F){}if(l&&(U=Object.keys(U).reduce(function(F,N){return U[N].maxAge-Date.now()>=0&&(F[N]=U[N]),F},{}),U[P])){b({loading:!1,status:"OK",data:U[P].data});return}(B=X.current)==null||B.getPlacePredictions(m({},re.current,{input:P}),function(F,N){if(b({loading:!1,status:N,data:F||[]}),l&&N==="OK"){U[P]={data:F,maxAge:Date.now()+l*1e3};try{sessionStorage.setItem(v,JSON.stringify(U))}catch(le){}}})},s),[l,v,q,re]),oe=(0,E.useCallback)(function(P,B){B===void 0&&(B=!0),H(P),X.current&&B&&ae(P)},[ae]);return(0,E.useEffect)(function(){if(!k)return function(){return null};var P=window,B=P.google;return!W.current&&!(B!=null&&B.maps)&&g?window[g]=Q:Q(),function(){window[g]&&delete window[g]}},[g,W,Q,k]),{ready:h,value:Z,suggestions:te,setValue:oe,clearSuggestions:q,clearCache:ee,init:Q}},M="\u{1F4A1} use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.",p=function(_){var n=new window.google.maps.Geocoder;return new Promise(function(t,o){n.geocode(_,function(s,a){a!=="OK"&&o(a),!_.address&&_.componentRestrictions&&(console.error(M),t(s)),t(s)})})},D=function(_){var n=_.geometry.location,t=n.lat,o=n.lng;return{lat:t(),lng:o()}},C=function(_,n){var t=_.address_components.find(function(o){var s=o.types;return s.includes("postal_code")});if(!!t)return n?t.short_name:t.long_name},i="\u{1F4A1} use-places-autocomplete: Please provide a place Id when using getDetails() either as a string or as part of an Autocomplete Prediction.",$=function(_){var n=new window.google.maps.places.PlacesService(document.createElement("div"));return _.placeId?new Promise(function(t,o){n.getDetails(_,function(s,a){a!=="OK"&&o(a),t(s)})}):(console.error(i),Promise.reject(i))}}}]);
