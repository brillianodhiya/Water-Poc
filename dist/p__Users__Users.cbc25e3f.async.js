"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2143],{87547:function(re,L,r){r.d(L,{Z:function(){return z}});var P=r(1413),o=r(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},S=G,N=r(84089),b=function(d,f){return o.createElement(N.Z,(0,P.Z)((0,P.Z)({},d),{},{ref:f,icon:S}))};b.displayName="UserOutlined";var z=o.forwardRef(b)},7162:function(re,L,r){r.r(L),r.d(L,{default:function(){return se}});var P=r(97983),o=r.n(P),G=r(40794),S=r.n(G),N=r(12741),b=r.n(N),z=r(38402),v=r(14538),d=r(12461),f=r(27049),x=r(71230),p=r(15746),Z=r(71577),Q=r(87547),B=r(30028),E=r(23349),W=r(26713),H=r(24093),A=r(21802),U=r(20550),l=r(67294),e=r(85893),m=function(g){var y=g.dataSource,u=g.loading,s=g.showDeleteConfirm;return(0,e.jsxs)(E.Z,{loading:u,dataSource:y,style:{border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:8},pagination:{hideOnSinglePage:!0},children:[(0,e.jsx)(E.Z.Column,{title:"Name",dataIndex:"pic_name",render:function(h,t){return(0,e.jsxs)(W.Z,{children:[(0,e.jsx)(H.C,{src:t.image,size:22,icon:(0,e.jsx)(Q.Z,{})}),(0,e.jsx)(A.Z,{children:t.name})]})}},"pic_name"),(0,e.jsx)(E.Z.Column,{title:"Role",dataIndex:"role",render:function(h){if(h=="admin")return(0,e.jsx)(U.Z,{color:"blue",children:"Admin"});if(h=="area")return(0,e.jsx)(U.Z,{color:"green",children:"Area"});if(h=="teknisi")return(0,e.jsx)(U.Z,{color:"orange",children:"Technician"})}},"role"),(0,e.jsx)(E.Z.Column,{title:"Phone",dataIndex:"phone"},"phone"),(0,e.jsx)(E.Z.Column,{title:"Email",dataIndex:"email"},"email"),(0,e.jsx)(E.Z.Column,{title:"Area Name",dataIndex:"address"},"address"),(0,e.jsx)(E.Z.Column,{width:20,title:"",dataIndex:"",render:function(h,t){return(0,e.jsxs)(W.Z,{children:[(0,e.jsx)(Z.Z,{type:"link",onClick:function(){return B.history.push("/users/edit",{dataEdit:t})},children:"Edit"}),(0,e.jsx)(Z.Z,{type:"link",danger:!0,onClick:function(){return s(t.id)},children:"Delete"})]})}},"")]})},a=r(11281),i=r.n(a),C=r(9669),R=r.n(C),j=r(9212);function K(O){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function O(g){var y,u,s,c;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,api.get("/web/user/profile",_objectSpread({method:"GET"},g||{}));case 3:return y=t.sent,u=y.data,t.abrupt("return",{data:u.data,error:!1,message:"Success Get",responseCode:u.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!axios.isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),message.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:((s=t.t0.response)===null||s===void 0||(c=s.data)===null||c===void 0?void 0:c.message)||t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),message.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},O,null,[[0,8]])})),$.apply(this,arguments)}function I(O){return T.apply(this,arguments)}function T(){return T=S()(o()().mark(function O(g){var y,u,s,c;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.Z.get("/user/bita/list",i()({method:"GET"},g||{}));case 3:return y=t.sent,u=y.data,t.abrupt("return",{data:u.data,error:!1,message:"Success Get",responseCode:u.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!R().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),d.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:((s=t.t0.response)===null||s===void 0||(c=s.data)===null||c===void 0?void 0:c.message)||t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),d.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},O,null,[[0,8]])})),T.apply(this,arguments)}var w=null,_=null,M=function(){var O=S()(o()().mark(function g(y){var u,s,c,h,t;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.Z.delete("/user/delete/"+y);case 3:return u=n.sent,s=u.data,n.abrupt("return",i()(i()({},s),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!R().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?d.ZP.error(t.data.message):d.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:((c=n.t0.response)===null||c===void 0||(h=c.data)===null||h===void 0?void 0:h.message)||n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),d.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},g,null,[[0,8]])}));return function(y){return O.apply(this,arguments)}}(),V=r(21640),te=r(24969),ae=r(18537),ne=v.Z.confirm,ee=function(){var g=ae.Z.parse(window.location.search),y=l.useState(!1),u=b()(y,2),s=u[0],c=u[1],h=l.useState([]),t=b()(h,2),k=t[0],n=t[1],X=function(){var J=S()(o()().mark(function F(){var D;return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return c(!0),Y.next=3,I({});case 3:D=Y.sent,c(!1),D.error||n(D.data);case 6:case"end":return Y.stop()}},F)}));return function(){return J.apply(this,arguments)}}();l.useEffect(function(){X()},[]);var oe=function(F){ne({title:"Are you sure delete this user?",icon:(0,e.jsx)(V.Z,{}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var D=S()(o()().mark(function Y(){var ie;return o()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,M(F);case 2:ie=q.sent,ie.error||(d.ZP.success("Delete User Success"),X());case 4:case"end":return q.stop()}},Y)}));function le(){return D.apply(this,arguments)}return le}(),onCancel:function(){console.log("Cancel")}})};return(0,e.jsxs)(z._z,{title:"User Management",content:"Management User from Admin and Site.",style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(B.Helmet,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsx)(f.Z,{}),(0,e.jsxs)(x.Z,{children:[(0,e.jsx)(p.Z,{span:24,children:(0,e.jsx)(Z.Z,{style:{float:"right",marginBottom:20},icon:(0,e.jsx)(te.Z,{}),onClick:function(){return B.history.push("/users/create")},children:"Add User"})}),(0,e.jsx)(p.Z,{span:24,children:(0,e.jsx)(m,{showDeleteConfirm:oe,dataSource:k,subPageName:"area",loading:s})})]})]})},se=ee},27049:function(re,L,r){var P=r(87462),o=r(4942),G=r(94184),S=r.n(G),N=r(67294),b=r(53124),z=function(d,f){var x={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&f.indexOf(p)<0&&(x[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,p=Object.getOwnPropertySymbols(d);Z<p.length;Z++)f.indexOf(p[Z])<0&&Object.prototype.propertyIsEnumerable.call(d,p[Z])&&(x[p[Z]]=d[p[Z]]);return x},v=function(f){var x,p=N.useContext(b.E_),Z=p.getPrefixCls,Q=p.direction,B=f.prefixCls,E=f.type,W=E===void 0?"horizontal":E,H=f.orientation,A=H===void 0?"center":H,U=f.orientationMargin,l=f.className,e=f.children,m=f.dashed,a=f.plain,i=z(f,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),C=Z("divider",B),R=A.length>0?"-".concat(A):A,j=!!e,K=A==="left"&&U!=null,$=A==="right"&&U!=null,I=S()(C,"".concat(C,"-").concat(W),(x={},(0,o.Z)(x,"".concat(C,"-with-text"),j),(0,o.Z)(x,"".concat(C,"-with-text").concat(R),j),(0,o.Z)(x,"".concat(C,"-dashed"),!!m),(0,o.Z)(x,"".concat(C,"-plain"),!!a),(0,o.Z)(x,"".concat(C,"-rtl"),Q==="rtl"),(0,o.Z)(x,"".concat(C,"-no-default-orientation-margin-left"),K),(0,o.Z)(x,"".concat(C,"-no-default-orientation-margin-right"),$),x),l),T=(0,P.Z)((0,P.Z)({},K&&{marginLeft:U}),$&&{marginRight:U});return N.createElement("div",(0,P.Z)({className:I},i,{role:"separator"}),e&&W!=="vertical"&&N.createElement("span",{className:"".concat(C,"-inner-text"),style:T},e))};L.Z=v},20550:function(re,L,r){r.d(L,{Z:function(){return U}});var P=r(4942),o=r(87462),G=r(97685),S=r(97937),N=r(94184),b=r.n(N),z=r(98423),v=r(67294),d=r(53124),f=r(98787),x=r(68349),p=function(l,e){var m={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&e.indexOf(a)<0&&(m[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(l);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(l,a[i])&&(m[a[i]]=l[a[i]]);return m},Z=function(e){var m,a=e.prefixCls,i=e.className,C=e.checked,R=e.onChange,j=e.onClick,K=p(e,["prefixCls","className","checked","onChange","onClick"]),$=v.useContext(d.E_),I=$.getPrefixCls,T=function(V){R==null||R(!C),j==null||j(V)},w=I("tag",a),_=b()(w,(m={},(0,P.Z)(m,"".concat(w,"-checkable"),!0),(0,P.Z)(m,"".concat(w,"-checkable-checked"),C),m),i);return v.createElement("span",(0,o.Z)({},K,{className:_,onClick:T}))},Q=Z,B=function(l,e){var m={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&e.indexOf(a)<0&&(m[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(l);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(l,a[i])&&(m[a[i]]=l[a[i]]);return m},E=new RegExp("^(".concat(f.Y.join("|"),")(-inverse)?$")),W=new RegExp("^(".concat(f.E.join("|"),")$")),H=function(e,m){var a,i=e.prefixCls,C=e.className,R=e.style,j=e.children,K=e.icon,$=e.color,I=e.onClose,T=e.closeIcon,w=e.closable,_=w===void 0?!1:w,M=B(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),V=v.useContext(d.E_),te=V.getPrefixCls,ae=V.direction,ne=v.useState(!0),ee=(0,G.Z)(ne,2),se=ee[0],O=ee[1];v.useEffect(function(){"visible"in M&&O(M.visible)},[M.visible]);var g=function(){return $?E.test($)||W.test($):!1},y=(0,o.Z)({backgroundColor:$&&!g()?$:void 0},R),u=g(),s=te("tag",i),c=b()(s,(a={},(0,P.Z)(a,"".concat(s,"-").concat($),u),(0,P.Z)(a,"".concat(s,"-has-color"),$&&!u),(0,P.Z)(a,"".concat(s,"-hidden"),!se),(0,P.Z)(a,"".concat(s,"-rtl"),ae==="rtl"),a),C),h=function(D){D.stopPropagation(),I==null||I(D),!D.defaultPrevented&&("visible"in M||O(!1))},t=function(){return _?T?v.createElement("span",{className:"".concat(s,"-close-icon"),onClick:h},T):v.createElement(S.Z,{className:"".concat(s,"-close-icon"),onClick:h}):null},k="onClick"in M||j&&j.type==="a",n=(0,z.Z)(M,["visible"]),X=K||null,oe=X?v.createElement(v.Fragment,null,X,v.createElement("span",null,j)):j,J=v.createElement("span",(0,o.Z)({},n,{ref:m,className:c,style:y}),oe,t());return k?v.createElement(x.Z,null,J):J},A=v.forwardRef(H);A.CheckableTag=Q;var U=A}}]);
