"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7594],{57656:function(w,x,a){a.r(x);var A=a(97983),O=a.n(A),v=a(40794),y=a.n(v),C=a(12741),E=a.n(C),T=a(98435),L=a(86873),Z=a(72923),R=a(64173),B=a(82826),U=a(38402),r=a(30028),n=a(80737),j=a(14538),h=a(71577),M=a(26713),D=a(58492),K=a(21802),W=a(11382),F=a(71230),P=a(15746),G=a(41232),i=a(69677),S=a(30381),g=a.n(S),$=a(29218),q=a.n($),k=a(18537),m=a(67294),N=a(64593),e=a(85893);g().locale("en");var z=function(){var V=n.Z.useForm(),b=E()(V,1),d=b[0],H=m.useState({lat:-6.2,lng:106.816666}),f=E()(H,2),u=f[0],J=f[1],Q=m.useState(!1),p=E()(Q,2),X=p[0],I=p[1],_=k.Z.parse(window.location.search);m.useEffect(function(){_.area_id&&d.setFields([{name:"area_id",value:parseInt(_==null?void 0:_.area_id)},{name:"tenant_id",value:parseInt(_==null?void 0:_.tenant_id)}])},[]),m.useEffect(function(){(0,L.B)(u.lat,u.lng).then(function(t){d.setFields([{name:"address",value:t}])})},[u]);var Y=function(){var t=y()(O()().mark(function s(l){var c;return O()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(l),I(!0),o.next=4,(0,R.$)({description:l.description,latitude:l.latitude,longitude:l.longitude,area_id:l.area_id,address:l.address,mac_id:l.mac_id,name:l.name});case 4:c=o.sent,I(!1),c.error?j.Z.error({content:c.message}):j.Z.success({content:c.message,onOk:function(){try{r.history.back()}catch(te){r.history.push("/device")}}});case 7:case"end":return o.stop()}},s)}));return function(l){return t.apply(this,arguments)}}();return(0,e.jsxs)(U._z,{title:(0,e.jsx)(h.Z,{type:"link",onClick:function(){try{r.history.back()}catch(s){r.history.push("/gateway")}},size:"large",children:(0,e.jsxs)(M.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(B.Z,{onClick:function(){try{r.history.back()}catch(s){r.history.push("/gateway")}},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(D.Z,{children:[(0,e.jsx)(D.Z.Item,{children:"Gateway Management"}),(0,e.jsx)(D.Z.Item,{href:"#",children:"Add Gateway"})]}),(0,e.jsx)(K.Z.Title,{level:5,children:"Add Gateway"})]})]})}),children:[(0,e.jsxs)(N.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT | Gateway"}),(0,e.jsx)("link",{rel:"icon",href:"/logos.png",type:"image/x-icon"})]}),(0,e.jsx)(W.Z,{spinning:X,children:(0,e.jsxs)(n.Z,{form:d,name:"add-area",onFinish:Y,layout:"vertical",children:[(0,e.jsxs)(F.Z,{style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingTop:20},gutter:[24,24],children:[(0,e.jsxs)(P.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,e.jsx)(n.Z.Item,{label:"Installation Date",name:"installation_date",rules:[{required:!0,message:"Please input installation date!"}],requiredMark:"optional",initialValue:g()(),children:(0,e.jsx)(G.Z,{style:{width:"100%"},disabled:!0,className:"not-rounded"})}),(0,e.jsx)(n.Z.Item,{style:{},label:"Area Name",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",className:"not-rounded",children:(0,e.jsx)(T.U,{style:void 0,type:"",defaultArea0:!1,onChange:function(){d.setFields([{name:"tenant_id",value:void 0}])}})}),(0,e.jsx)(n.Z.Item,{label:"Gateway Name",name:"name",rules:[{required:!1,message:"Please input Gateway Name!"}],children:(0,e.jsx)(i.Z,{placeholder:"Gateway Name"})})]}),(0,e.jsxs)(P.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,e.jsx)(n.Z.Item,{label:"Mac Id",name:"mac_id",rules:[{required:!1,message:"Please input Mac Id!"}],children:(0,e.jsx)(i.Z,{placeholder:"Mac Id"})}),(0,e.jsx)(n.Z.Item,{label:"Description",name:"description",rules:[{required:!1,message:"Please input description!"}],requiredMark:"optional",children:(0,e.jsx)(i.Z.TextArea,{placeholder:"Description",rows:3})})]}),(0,e.jsxs)(P.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,e.jsx)(Z.Z,{center:u,onChange:function(s){J(s),d.setFields([{name:"latitude",value:s.lat},{name:"longitude",value:s.lng}])}}),(0,e.jsx)(n.Z.Item,{requiredMark:"optional",name:"address",label:"Address",children:(0,e.jsx)(i.Z.TextArea,{placeholder:"Address"})}),(0,e.jsxs)(M.Z,{wrap:!0,size:"large",style:{marginTop:"16px"},children:[(0,e.jsx)(n.Z.Item,{requiredMark:"optional",name:"latitude",label:"Latitude",initialValue:"-6.290690",rules:[{required:!0,message:"Masukkan Latitude"}],hidden:!0,children:(0,e.jsx)(i.Z,{placeholder:"Latitude"})}),(0,e.jsx)(n.Z.Item,{requiredMark:"optional",name:"longitude",label:"Longitude",initialValue:"107.141853",rules:[{required:!0,message:"Masukkan Longitude"}],hidden:!0,children:(0,e.jsx)(i.Z,{placeholder:"Longitude"})})]})]})]}),(0,e.jsx)("div",{style:{marginTop:20,textAlign:"right"},children:(0,e.jsxs)(M.Z,{children:[(0,e.jsx)(n.Z.Item,{children:(0,e.jsx)(h.Z,{type:"default",htmlType:"button",onClick:function(){try{r.history.back()}catch(s){r.history.push("/device")}},children:"Cancel"})}),(0,e.jsx)(n.Z.Item,{children:(0,e.jsx)(h.Z,{type:"primary",onClick:function(){d.submit()},children:"Submit"})})]})})]})})]})};x.default=z}}]);
