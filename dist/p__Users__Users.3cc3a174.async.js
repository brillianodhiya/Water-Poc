"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2143],{87547:function(ae,M,e){e.d(M,{Z:function(){return G}});var P=e(1413),o=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},S=B,D=e(84089),b=function(d,u){return o.createElement(D.Z,(0,P.Z)((0,P.Z)({},d),{},{ref:u,icon:S}))};b.displayName="UserOutlined";var G=o.forwardRef(b)},7162:function(ae,M,e){e.r(M),e.d(M,{default:function(){return ee}});var P=e(97983),o=e.n(P),B=e(40794),S=e.n(B),D=e(12741),b=e.n(D),G=e(38402),f=e(14538),d=e(12461),u=e(27049),h=e(71230),v=e(15746),Z=e(71577),Q=e(87547),F=e(30028),E=e(23349),z=e(26713),Y=e(24093),A=e(21802),U=e(20550),l=e(67294),r=e(85893),p=function(C){var m=C.dataSource,s=C.loading,g=C.showDeleteConfirm;return(0,r.jsxs)(E.Z,{loading:s,dataSource:m,style:{border:"1px solid rgba(0, 0, 0, 0.06)",borderRadius:8},pagination:{hideOnSinglePage:!0},children:[(0,r.jsx)(E.Z.Column,{title:"Name",dataIndex:"pic_name",render:function(y,t){return(0,r.jsxs)(z.Z,{children:[(0,r.jsx)(Y.C,{src:t.image,size:22,icon:(0,r.jsx)(Q.Z,{})}),(0,r.jsx)(A.Z,{children:t.name})]})}},"pic_name"),(0,r.jsx)(E.Z.Column,{title:"Role",dataIndex:"role",render:function(y){if(y=="admin")return(0,r.jsx)(U.Z,{color:"blue",children:"Admin"});if(y=="area")return(0,r.jsx)(U.Z,{color:"green",children:"Area"});if(y=="teknisi")return(0,r.jsx)(U.Z,{color:"orange",children:"Technician"})}},"role"),(0,r.jsx)(E.Z.Column,{title:"Phone",dataIndex:"phone"},"phone"),(0,r.jsx)(E.Z.Column,{title:"Email",dataIndex:"email"},"email"),(0,r.jsx)(E.Z.Column,{title:"Area Name",dataIndex:"address"},"address"),(0,r.jsx)(E.Z.Column,{width:20,title:"",dataIndex:"",render:function(y,t){return(0,r.jsxs)(z.Z,{children:[(0,r.jsx)(Z.Z,{type:"link",onClick:function(){return F.history.push("/users/edit",{dataEdit:t})},children:"Edit"}),(0,r.jsx)(Z.Z,{type:"link",danger:!0,onClick:function(){return g(t.id)},children:"Delete"})]})}},"")]})},a=e(11281),i=e.n(a),x=e(9669),R=e.n(x),j=e(9212);function W(O){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime().mark(function O(C){var m,s,g,c;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,api.get("/web/user/profile",_objectSpread({method:"GET"},C||{}));case 3:return m=t.sent,s=m.data,t.abrupt("return",{data:s.data,error:!1,message:"Success Get",responseCode:s.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!axios.isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),message.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:((g=t.t0.response)===null||g===void 0||(c=g.data)===null||c===void 0?void 0:c.message)||t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),message.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},O,null,[[0,8]])})),$.apply(this,arguments)}function N(O){return T.apply(this,arguments)}function T(){return T=S()(o()().mark(function O(C){var m,s,g,c;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.Z.get("/user/bita/list",i()({method:"GET"},C||{}));case 3:return m=t.sent,s=m.data,t.abrupt("return",{data:s.data,error:!1,message:"Success Get",responseCode:s.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!R().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),d.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:((g=t.t0.response)===null||g===void 0||(c=g.data)===null||c===void 0?void 0:c.message)||t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),d.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},O,null,[[0,8]])})),T.apply(this,arguments)}var K=null,q=null,I=function(){var O=S()(o()().mark(function C(m){var s,g,c,y,t;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.Z.delete("/user/delete/"+m);case 3:return s=n.sent,g=s.data,n.abrupt("return",i()(i()({},g),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!R().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?d.ZP.error(t.data.message):d.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:((c=n.t0.response)===null||c===void 0||(y=c.data)===null||y===void 0?void 0:y.message)||n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),d.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},C,null,[[0,8]])}));return function(m){return O.apply(this,arguments)}}(),H=e(21640),ne=e(24969),se=e(18537),oe=e(64593),_=f.Z.confirm,le=function(){var C=se.Z.parse(window.location.search),m=l.useState(!1),s=b()(m,2),g=s[0],c=s[1],y=l.useState([]),t=b()(y,2),L=t[0],n=t[1],re=function(){var V=S()(o()().mark(function k(){var J;return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return c(!0),w.next=3,N({});case 3:J=w.sent,c(!1),J.error||n(J.data);case 6:case"end":return w.stop()}},k)}));return function(){return V.apply(this,arguments)}}();l.useEffect(function(){re()},[]);var te=function(k){_({title:"Are you sure delete this user?",icon:(0,r.jsx)(H.Z,{}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var J=S()(o()().mark(function w(){var ce;return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,I(k);case 2:ce=X.sent,ce.error||(d.ZP.success("Delete User Success"),re());case 4:case"end":return X.stop()}},w)}));function ie(){return J.apply(this,arguments)}return ie}(),onCancel:function(){console.log("Cancel")}})};return(0,r.jsxs)(G._z,{title:"User Management",content:"Management User from Admin and Site.",style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,r.jsxs)(oe.q,{children:[(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("title",{children:"BITA IoT Platform | User Management"}),(0,r.jsx)("link",{rel:"icon",href:"/logo.png",type:"image/x-icon"})]}),(0,r.jsx)(u.Z,{}),(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(v.Z,{span:24,children:(0,r.jsx)(Z.Z,{style:{float:"right",marginBottom:20},icon:(0,r.jsx)(ne.Z,{}),onClick:function(){return F.history.push("/users/create")},children:"Add User"})}),(0,r.jsx)(v.Z,{span:24,children:(0,r.jsx)(p,{showDeleteConfirm:te,dataSource:L,subPageName:"area",loading:g})})]})]})},ee=le},27049:function(ae,M,e){var P=e(87462),o=e(4942),B=e(94184),S=e.n(B),D=e(67294),b=e(53124),G=function(d,u){var h={};for(var v in d)Object.prototype.hasOwnProperty.call(d,v)&&u.indexOf(v)<0&&(h[v]=d[v]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,v=Object.getOwnPropertySymbols(d);Z<v.length;Z++)u.indexOf(v[Z])<0&&Object.prototype.propertyIsEnumerable.call(d,v[Z])&&(h[v[Z]]=d[v[Z]]);return h},f=function(u){var h,v=D.useContext(b.E_),Z=v.getPrefixCls,Q=v.direction,F=u.prefixCls,E=u.type,z=E===void 0?"horizontal":E,Y=u.orientation,A=Y===void 0?"center":Y,U=u.orientationMargin,l=u.className,r=u.children,p=u.dashed,a=u.plain,i=G(u,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),x=Z("divider",F),R=A.length>0?"-".concat(A):A,j=!!r,W=A==="left"&&U!=null,$=A==="right"&&U!=null,N=S()(x,"".concat(x,"-").concat(z),(h={},(0,o.Z)(h,"".concat(x,"-with-text"),j),(0,o.Z)(h,"".concat(x,"-with-text").concat(R),j),(0,o.Z)(h,"".concat(x,"-dashed"),!!p),(0,o.Z)(h,"".concat(x,"-plain"),!!a),(0,o.Z)(h,"".concat(x,"-rtl"),Q==="rtl"),(0,o.Z)(h,"".concat(x,"-no-default-orientation-margin-left"),W),(0,o.Z)(h,"".concat(x,"-no-default-orientation-margin-right"),$),h),l),T=(0,P.Z)((0,P.Z)({},W&&{marginLeft:U}),$&&{marginRight:U});return D.createElement("div",(0,P.Z)({className:N},i,{role:"separator"}),r&&z!=="vertical"&&D.createElement("span",{className:"".concat(x,"-inner-text"),style:T},r))};M.Z=f},20550:function(ae,M,e){e.d(M,{Z:function(){return U}});var P=e(4942),o=e(87462),B=e(97685),S=e(97937),D=e(94184),b=e.n(D),G=e(98423),f=e(67294),d=e(53124),u=e(98787),h=e(68349),v=function(l,r){var p={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&r.indexOf(a)<0&&(p[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(l);i<a.length;i++)r.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(l,a[i])&&(p[a[i]]=l[a[i]]);return p},Z=function(r){var p,a=r.prefixCls,i=r.className,x=r.checked,R=r.onChange,j=r.onClick,W=v(r,["prefixCls","className","checked","onChange","onClick"]),$=f.useContext(d.E_),N=$.getPrefixCls,T=function(H){R==null||R(!x),j==null||j(H)},K=N("tag",a),q=b()(K,(p={},(0,P.Z)(p,"".concat(K,"-checkable"),!0),(0,P.Z)(p,"".concat(K,"-checkable-checked"),x),p),i);return f.createElement("span",(0,o.Z)({},W,{className:q,onClick:T}))},Q=Z,F=function(l,r){var p={};for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&r.indexOf(a)<0&&(p[a]=l[a]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(l);i<a.length;i++)r.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(l,a[i])&&(p[a[i]]=l[a[i]]);return p},E=new RegExp("^(".concat(u.Y.join("|"),")(-inverse)?$")),z=new RegExp("^(".concat(u.E.join("|"),")$")),Y=function(r,p){var a,i=r.prefixCls,x=r.className,R=r.style,j=r.children,W=r.icon,$=r.color,N=r.onClose,T=r.closeIcon,K=r.closable,q=K===void 0?!1:K,I=F(r,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),H=f.useContext(d.E_),ne=H.getPrefixCls,se=H.direction,oe=f.useState(!0),_=(0,B.Z)(oe,2),le=_[0],ee=_[1];f.useEffect(function(){"visible"in I&&ee(I.visible)},[I.visible]);var O=function(){return $?E.test($)||z.test($):!1},C=(0,o.Z)({backgroundColor:$&&!O()?$:void 0},R),m=O(),s=ne("tag",i),g=b()(s,(a={},(0,P.Z)(a,"".concat(s,"-").concat($),m),(0,P.Z)(a,"".concat(s,"-has-color"),$&&!m),(0,P.Z)(a,"".concat(s,"-hidden"),!le),(0,P.Z)(a,"".concat(s,"-rtl"),se==="rtl"),a),x),c=function(k){k.stopPropagation(),N==null||N(k),!k.defaultPrevented&&("visible"in I||ee(!1))},y=function(){return q?T?f.createElement("span",{className:"".concat(s,"-close-icon"),onClick:c},T):f.createElement(S.Z,{className:"".concat(s,"-close-icon"),onClick:c}):null},t="onClick"in I||j&&j.type==="a",L=(0,G.Z)(I,["visible"]),n=W||null,re=n?f.createElement(f.Fragment,null,n,f.createElement("span",null,j)):j,te=f.createElement("span",(0,o.Z)({},L,{ref:p,className:g,style:C}),re,y());return t?f.createElement(h.Z,null,te):te},A=f.forwardRef(Y);A.CheckableTag=Q;var U=A}}]);
