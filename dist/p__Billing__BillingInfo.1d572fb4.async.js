"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6251],{75539:function(Q,N,r){r.d(N,{DT:function(){return Z},et:function(){return R},qi:function(){return C}});var L=r(67294),Z=function(v){return new Intl.NumberFormat("id-ID").format(v)},U=function(v){v=parseFloat(v),isNaN(v)&&(v=0);var x=new Intl.NumberFormat("id-ID").format(v);return x.split(",").length>1?x.split(",")[1].length<3?x.split(",")[0]+","+(x.split(",")[1]+"000").slice(0,3):x:x+",000"},C=function(v){return new Intl.NumberFormat("id-ID").format(v)},R=function(v){return v==null?void 0:v.toLocaleString("id-ID",{style:"currency",currency:"IDR"})}},63694:function(Q,N,r){r.r(N),r.d(N,{default:function(){return ye}});var L=r(12741),Z=r.n(L),U=r(5200),C=r.n(U),R=r(97983),f=r.n(R),v=r(40794),x=r.n(v),z=r(38402),O=r(23349),H=r(12461),M=r(14538),D=r(71577),I=r(26713),E=r(58492),a=r(21802),T=r(11382),F=r(27049),s=r(71230),t=r(15746),X=r(20550),se=r(24093),oe=r(30381),V=r.n(oe),Oe=r(29218),P=r(67294),de=r(84730),G=r(30028),ue=r(82826),ce=r(58638),he=r(41231),e=r(85893),ve=function(p){var o=p.data,m=function(y){return y==null?void 0:y.toLocaleString("id-ID",{style:"currency",currency:"IDR"})};return(0,e.jsxs)(s.Z,{gutter:[16,16],style:{maxWidth:700,float:"right"},children:[(0,e.jsx)(t.Z,{span:18,children:(0,e.jsx)(a.Z.Title,{level:4,children:"Sub Total"})}),(0,e.jsx)(t.Z,{span:6,children:(0,e.jsx)(a.Z.Title,{level:4,style:{textAlign:"right"},children:m(o==null?void 0:o.sub_total)})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)(a.Z,{children:"PPN"})}),(0,e.jsx)(t.Z,{span:10,children:(0,e.jsxs)(a.Z,{children:[o==null?void 0:o.ppn,"%"]})}),(0,e.jsx)(t.Z,{span:6,style:{textAlign:"right"},children:(0,e.jsxs)(a.Z,{children:[m(o==null?void 0:o.ppn_value)," "]})}),(0,e.jsx)(t.Z,{span:8,children:(0,e.jsx)(a.Z,{children:"Materai"})}),(0,e.jsx)(t.Z,{span:10,children:(0,e.jsx)(a.Z,{children:m(o==null?void 0:o.materai)})}),(0,e.jsx)(t.Z,{span:6,children:(0,e.jsx)(a.Z,{style:{textAlign:"right"},children:m(o==null?void 0:o.materai)})}),(0,e.jsx)(t.Z,{span:18,children:(0,e.jsx)(a.Z,{children:"Biaya Transaksi"})}),(0,e.jsx)(t.Z,{span:6,children:(0,e.jsx)(a.Z,{style:{textAlign:"right"},children:m(o==null?void 0:o.biaya_transaksi)})}),(0,e.jsx)(F.Z,{style:{height:1,backgroundColor:"black",marginTop:0}}),(0,e.jsx)(t.Z,{span:18,children:(0,e.jsx)(a.Z.Title,{level:4,children:"Grand Total"})}),(0,e.jsx)(t.Z,{span:6,children:(0,e.jsx)(a.Z.Title,{level:4,style:{textAlign:"right"},children:m(o==null?void 0:o.grand_total)})})]})},fe=ve,K=r(80737),me=r(69677),ge=function(p){var o=K.Z.useForm(),m=Z()(o,1),b=m[0],y=function(){},g=["john.doe@example.com","jane.doe@example.com","alex.smith@example.com","emily.nguyen@example.com","david.lee@example.com"];return(0,e.jsx)(M.Z,{title:(0,e.jsxs)(a.Z,{style:{fontSize:16},children:["Send to Customers ",(0,e.jsx)("span",{style:{fontWeight:"bold"},children:p.title})]}),open:p.open,onOk:function(){},onCancel:function(){p.onCancel()},width:1200,children:(0,e.jsxs)(K.Z,{form:b,name:"add",onFinish:y,layout:"vertical",children:[(0,e.jsx)("div",{style:{padding:24,marginBottom:20,border:"1px solid  rgba(0, 0, 0, 0.06)"},children:(0,e.jsxs)(s.Z,{justify:"space-between",children:[(0,e.jsx)(t.Z,{xxl:14,sm:14,xs:24,children:(0,e.jsxs)(s.Z,{children:[(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(a.Z,{children:"No Faktur"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsx)(a.Z,{style:{fontSize:16},children:": IKI.__DEV__.1658-INV-011122-1658G"})}),(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(a.Z,{children:"Tanggal Faktur"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsx)(a.Z,{style:{fontSize:16,fontWeight:"bold"},children:": Nov 12 2020"})}),(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(a.Z,{children:"Due Date"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsx)(a.Z,{style:{fontSize:16,fontWeight:"bold"},children:": Nov 12 2020"})}),(0,e.jsx)(t.Z,{span:4,children:(0,e.jsx)(a.Z,{children:"No eFaktur"})}),(0,e.jsx)(t.Z,{span:20,children:(0,e.jsx)(a.Z,{style:{fontSize:16,fontWeight:"bold"},children:": 0eee3ed8-2110-4d9c-b790-593bdb30d3b7"})})]})}),(0,e.jsxs)(t.Z,{xxl:10,sm:10,xs:24,children:[(0,e.jsx)(a.Z.Text,{strong:!0,children:"Catatan Invoice"}),(0,e.jsx)(a.Z.Paragraph,{style:{maxWidth:400},children:"Lorem ipsum dolor sit amet, vince adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco"})]})]})}),(0,e.jsxs)(s.Z,{gutter:[16,16],children:[(0,e.jsxs)(t.Z,{span:24,children:[(0,e.jsx)(a.Z,{children:"Email"}),(0,e.jsx)(s.Z,{style:{border:"1px solid rgba(0, 0, 0, 0.06)",padding:"24px 16px",marginTop:"20px"},gutter:[18,16],children:g.map(function(j){return(0,e.jsx)(t.Z,{children:(0,e.jsxs)(a.Z.Link,{style:{fontSize:16,border:"1px solid #91D5FF",padding:"4px 10px"},children:[j," ",(0,e.jsx)("span",{style:{color:" rgba(0, 0, 0, 0.45)"},children:"x"})]})},j)})})]}),(0,e.jsxs)(t.Z,{span:24,children:[(0,e.jsx)(a.Z,{children:"CC"}),(0,e.jsx)(s.Z,{style:{border:"1px solid rgba(0, 0, 0, 0.06)",padding:"24px 16px",marginTop:"20px"},gutter:[18,16],children:g.map(function(j){return(0,e.jsx)(t.Z,{children:(0,e.jsxs)(a.Z.Link,{style:{fontSize:16,border:"1px solid #91D5FF",padding:"4px 10px"},children:[j," ",(0,e.jsx)("span",{style:{color:" rgba(0, 0, 0, 0.45)"},children:"x"})]})})})})]}),(0,e.jsx)(t.Z,{span:24,children:(0,e.jsx)(K.Z.Item,{label:"Catatan Email",name:"email_note",rules:[{required:!0,message:"Please input Catatan Email!"}],requiredMark:"optional",children:(0,e.jsx)(me.Z.TextArea,{placeholder:"Catatan Email"})})}),(0,e.jsx)(t.Z,{children:(0,e.jsx)(K.Z.Item,{label:"Attach Invoice (Hasil Generate Invoice)"})})]})]})})},pe=ge,xe=r(46293),Y=r(75539),je=r(9212);V().locale("en");var B=O.Z.Column,_=function(){var W=x()(f()().mark(function p(o){var m,b;return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,fetch(o);case 2:return m=g.sent,g.next=5,m.blob();case 5:return b=g.sent,g.abrupt("return",new Promise(function(j){var S=new FileReader;S.readAsDataURL(b),S.onloadend=function(){var w=S.result;j(w)}}));case 7:case"end":return g.stop()}},p)}));return function(o){return W.apply(this,arguments)}}(),q=function(p){return p==null?void 0:p.toLocaleString("id-ID",{style:"currency",currency:"IDR"})},Ze=function(p){var o,m,b,y,g;C()(p);var j=(0,G.useParams)(),S=j.id,w=P.useState({}),ee=Z()(w,2),n=ee[0],Ie=ee[1],be=P.useState(!1),ne=Z()(be,2),Ce=ne[0],k=ne[1],Ee=P.useState(!1),re=Z()(Ee,2),Te=re[0],Fe=re[1],De=P.useState(""),te=Z()(De,2),Pe=te[0],Be=te[1],Se=P.useState(""),ae=Z()(Se,2),Ae=ae[0],Ne=ae[1];P.useEffect(function(){if(n.id){var c=function(){var d=x()(f()().mark(function l(){var i,u,h,$;return f()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,_(n==null||(i=n.Nebula_Area)===null||i===void 0?void 0:i.photo);case 2:return h=A.sent,A.next=5,_(n==null||(u=n.Nebula_Node_Type)===null||u===void 0?void 0:u.icon);case 5:$=A.sent,Ne(h),Be($);case 8:case"end":return A.stop()}},l)}));return function(){return d.apply(this,arguments)}}();c()}},[n]);var le=function(){var c=x()(f()().mark(function d(){var l;return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return k(!0),u.next=3,(0,he.W)(S);case 3:l=u.sent,k(!1),l.error||Ie(l.data);case 6:case"end":return u.stop()}},d)}));return function(){return c.apply(this,arguments)}}();P.useEffect(function(){le()},[S]);var Me=function(){var d,l=(d=document.getElementById("invoice"))!==null&&d!==void 0?d:document.createElement("div");(0,xe.rT)(l,{pixelRatio:1}).then(function(i){var u=new de.ZP("p","px","a4"),h=u.getImageProperties(i),$=u.internal.pageSize.getWidth(),ie=h.height*$/h.width;u.addImage(i,"PNG",0,0,$,ie),u.save("".concat(n==null?void 0:n.invoice,".pdf"))}).catch(function(i){console.log(i,"ERR")})},Re=function(){var c=x()(f()().mark(function d(l){var i;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,k(!0),h.next=4,je.Z.post("/billing/change/status/"+S,{status:l});case 4:i=h.sent,k(!1),i.status&&(le(),H.ZP.success(i.data.message)),h.next=11;break;case 9:h.prev=9,h.t0=h.catch(0);case 11:case"end":return h.stop()}},d,null,[[0,9]])}));return function(l){return c.apply(this,arguments)}}(),J=function(d){M.Z.confirm({title:"Are you sure to ".concat(d," this billing ?"),okText:"Yes",cancelText:"No",onOk:function(){Re(d)}})};return(0,e.jsx)(z._z,{childrenContentStyle:{minHeight:"70vh"},title:(0,e.jsx)(D.Z,{type:"link",onClick:function(){return G.history.push("/transaction?tab=billing")},size:"large",children:(0,e.jsxs)(I.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(ue.Z,{onClick:function(){return G.history.push("/transaction?tab=billing")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(E.Z.Item,{children:"Billing and Invoice"}),(0,e.jsx)(E.Z.Item,{href:"#",children:"Invoice"})]}),(0,e.jsx)(a.Z.Title,{level:5,children:"Invoice"})]})]})}),children:(0,e.jsxs)(T.Z,{spinning:Ce,children:[(0,e.jsxs)(G.Helmet,{children:[(0,e.jsx)("title",{children:"AAT IoT Platform | Detail Billing "}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsx)(pe,{title:n==null||(o=n.Nebula_Area)===null||o===void 0?void 0:o.area_name,open:Te,onOk:function(){},onCancel:function(){Fe(!1)}}),(0,e.jsx)(F.Z,{style:{marginTop:0}}),(0,e.jsxs)(s.Z,{justify:"space-between",children:[(0,e.jsx)(t.Z,{children:(0,e.jsx)(I.Z,{children:(0,e.jsx)(D.Z,{onClick:Me,icon:(0,e.jsx)(ce.Z,{}),children:"Export Pdf"})})}),(0,e.jsxs)(t.Z,{style:{display:"flex",gap:"8px"},children:[n.status=="new"?(0,e.jsx)(D.Z,{onClick:function(){return J("unpaid")},children:"Unpaid"}):null,n.status=="unpaid"?(0,e.jsx)(D.Z,{onClick:function(){return J("paid")},children:"Paid"}):null,n.status=="new"||n.status=="unpaid"?(0,e.jsx)(D.Z,{danger:!0,onClick:function(){return J("cancel")},children:"Cancel"}):null]})]}),(0,e.jsx)(F.Z,{style:{backgroundColor:"#1890FF",height:2}}),(0,e.jsxs)("div",{id:"invoice",style:{padding:20},children:[(0,e.jsx)(s.Z,{wrap:!0,justify:"space-between",style:{width:"100%"},children:(0,e.jsx)(t.Z,{span:24,children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"12px"},children:[(0,e.jsx)("img",{width:114,alt:n==null||(m=n.Nebula_Area)===null||m===void 0?void 0:m.area_name,src:Ae}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start"},children:(0,e.jsx)(a.Z.Title,{level:3,style:{width:200},children:n==null||(b=n.Nebula_Area)===null||b===void 0?void 0:b.area_name})})]})})}),(0,e.jsxs)(s.Z,{justify:"space-between",style:{background:"linear-gradient(285.34deg, #4776E6 0%, #8E54E9 98.2%)",borderRadius:"16px",margin:"20px 0px",padding:24},children:[(0,e.jsxs)(t.Z,{children:[(0,e.jsx)(X.Z,{color:"#E6F7FF",style:{color:"#1890FF",borderRadius:100},children:"Draft Invoice"}),(0,e.jsx)(a.Z,{style:{fontSize:16,color:"#ffffff",marginTop:"14px"},children:"Invoice Number"}),(0,e.jsx)(a.Z,{style:{color:"#ffffff",fontWeight:500},children:n==null?void 0:n.invoice}),(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(a.Z,{style:{color:"#ffffff"},children:"Invoice Date :"}),(0,e.jsx)(a.Z,{style:{color:"#ffffff",fontWeight:500},children:V()(n==null?void 0:n.cut_date).format("MMM DD YYYY")})]})]}),(0,e.jsxs)(t.Z,{style:{textAlign:"right"},children:[(0,e.jsx)(X.Z,{color:(n==null?void 0:n.status)==="new"?"cyan":(n==null?void 0:n.status)==="paid"?"green":(n==null?void 0:n.status)==="unpaid"?"orange":(n==null?void 0:n.status)==="cancel"?"red":"cyan",style:{borderRadius:100,border:"1px solid #ffffff",textTransform:"capitalize"},children:n==null?void 0:n.status}),(0,e.jsx)(a.Z,{style:{fontSize:16,color:"#FFFFFF"},children:"Billed to"}),(0,e.jsx)(a.Z,{style:{fontSize:28,color:"#FFFFFF"},children:n==null||(y=n.Nebula_Tenant)===null||y===void 0?void 0:y.name}),(0,e.jsx)(a.Z,{style:{maxWidth:312,color:"#ffffff"},children:n==null||(g=n.Nebula_Tenant)===null||g===void 0?void 0:g.address})]})]}),(0,e.jsx)(a.Z.Title,{level:4,children:"Bill for this month"}),(0,e.jsxs)(O.Z,{dataSource:[n,{},n,n,n],pagination:!1,size:"middle",scroll:{},children:[(0,e.jsx)(B,{title:"Month",dataIndex:"periode",render:function(d,l,i){return i==0?V()(d).format("MMMM YYYY"):""}},"month"),(0,e.jsx)(B,{title:"Type",dataIndex:"Nebula_Node_Type",render:function(d,l,i){return i==0?(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(se.C,{src:Pe,alt:"icon-type"}),(0,e.jsx)(a.Z,{children:d==null?void 0:d.name})]}):""}},"Nebula_Node_Type"),(0,e.jsx)(B,{title:"Usage (m3)",dataIndex:"usage",render:function(d,l,i){return i==0?(0,Y.qi)(d):""}},"usage"),(0,e.jsx)(B,{title:"Minimum Usage",dataIndex:"min_usage_threshold",render:function(d,l,i){return i==0?(0,Y.qi)(d):""}},"min_usage_value"),(0,e.jsx)(B,{align:"right",title:"Total Usage (m3)",dataIndex:"billing_usage",width:250,render:function(d,l,i){if(i==0)return(0,Y.qi)(d);if(i==1)return(0,e.jsx)(a.Z,{style:{textAlign:"left"},children:"Tiered pricing"});var u=i-1,h=" < ";return u==1?h=" < ":(u==2||u==3)&&(h=" >= "),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,e.jsxs)(a.Z,{style:{textAlign:"right"},children:[h,l==null?void 0:l["parameter_".concat(u)]]}),(0,e.jsx)(a.Z,{children:(0,Y.qi)(l==null?void 0:l["usage_parameter_".concat(u)])})]})}},"total_usage"),(0,e.jsx)(B,{title:"Price",dataIndex:"price",align:"right",render:function(d,l,i){if(i==0)return"";var u=i-1;return q(l==null?void 0:l["price_parameter_".concat(u)])}},"price"),(0,e.jsx)(B,{title:"Total",dataIndex:"total",align:"right",render:function(d,l,i){if(i==0)return"";var u=i-1;return q(l==null?void 0:l["amount_parameter_".concat(u)])}},"total")]}),(0,e.jsx)(s.Z,{gutter:[16,16],justify:"space-between",style:{marginTop:40},children:(0,e.jsx)(t.Z,{span:24,children:(0,e.jsx)(fe,{data:n})})})]})]})})},ye=Ze},41231:function(Q,N,r){r.d(N,{W:function(){return D},t:function(){return H}});var L=r(11281),Z=r.n(L),U=r(97983),C=r.n(U),R=r(40794),f=r.n(R),v=r(12461),x=r(9669),z=r.n(x),O=r(9212);function H(I){return M.apply(this,arguments)}function M(){return M=f()(C()().mark(function I(E){var a,T;return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.Z.get("/billing",Z()({method:"GET"},E||{}));case 3:return a=s.sent,T=a.data,s.abrupt("return",{data:T.data,error:!1,message:"Success Get",responseCode:T.responseCode});case 8:if(s.prev=8,s.t0=s.catch(0),!z().isAxiosError(s.t0)){s.next=16;break}return console.log("error message: ",s.t0.message),v.ZP.error(s.t0.message),s.abrupt("return",{data:null,error:!0,message:s.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",s.t0),v.ZP.error("An unexpected error occurred"),s.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return s.stop()}},I,null,[[0,8]])})),M.apply(this,arguments)}var D=function(){var I=f()(C()().mark(function E(a){var T,F;return C()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.Z.get("/billing/"+a,{method:"GET"});case 3:return T=t.sent,F=T.data,t.abrupt("return",{data:F.data,error:!1,message:"Success Get",responseCode:F.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!z().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),v.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),v.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},E,null,[[0,8]])}));return function(a){return I.apply(this,arguments)}}()}}]);
