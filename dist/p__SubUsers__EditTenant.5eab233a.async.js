"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8282],{82826:function(V,M,r){r.d(M,{Z:function(){return A}});var f=r(1413),d=r(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},g=I,x=r(84089),p=function(h,i){return d.createElement(x.Z,(0,f.Z)((0,f.Z)({},h),{},{ref:i,icon:g}))};p.displayName="ArrowLeftOutlined";var A=d.forwardRef(p)},11555:function(V,M,r){r.r(M);var f=r(97983),d=r.n(f),I=r(40794),g=r.n(I),x=r(12741),p=r.n(x),A=r(5200),U=r.n(A),h=r(98435),i=r(87806),_=r(82826),u=r(38402),c=r(30028),o=r(80737),W=r(14538),Z=r(71577),L=r(26713),D=r(58492),m=r(21802),O=r(27049),w=r(11382),T=r(71230),t=r(15746),j=r(69677),F=r(40038),s=r(67294),S=r(64593),e=r(85893),B=function(y){return new Promise(function(N,z){var v=new FileReader;v.readAsDataURL(y),v.onload=function(){return N(v.result)},v.onerror=function($){return z($)}})},K=function(y){U()(y);var N=o.Z.useForm(),z=p()(N,1),v=z[0],$=(0,c.useLocation)(),E=$.state,q=s.useState([]),G=p()(q,2),de=G[0],H=G[1],ee=(0,s.useState)(!1),k=p()(ee,2),_e=k[0],re=k[1],ne=s.useState(!1),J=p()(ne,2),te=J[0],Q=J[1],ae=(0,s.useState)(""),X=p()(ae,2),ue=X[0],se=X[1],le=(0,s.useState)(""),Y=p()(le,2),ce=Y[0],ie=Y[1],me=function(l){var n=l.fileList;return H(n)},he=function(){var a=g()(d()().mark(function l(n){return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(!n.url&&!n.preview)){P.next=4;break}return P.next=3,B(n.originFileObj);case 3:n.preview=P.sent;case 4:se(n.url||n.preview),re(!0),ie(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return P.stop()}},l)}));return function(n){return a.apply(this,arguments)}}();console.log(E.dataEdit),s.useEffect(function(){if(E.dataEdit){var a,l;v.setFields([{name:"name",value:E.dataEdit.name},{name:"email",value:E.dataEdit.email},{name:"email",value:E.dataEdit.email},{name:"phone",value:E.dataEdit.phone},{name:"role",value:E.dataEdit.role},{name:"area_id",value:(a=E.dataEdit)===null||a===void 0||(l=a.Nebula_Area)===null||l===void 0?void 0:l.id},{name:"address",value:E.dataEdit.address}]),H([{uid:"1",name:"default logo",status:"done",url:E.dataEdit.photo}])}else c.history.push("/users/company")},[E.dataEdit]);var oe=function(){var a=g()(d()().mark(function l(n){var C;return d()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return console.log(n),Q(!0),R.next=4,(0,i.L)({name:n.name,phone:n.phone,email:n.email,id:E.dataEdit.id,password:n.newPassword});case 4:C=R.sent,Q(!1),C.error?W.Z.error({content:C.message}):W.Z.success({content:C.message,onOk:function(){c.history.back()}});case 7:case"end":return R.stop()}},l)}));return function(n){return a.apply(this,arguments)}}();return(0,e.jsxs)(u._z,{breadcrumb:void 0,title:(0,e.jsx)(Z.Z,{type:"link",onClick:function(){return c.history.push("/users")},size:"large",children:(0,e.jsxs)(L.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(_.Z,{onClick:function(){return c.history.push("/users")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(D.Z,{children:[(0,e.jsx)(D.Z.Item,{children:"User Management"}),(0,e.jsx)(D.Z.Item,{href:"#",children:"Edit User"})]}),(0,e.jsx)(m.Z.Title,{level:5,children:"Edit User"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(S.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"IKI IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"/Sinar-mas.png",type:"image/x-icon"})]}),(0,e.jsx)(O.Z,{style:{paddingTop:0,marginTop:0}}),(0,e.jsx)(w.Z,{spinning:te,children:(0,e.jsx)(o.Z,{form:v,name:"add-area",onFinish:oe,style:{width:500,margin:"0px auto",paddingTop:20},children:(0,e.jsxs)(T.Z,{gutter:16,children:[(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Full Name"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"name",rules:[{required:!0,message:"Please input full name!"}],requiredMark:"optional",children:(0,e.jsx)(j.Z,{placeholder:"Full Name"})})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Email"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"email",rules:[{required:!0,message:"Please input email!",type:"email"}],requiredMark:"optional",children:(0,e.jsx)(j.Z,{placeholder:"Email",disabled:!0})})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Phone"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"phone",rules:[{required:!0,message:"Please input phone!"},{pattern:/^(\+62|62|0)8[1-9][0-9]{6,13}$/g,message:"Phone not valid!"}],requiredMark:"optional",children:(0,e.jsx)(j.Z,{placeholder:"Phone"})})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Role"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"role",rules:[{required:!0,message:"Please select role!"}],requiredMark:"optional",children:(0,e.jsx)(F.Z,{placeholder:"Select Role",className:"not-rounded",disabled:!0,options:[{label:"Admin",value:"admin"},{label:"Area",value:"area"}],onChange:function(){v.setFieldsValue({area_id:void 0})}})})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:function(l,n){return l.role_id!==n.role_id},children:function(){return v.getFieldValue("role")=="area"?(0,e.jsx)(m.Z,{children:"Area"}):null}})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:function(l,n){return l.role_id!==n.role_id},children:function(){return v.getFieldValue("role")=="area"?(0,e.jsx)(o.Z.Item,{name:"area_id",rules:[{required:!0,message:"Please input Area!"}],requiredMark:"optional",children:(0,e.jsx)(h.U,{disabled:!0})}):null}})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Address"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"address",requiredMark:"optional",children:(0,e.jsx)(j.Z.TextArea,{placeholder:"Address"})})}),(0,e.jsx)(t.Z,{span:24,children:(0,e.jsx)(O.Z,{})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"New Password"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please input password!"}],requiredMark:"optional",children:(0,e.jsx)(j.Z.Password,{placeholder:"Input Password"})})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(m.Z,{children:"Retype Password"})}),(0,e.jsx)(t.Z,{span:12,children:(0,e.jsx)(o.Z.Item,{name:"retypePassword",requiredMark:"optional",rules:[{required:!0,message:"Please input password!"},function(a){var l=a.getFieldValue;return{validator:function(C,P){return!P||l("newPassword")===P?Promise.resolve():Promise.reject(new Error("Passwords not match!"))}}}],children:(0,e.jsx)(j.Z.Password,{placeholder:"Retype Password"})})}),(0,e.jsx)(t.Z,{offset:16,children:(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(o.Z.Item,{children:(0,e.jsx)(Z.Z,{type:"primary",htmlType:"submit",children:"Save"})}),(0,e.jsx)(o.Z.Item,{children:(0,e.jsx)(Z.Z,{type:"default",htmlType:"button",onClick:function(){return c.history.push("/users")},children:"Cancel"})})]})})]})})})]})};M.default=K},27049:function(V,M,r){var f=r(87462),d=r(4942),I=r(94184),g=r.n(I),x=r(67294),p=r(53124),A=function(h,i){var _={};for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&i.indexOf(u)<0&&(_[u]=h[u]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,u=Object.getOwnPropertySymbols(h);c<u.length;c++)i.indexOf(u[c])<0&&Object.prototype.propertyIsEnumerable.call(h,u[c])&&(_[u[c]]=h[u[c]]);return _},U=function(i){var _,u=x.useContext(p.E_),c=u.getPrefixCls,o=u.direction,W=i.prefixCls,Z=i.type,L=Z===void 0?"horizontal":Z,D=i.orientation,m=D===void 0?"center":D,O=i.orientationMargin,w=i.className,T=i.children,t=i.dashed,j=i.plain,F=A(i,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),s=c("divider",W),S=m.length>0?"-".concat(m):m,e=!!T,B=m==="left"&&O!=null,K=m==="right"&&O!=null,b=g()(s,"".concat(s,"-").concat(L),(_={},(0,d.Z)(_,"".concat(s,"-with-text"),e),(0,d.Z)(_,"".concat(s,"-with-text").concat(S),e),(0,d.Z)(_,"".concat(s,"-dashed"),!!t),(0,d.Z)(_,"".concat(s,"-plain"),!!j),(0,d.Z)(_,"".concat(s,"-rtl"),o==="rtl"),(0,d.Z)(_,"".concat(s,"-no-default-orientation-margin-left"),B),(0,d.Z)(_,"".concat(s,"-no-default-orientation-margin-right"),K),_),w),y=(0,f.Z)((0,f.Z)({},B&&{marginLeft:O}),K&&{marginRight:O});return x.createElement("div",(0,f.Z)({className:b},F,{role:"separator"}),T&&L!=="vertical"&&x.createElement("span",{className:"".concat(s,"-inner-text"),style:y},T))};M.Z=U}}]);
