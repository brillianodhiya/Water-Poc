"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2098],{91714:function(w,I,e){e.d(I,{Z:function(){return m}});var y=e(1413),i=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},D=Z,B=e(84089),u=function(v,M){return i.createElement(B.Z,(0,y.Z)((0,y.Z)({},v),{},{ref:M,icon:D}))};u.displayName="ClockCircleOutlined";var m=i.forwardRef(u)},39173:function(w,I,e){e.d(I,{w:function(){return K}});var y=e(97983),i=e.n(y),Z=e(40794),D=e.n(Z),B=e(12741),u=e.n(B),m=e(95971),R=e(83652),v=e(67294),M=e(85893),K=function(O){var $=O.onChange,P=O.areaId,o=O.value,f=O.style,l=O.type,a=l===void 0?"not-rounded":l,_=O.useAll,p=O.disabled,t=(0,v.useState)([]),s=u()(t,2),n=s[0],G=s[1],A=v.useState(!1),k=u()(A,2),N=k[0],b=k[1],z=function(g,j){var r;return((r=j==null?void 0:j.children)!==null&&r!==void 0?r:"").toLowerCase().includes(g.toLowerCase())},H=function(){var x=D()(i()().mark(function g(){var j;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return b(!0),U.next=3,(0,m.cH)({params:{area_id:P}});case 3:j=U.sent,console.log(j,"data tenant"),b(!1),j.error||G(j.data);case 7:case"end":return U.stop()}},g)}));return function(){return x.apply(this,arguments)}}();return v.useEffect(function(){return H(),function(){}},[P]),(0,M.jsxs)(R.Z,{showSearch:!0,value:o,placeholder:"Tenant Name",loading:N,onChange:$,className:a,optionFilterProp:"children",filterOption:z,disabled:p,children:[_&&(0,M.jsx)(R.Z.Option,{value:0,children:"All Tenant"},0),n.map(function(x){return(0,M.jsx)(R.Z.Option,{value:x.id,children:x.name},x.id)})]})}},3897:function(w,I,e){e.r(I);var y=e(97983),i=e.n(y),Z=e(40794),D=e.n(Z),B=e(12741),u=e.n(B),m=e(98435),R=e(39173),v=e(86873),M=e(72923),K=e(64173),W=e(82826),O=e(91714),$=e(71063),P=e(14776),o=e(66490),f=e(422),l=e(71577),a=e(26713),_=e(58492),p=e(67669),t=e(11382),s=e(71230),n=e(15746),G=e(30478),A=e(11486),k=e(22324),N=e(30381),b=e.n(N),z=e(29218),H=e.n(z),x=e(18537),g=e(67294),j=e(64593),r=e(85893);b().locale("en");var U=function(){var ae=o.Z.useForm(),ne=u()(ae,1),T=ne[0],te=g.useState({lat:-6.2,lng:106.816666}),J=u()(te,2),F=J[0],se=J[1],oe=g.useState(!1),Q=u()(oe,2),de=Q[0],X=Q[1],ie=g.useState(""),Y=u()(ie,2),le=Y[0],_e=Y[1],S=g.useRef(null),ue=g.useState(!0),q=u()(ue,2),me=q[0],V=q[1],ce=g.useState(!1),ee=u()(ce,2),pe=ee[0],re=ee[1],h=x.Z.parse(window.location.search);g.useEffect(function(){h.area_id&&T.setFields([{name:"area_id",value:parseInt(h==null?void 0:h.area_id)},{name:"tenant_id",value:parseInt(h==null?void 0:h.tenant_id)}])},[]),g.useEffect(function(){(0,v.B)(F.lat,F.lng).then(function(E){T.setFields([{name:"address",value:E}])})},[F]);var Ee=function(){var E=D()(i()().mark(function c(d){var L;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log(d),re(!0),C.next=4,(0,K.y_)({devEui:d.devEui.split(" ").join(""),model:d.brand,description:d.description,latitude:d.latitude,longitude:d.longitude,interval:d.interval,tenant_id:d.tenant_id,area_id:d.area_id,meter_id:d.meter_id});case 4:L=C.sent,re(!1),L.error?f.Z.error({content:L.message}):f.Z.success({content:L.message,onOk:function(){try{P.history.back()}catch{P.history.push("/device")}}});case 7:case"end":return C.stop()}},c)}));return function(d){return E.apply(this,arguments)}}(),fe=function(){var E=D()(i()().mark(function c(){var d,L;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return X(!0),C.next=3,(0,K.qW)({devEui:le.split(" ").join("")});case 3:d=C.sent,X(!1),d.error?(V(!0),T.setFields([{name:"devEui",errors:["Device Id Not Found"]}])):(V(!1),(L=d.data)!==null&&L!==void 0&&L.data||V(!0));case 6:case"end":return C.stop()}},c)}));return function(){return E.apply(this,arguments)}}();return(0,r.jsxs)($._zJ,{title:(0,r.jsx)(l.Z,{type:"link",onClick:function(){h.area_id?P.history.push("/area/tenant",{area_id:h.area_id,tenant_id:h.tenant_id||""}):P.history.push("/device")},size:"large",children:(0,r.jsxs)(a.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,r.jsx)(W.Z,{onClick:function(){h.area_id?P.history.push("/area/tenant",{area_id:h.area_id,tenant_id:h.tenant_id||""}):P.history.push("/device")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(_.Z.Item,{children:"Device Management"}),(0,r.jsx)(_.Z.Item,{href:"#",children:"Add Device"})]}),(0,r.jsx)(p.Z.Title,{level:5,children:"Add Device"})]})]})}),children:[(0,r.jsxs)(j.q,{children:[(0,r.jsx)("meta",{charSet:"utf-8"}),(0,r.jsx)("title",{children:"AAT IoT Platform | Device"}),(0,r.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,r.jsx)(t.Z,{spinning:pe,children:(0,r.jsxs)(o.Z,{form:T,name:"add-area",onFinish:Ee,layout:"vertical",children:[(0,r.jsxs)(s.Z,{style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingTop:20},gutter:[24,24],children:[(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(o.Z.Item,{label:"Installation Date",name:"installation_date",rules:[{required:!0,message:"Please input installation date!"}],requiredMark:"optional",initialValue:b()(),children:(0,r.jsx)(G.Z,{style:{width:"100%"},disabled:!0,className:"not-rounded"})}),(0,r.jsx)(o.Z.Item,{style:{},label:"Area Name",name:"area_id",rules:[{required:!0,message:"Please input area name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(m.U,{style:void 0,type:"",defaultArea0:!1,onChange:function(){T.setFields([{name:"tenant_id",value:void 0}])}})}),(0,r.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:function(c,d){return c.area_id!==d.area_id},children:function(){return(0,r.jsx)(o.Z.Item,{style:{},label:"Tenant Name",name:"tenant_id",rules:[{required:!0,message:"Please input tenant name!"}],requiredMark:"optional",className:"not-rounded",children:(0,r.jsx)(R.w,{onChange:function(){},areaId:T.getFieldValue("area_id"),style:void 0,type:""})})}}),(0,r.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return(0,r.jsx)(o.Z.Item,{requiredMark:"optional",name:"devEui",label:"Device Eui",rules:[{required:!0}],children:(0,r.jsx)(A.Z,{placeholder:"Device Eui",onChange:function(d){_e(d.target.value),T.setFields([{name:"devEui",value:d.target.value.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim()}])},onKeyUp:function(){S.current!==null&&window.clearTimeout(S.current),S.current=window.setTimeout(function(){fe()},1e3)},onKeyDown:function(){S.current!==null&&window.clearTimeout(S.current)},suffix:(0,r.jsx)(t.Z,{spinning:de})})})}})]}),(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(o.Z.Item,{label:"Meter Id",name:"meter_id",rules:[{required:!1,message:"Please input Meter Id!"}],children:(0,r.jsx)(A.Z,{placeholder:"Meter Id"})}),(0,r.jsx)(o.Z.Item,{label:"Model/Brand",name:"brand",rules:[{required:!1,message:"Please input Model/Brand!"}],children:(0,r.jsx)(A.Z,{placeholder:"Model/Brand"})}),(0,r.jsx)(o.Z.Item,{extra:"Minute",label:"Interval",name:"interval",initialValue:15,rules:[{required:!0,message:"Please input Interval!"}],requiredMark:"optional",children:(0,r.jsx)(k.Z,{prefix:(0,r.jsx)(O.Z,{})})}),(0,r.jsx)(o.Z.Item,{label:"Description",name:"description",rules:[{required:!1,message:"Please input description!"}],requiredMark:"optional",children:(0,r.jsx)(A.Z.TextArea,{placeholder:"Description",rows:3})})]}),(0,r.jsxs)(n.Z,{xs:24,sm:24,md:24,lg:12,xl:8,xxl:8,children:[(0,r.jsx)(M.Z,{center:F,onChange:function(c){se(c),T.setFields([{name:"latitude",value:c.lat},{name:"longitude",value:c.lng}])}}),(0,r.jsx)(o.Z.Item,{requiredMark:"optional",name:"address",label:"Address",children:(0,r.jsx)(A.Z.TextArea,{placeholder:"Address"})}),(0,r.jsxs)(a.Z,{wrap:!0,size:"large",style:{marginTop:"16px"},children:[(0,r.jsx)(o.Z.Item,{requiredMark:"optional",name:"latitude",label:"Latitude",initialValue:"-6.290690",rules:[{required:!0,message:"Masukkan Latitude"}],hidden:!0,children:(0,r.jsx)(A.Z,{placeholder:"Latitude"})}),(0,r.jsx)(o.Z.Item,{requiredMark:"optional",name:"longitude",label:"Longitude",initialValue:"107.141853",rules:[{required:!0,message:"Masukkan Longitude"}],hidden:!0,children:(0,r.jsx)(A.Z,{placeholder:"Longitude"})})]})]})]}),(0,r.jsx)("div",{style:{marginTop:20,textAlign:"right"},children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)(l.Z,{type:"default",htmlType:"button",onClick:function(){try{P.history.back()}catch{P.history.push("/device")}},children:"Cancel"})}),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)(l.Z,{type:"primary",onClick:function(){me?T.setFields([{name:"devEui",errors:["Device Id Not Found"]}]):T.submit()},children:"Submit"})})]})})]})})]})};I.default=U},95971:function(w,I,e){e.d(I,{GU:function(){return o},cH:function(){return K},mZ:function(){return $},rR:function(){return O}});var y=e(97983),i=e.n(y),Z=e(11281),D=e.n(Z),B=e(40794),u=e.n(B),m=e(12461),R=e(9669),v=e.n(R),M=e(9212);function K(f){return W.apply(this,arguments)}function W(){return W=u()(i()().mark(function f(l){var a,_;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.Z.get("/tenant",D()({method:"GET"},l||{}));case 3:return a=t.sent,_=a.data,t.abrupt("return",{data:_.data,error:!1,message:"Success Get",responseCode:_.responseCode});case 8:if(t.prev=8,t.t0=t.catch(0),!v().isAxiosError(t.t0)){t.next=16;break}return console.log("error message: ",t.t0.message),m.ZP.error(t.t0.message),t.abrupt("return",{data:null,error:!0,message:t.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",t.t0),m.ZP.error("An unexpected error occurred"),t.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return t.stop()}},f,null,[[0,8]])})),W.apply(this,arguments)}var O=function(){var f=u()(i()().mark(function l(a){var _,p,t;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,M.Z.put("/tenant/".concat(a.id),{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,member_id:a.member_id,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password,nama_unit:a.nama_unit,kode_unit:a.kode_unit},{headers:{"Content-Type":"multipart/form-data"}});case 3:return _=n.sent,p=_.data,n.abrupt("return",D()(D()({},p),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!v().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?m.ZP.error(t.data.message):m.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),m.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},l,null,[[0,8]])}));return function(a){return f.apply(this,arguments)}}(),$=function(){var f=u()(i()().mark(function l(a){var _,p,t;return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,M.Z.post("/tenant",{image:a.image,area_id:a.area_id,name:a.name,pic_name:a.pic_name,address:a.address,latitude:a.latitude,longitude:a.longitude,type:a.type,area_name:a.area_name,phone:a.phone,email:a.email,username:a.username,password:a.password},{headers:{"Content-Type":"multipart/form-data"}});case 3:return _=n.sent,p=_.data,n.abrupt("return",D()(D()({},p),{},{status:"ok",error:!1}));case 8:if(n.prev=8,n.t0=n.catch(0),!v().isAxiosError(n.t0)){n.next=17;break}return console.log("error message: ",n.t0.message),t=n.t0.response,t.data.message?m.ZP.error(t.data.message):m.ZP.error(n.t0.message),n.abrupt("return",{responseCode:400,message:n.t0.message,error:!0});case 17:return console.log("unexpected error: ",n.t0),m.ZP.error("An unexpected error occured"),n.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return n.stop()}},l,null,[[0,8]])}));return function(a){return f.apply(this,arguments)}}(),P=null,o=function(){var f=u()(i()().mark(function l(a){var _,p;return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,M.Z.get("/tenant/detail/".concat(a),{method:"GET"});case 3:return _=s.sent,p=_.data,s.abrupt("return",{data:p.data,error:!1,message:"Success Get",responseCode:p.responseCode});case 8:if(s.prev=8,s.t0=s.catch(0),!v().isAxiosError(s.t0)){s.next=16;break}return console.log("error message: ",s.t0.message),m.ZP.error(s.t0.message),s.abrupt("return",{data:null,error:!0,message:s.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",s.t0),m.ZP.error("An unexpected error occurred"),s.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return s.stop()}},l,null,[[0,8]])}));return function(a){return f.apply(this,arguments)}}()}}]);
