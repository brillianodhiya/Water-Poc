"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9366],{26730:function(K,h,r){r.r(h),r.d(h,{default:function(){return z}});var I=r(97983),o=r.n(I),U=r(11281),d=r.n(U),P=r(40794),g=r.n(P),A=r(12741),T=r.n(A),Z=r(36205),E=r(87547),F=r(94149),M=r(40481),j=r(88126),N=r(30028),$=r(14670),L=r(12461),y=r(67294),c={container:"container___REQAy",lang:"lang___DAjLY",content:"content___IkUx1",icon:"icon___fqAhh"},C=r(64593),R=r(25126),n=r(85893),G=function(m){var f=m.content;return(0,n.jsx)($.Z,{style:{marginBottom:24},message:f,type:"error",showIcon:!0})},O=function(){var m=(0,y.useState)({}),f=T()(m,2),S=f[0],H=f[1],p=(0,N.useModel)("@@initialState"),v=p.initialState,x=p.refresh,V=p.setInitialState,w=function(){var u=g()(o()().mark(function i(t){var a,s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v==null||(a=v.fetchUserInfo)===null||a===void 0?void 0:a.call(v,t);case 2:if(s=e.sent,!s){e.next=8;break}return console.log(s,"USER INFO"),e.next=7,V(function(J){return d()(d()({},J),{},{currentUser:s})});case 7:return e.abrupt("return",{type:"ok"});case 8:return e.abrupt("return",{type:"fail"});case 9:case"end":return e.stop()}},i)}));return function(t){return u.apply(this,arguments)}}(),D=function(){var u=g()(o()().mark(function i(t){var a,s;return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,R.pH)(d()(d()({},t),{},{email:t.email,password:t.password,autoLogin:t.autoLogin}));case 3:if(a=e.sent,console.log(a,"MSG"),a.responseCode!==200){e.next=15;break}return L.ZP.success(a.message),e.next=9,w(a.token);case 9:return e.next=11,x();case 11:return window.location.replace("/"),e.abrupt("return");case 15:console.log(a),H(a),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(0),s="Login Failed!",console.log(e.t0),L.ZP.error(s);case 24:case"end":return e.stop()}},i,null,[[0,19]])}));return function(t){return u.apply(this,arguments)}}(),Q=S.status,Y=S.type,k=function(){var u=g()(o()().mark(function i(){var t,a;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return t=window.localStorage.getItem("token")||"",l.next=3,w(t);case 3:return a=l.sent,l.next=6,x();case 6:a.type=="ok"&&window.location.replace("/");case 7:case"end":return l.stop()}},i)}));return function(){return u.apply(this,arguments)}}();return y.useEffect(function(){window.localStorage.getItem("token")&&k()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(C.q,{children:[(0,n.jsx)("meta",{charSet:"utf-8"}),(0,n.jsx)("title",{children:"AAT | Login"}),(0,n.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,n.jsxs)("div",{className:c.container,children:[(0,n.jsx)("div",{className:c.lang,"data-lang":!0}),(0,n.jsxs)("div",{className:c.content,children:[(0,n.jsx)("div",{style:{textAlign:"center",marginBottom:"24px"},children:(0,n.jsx)("img",{alt:"logo",src:"/logoaat.png",width:250})}),(0,n.jsxs)(M.U,{title:"Log in",subTitle:"Please input your information in the fields below to enter your account",initialValues:{autoLogin:!0},onFinish:function(){var u=g()(o()().mark(function i(t){return o()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,D(t);case 2:case"end":return s.stop()}},i)}));return function(i){return u.apply(this,arguments)}}(),className:"LoginPage",children:[Q==="error"&&Y==="account"&&(0,n.jsx)(G,{content:"Verification Code Error"}),(0,n.jsx)(j.Z,{name:"email",fieldProps:{size:"large",prefix:(0,n.jsx)(E.Z,{className:c.prefixIcon})},placeholder:"Email",rules:[{required:!0,message:"Email is required!"}],label:"Email",requiredMark:"optional"}),(0,n.jsx)(j.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(F.Z,{className:c.prefixIcon})},placeholder:"Password",rules:[{required:!0,message:"Password is required!"}],label:"Password"})]})]}),(0,n.jsx)(Z.Z,{})]})]})},z=O}}]);
