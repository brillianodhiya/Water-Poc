"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8282],{82826:function(G,T,r){r.d(T,{Z:function(){return f}});var M=r(1413),i=r(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},P=R,C=r(84089),E=function(c,u){return i.createElement(C.Z,(0,M.Z)((0,M.Z)({},c),{},{ref:u,icon:P}))};E.displayName="ArrowLeftOutlined";var f=i.forwardRef(E)},98435:function(G,T,r){r.d(T,{U:function(){return j}});var M=r(97983),i=r.n(M),R=r(40794),P=r.n(R),C=r(12741),E=r.n(C),f=r(4745),x=r(40038),c=r(67294),u=r(85893),j=function(d){var g=d.disabled,b=d.onChange,L=d.value,W=d.style,h=d.type,o=h===void 0?"not-rounded":h,t=d.useAll,m=d.defaultArea0,p=m===void 0?!1:m,n=(0,c.useState)([]),s=E()(n,2),l=s[0],a=s[1],w=c.useState(!1),e=E()(w,2),S=e[0],K=e[1],N=function(){var Z=P()(i()().mark(function F(){var U;return i()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return K(!0),B.next=3,(0,f.bg)({});case 3:U=B.sent,K(!1),U.error||(a(U.data),p&&U.data.length>0&&b(U.data[0].id));case 6:case"end":return B.stop()}},F)}));return function(){return Z.apply(this,arguments)}}();return c.useEffect(function(){N()},[]),(0,u.jsxs)(x.Z,{value:L,placeholder:"Area Name",loading:S,onChange:b,className:o,style:W,disabled:g,children:[t&&(0,u.jsx)(x.Z.Option,{value:0,children:"All Area"},0),l.map(function(Z){return(0,u.jsx)(x.Z.Option,{value:Z.id,children:Z.area_name},Z.id)})]})}},11555:function(G,T,r){r.r(T);var M=r(97983),i=r.n(M),R=r(40794),P=r.n(R),C=r(12741),E=r.n(C),f=r(5200),x=r.n(f),c=r(98435),u=r(87806),j=r(82826),v=r(38402),d=r(30028),g=r(80737),b=r(14538),L=r(71577),W=r(26713),h=r(58492),o=r(21802),t=r(27049),m=r(11382),p=r(71230),n=r(15746),s=r(69677),l=r(40038),a=r(67294),w=r(64593),e=r(85893),S=function(Z){return new Promise(function(F,U){var y=new FileReader;y.readAsDataURL(Z),y.onload=function(){return F(y.result)},y.onerror=function(B){return U(B)}})},K=function(Z){x()(Z);var F=g.Z.useForm(),U=E()(F,1),y=U[0],B=(0,d.useLocation)(),D=B.state,q=a.useState([]),z=E()(q,2),ue=z[0],V=z[1],ee=(0,a.useState)(!1),H=E()(ee,2),de=H[0],re=H[1],ae=a.useState(!1),J=E()(ae,2),ne=J[0],Q=J[1],se=(0,a.useState)(""),X=E()(se,2),_e=X[0],te=X[1],oe=(0,a.useState)(""),Y=E()(oe,2),me=Y[0],le=Y[1],ce=function(A){var _=A.fileList;return V(_)},pe=function(){var O=P()(i()().mark(function A(_){return i()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!_.url&&!_.preview)){I.next=4;break}return I.next=3,S(_.originFileObj);case 3:_.preview=I.sent;case 4:te(_.url||_.preview),re(!0),le(_.name||_.url.substring(_.url.lastIndexOf("/")+1));case 7:case"end":return I.stop()}},A)}));return function(_){return O.apply(this,arguments)}}();console.log(D.dataEdit),a.useEffect(function(){if(D.dataEdit){var O,A;y.setFields([{name:"name",value:D.dataEdit.name},{name:"email",value:D.dataEdit.email},{name:"email",value:D.dataEdit.email},{name:"phone",value:D.dataEdit.phone},{name:"role",value:D.dataEdit.role},{name:"area_id",value:(O=D.dataEdit)===null||O===void 0||(A=O.Nebula_Area)===null||A===void 0?void 0:A.id},{name:"address",value:D.dataEdit.address}]),V([{uid:"1",name:"default logo",status:"done",url:D.dataEdit.photo}])}else d.history.push("/users/company")},[D.dataEdit]);var ie=function(){var O=P()(i()().mark(function A(_){var $;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return console.log(_),Q(!0),k.next=4,(0,u.L)({name:_.name,phone:_.phone,email:_.email,id:D.dataEdit.id,password:_.newPassword});case 4:$=k.sent,Q(!1),$.error?b.Z.error({content:$.message}):b.Z.success({content:$.message,onOk:function(){d.history.back()}});case 7:case"end":return k.stop()}},A)}));return function(_){return O.apply(this,arguments)}}();return(0,e.jsxs)(v._z,{breadcrumb:void 0,title:(0,e.jsx)(L.Z,{type:"link",onClick:function(){return d.history.push("/users")},size:"large",children:(0,e.jsxs)(W.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(j.Z,{onClick:function(){return d.history.push("/users")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(h.Z.Item,{children:"User Management"}),(0,e.jsx)(h.Z.Item,{href:"#",children:"Edit User"})]}),(0,e.jsx)(o.Z.Title,{level:5,children:"Edit User"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(w.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"BITA IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"/Sinar-mas.png",type:"image/x-icon"})]}),(0,e.jsx)(t.Z,{style:{paddingTop:0,marginTop:0}}),(0,e.jsx)(m.Z,{spinning:ne,children:(0,e.jsx)(g.Z,{form:y,name:"add-area",onFinish:ie,style:{width:500,margin:"0px auto",paddingTop:20},children:(0,e.jsxs)(p.Z,{gutter:16,children:[(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Full Name"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"name",rules:[{required:!0,message:"Please input full name!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Full Name"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Email"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"email",rules:[{required:!0,message:"Please input email!",type:"email"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Email",disabled:!0})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Phone"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"phone",rules:[{required:!0,message:"Please input phone!"},{pattern:/^(\+62|62|0)8[1-9][0-9]{6,13}$/g,message:"Phone not valid!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z,{placeholder:"Phone"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Role"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"role",rules:[{required:!0,message:"Please select role!"}],requiredMark:"optional",children:(0,e.jsx)(l.Z,{placeholder:"Select Role",className:"not-rounded",disabled:!0,options:[{label:"Admin",value:"admin"},{label:"Area",value:"area"}],onChange:function(){y.setFieldsValue({area_id:void 0})}})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{noStyle:!0,shouldUpdate:function(A,_){return A.role_id!==_.role_id},children:function(){return y.getFieldValue("role")=="area"?(0,e.jsx)(o.Z,{children:"Area"}):null}})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{noStyle:!0,shouldUpdate:function(A,_){return A.role_id!==_.role_id},children:function(){return y.getFieldValue("role")=="area"?(0,e.jsx)(g.Z.Item,{name:"area_id",rules:[{required:!0,message:"Please input Area!"}],requiredMark:"optional",children:(0,e.jsx)(c.U,{disabled:!0})}):null}})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Address"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"address",requiredMark:"optional",children:(0,e.jsx)(s.Z.TextArea,{placeholder:"Address"})})}),(0,e.jsx)(n.Z,{span:24,children:(0,e.jsx)(t.Z,{})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"New Password"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please input password!"}],requiredMark:"optional",children:(0,e.jsx)(s.Z.Password,{placeholder:"Input Password"})})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(o.Z,{children:"Retype Password"})}),(0,e.jsx)(n.Z,{span:12,children:(0,e.jsx)(g.Z.Item,{name:"retypePassword",requiredMark:"optional",rules:[{required:!0,message:"Please input password!"},function(O){var A=O.getFieldValue;return{validator:function($,I){return!I||A("newPassword")===I?Promise.resolve():Promise.reject(new Error("Passwords not match!"))}}}],children:(0,e.jsx)(s.Z.Password,{placeholder:"Retype Password"})})}),(0,e.jsx)(n.Z,{offset:16,children:(0,e.jsxs)(W.Z,{children:[(0,e.jsx)(g.Z.Item,{children:(0,e.jsx)(L.Z,{type:"primary",htmlType:"submit",children:"Save"})}),(0,e.jsx)(g.Z.Item,{children:(0,e.jsx)(L.Z,{type:"default",htmlType:"button",onClick:function(){return d.history.push("/users")},children:"Cancel"})})]})})]})})})]})};T.default=K},4745:function(G,T,r){r.d(T,{OO:function(){return g},Ug:function(){return W},_J:function(){return b},bg:function(){return j},yz:function(){return d}});var M=r(11281),i=r.n(M),R=r(97983),P=r.n(R),C=r(40794),E=r.n(C),f=r(12461),x=r(9669),c=r.n(x),u=r(9212);function j(h){return v.apply(this,arguments)}function v(){return v=E()(P()().mark(function h(o){var t,m;return P()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.get("/area",i()({method:"GET"},o||{}));case 3:return t=n.sent,m=t.data,n.abrupt("return",{data:m.data,error:!1,message:"Success Get",responseCode:m.responseCode});case 8:if(n.prev=8,n.t0=n.catch(0),!c().isAxiosError(n.t0)){n.next=16;break}return console.log("error message: ",n.t0.message),f.ZP.error(n.t0.message),n.abrupt("return",{data:null,error:!0,message:n.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",n.t0),f.ZP.error("An unexpected error occurred"),n.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return n.stop()}},h,null,[[0,8]])})),v.apply(this,arguments)}var d=function(){var h=E()(P()().mark(function o(t){var m,p;return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,u.Z.get("/area/detail/".concat(t),{method:"GET"});case 3:return m=s.sent,p=m.data,s.abrupt("return",{data:p.data,error:!1,message:"Success Get",responseCode:p.responseCode});case 8:if(s.prev=8,s.t0=s.catch(0),!c().isAxiosError(s.t0)){s.next=16;break}return console.log("error message: ",s.t0.message),f.ZP.error(s.t0.message),s.abrupt("return",{data:null,error:!0,message:s.t0.message,responseCode:400});case 16:return console.log("unexpected error: ",s.t0),f.ZP.error("An unexpected error occurred"),s.abrupt("return",{data:null,error:!0,message:"An unexpected error occurred",responseCode:400});case 19:case"end":return s.stop()}},o,null,[[0,8]])}));return function(t){return h.apply(this,arguments)}}(),g=function(){var h=E()(P()().mark(function o(t){var m,p,n;return P()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,u.Z.post("/area",{company_name:t.company_name,area_name:t.area_name,pic_name:t.pic_name,billing_address:t.billing_address,image:t.image,phone:t.phone,email_pic:t.email_pic,email_pic_admin:t.email_pic_admin,address:t.address,latitude:t.latitude,longitude:t.longitude},{headers:{"Content-Type":"multipart/form-data"}});case 3:return m=l.sent,p=m.data,l.abrupt("return",i()(i()({},p),{},{status:"ok",error:!1}));case 8:if(l.prev=8,l.t0=l.catch(0),!c().isAxiosError(l.t0)){l.next=17;break}return console.log("error message: ",l.t0.message),n=l.t0.response,n.data.message?f.ZP.error(n.data.message):f.ZP.error(l.t0.message),l.abrupt("return",{responseCode:400,message:l.t0.message,error:!0});case 17:return console.log("unexpected error: ",l.t0),f.ZP.error("An unexpected error occured"),l.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return l.stop()}},o,null,[[0,8]])}));return function(t){return h.apply(this,arguments)}}(),b=function(){var h=E()(P()().mark(function o(t,m){var p,n,s;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.Z.post("/area/setting/"+m,i()({},t));case 3:return p=a.sent,n=p.data,a.abrupt("return",i()(i()({},n),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!c().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),s=a.t0.response,s.data.message?f.ZP.error(s.data.message):f.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),f.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},o,null,[[0,8]])}));return function(t,m){return h.apply(this,arguments)}}(),L=null,W=function(){var h=E()(P()().mark(function o(t,m){var p,n,s;return P()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u.Z.put("/area/"+m,t);case 3:return p=a.sent,n=p.data,a.abrupt("return",i()(i()({},n),{},{status:"ok",error:!1}));case 8:if(a.prev=8,a.t0=a.catch(0),!c().isAxiosError(a.t0)){a.next=17;break}return console.log("error message: ",a.t0.message),s=a.t0.response,s.data.message?f.ZP.error(s.data.message):f.ZP.error(a.t0.message),a.abrupt("return",{responseCode:400,message:a.t0.message,error:!0});case 17:return console.log("unexpected error: ",a.t0),f.ZP.error("An unexpected error occured"),a.abrupt("return",{responseCode:400,message:"An unexpected error occured",error:!0});case 20:case"end":return a.stop()}},o,null,[[0,8]])}));return function(t,m){return h.apply(this,arguments)}}()},27049:function(G,T,r){var M=r(87462),i=r(4942),R=r(94184),P=r.n(R),C=r(67294),E=r(53124),f=function(c,u){var j={};for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&u.indexOf(v)<0&&(j[v]=c[v]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,v=Object.getOwnPropertySymbols(c);d<v.length;d++)u.indexOf(v[d])<0&&Object.prototype.propertyIsEnumerable.call(c,v[d])&&(j[v[d]]=c[v[d]]);return j},x=function(u){var j,v=C.useContext(E.E_),d=v.getPrefixCls,g=v.direction,b=u.prefixCls,L=u.type,W=L===void 0?"horizontal":L,h=u.orientation,o=h===void 0?"center":h,t=u.orientationMargin,m=u.className,p=u.children,n=u.dashed,s=u.plain,l=f(u,["prefixCls","type","orientation","orientationMargin","className","children","dashed","plain"]),a=d("divider",b),w=o.length>0?"-".concat(o):o,e=!!p,S=o==="left"&&t!=null,K=o==="right"&&t!=null,N=P()(a,"".concat(a,"-").concat(W),(j={},(0,i.Z)(j,"".concat(a,"-with-text"),e),(0,i.Z)(j,"".concat(a,"-with-text").concat(w),e),(0,i.Z)(j,"".concat(a,"-dashed"),!!n),(0,i.Z)(j,"".concat(a,"-plain"),!!s),(0,i.Z)(j,"".concat(a,"-rtl"),g==="rtl"),(0,i.Z)(j,"".concat(a,"-no-default-orientation-margin-left"),S),(0,i.Z)(j,"".concat(a,"-no-default-orientation-margin-right"),K),j),m),Z=(0,M.Z)((0,M.Z)({},S&&{marginLeft:t}),K&&{marginRight:t});return C.createElement("div",(0,M.Z)({className:N},l,{role:"separator"}),p&&W!=="vertical"&&C.createElement("span",{className:"".concat(a,"-inner-text"),style:Z},p))};T.Z=x}}]);
