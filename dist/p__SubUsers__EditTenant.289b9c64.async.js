"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8282],{82826:function(V,v,r){r.d(v,{Z:function(){return O}});var P=r(1413),m=r(67294),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},f=x,D=r(84089),_=function(M,Z){return m.createElement(D.Z,(0,P.Z)((0,P.Z)({},M),{},{ref:Z,icon:f}))};_.displayName="ArrowLeftOutlined";var O=m.forwardRef(_)},11555:function(V,v,r){r.r(v);var P=r(97983),m=r.n(P),x=r(40794),f=r.n(x),D=r(12741),_=r.n(D),O=r(5200),R=r.n(O),M=r(98435),Z=r(87806),k=r(82826),N=r(71063),c=r(14776),l=r(66490),U=r(422),g=r(71577),y=r(26713),A=r(58492),u=r(67669),w=r(27049),$=r(11382),G=r(71230),a=r(15746),h=r(11486),H=r(83652),p=r(67294),J=r(64593),e=r(85893),Q=function(I){return new Promise(function(T,L){var d=new FileReader;d.readAsDataURL(I),d.onload=function(){return T(d.result)},d.onerror=function(C){return L(C)}})},X=function(I){R()(I);var T=l.Z.useForm(),L=_()(T,1),d=L[0],C=(0,c.useLocation)(),i=C.state,q=p.useState([]),B=_()(q,2),oe=B[0],K=B[1],ee=(0,p.useState)(!1),W=_()(ee,2),_e=W[0],re=W[1],ne=p.useState(!1),S=_()(ne,2),ae=S[0],F=S[1],se=(0,p.useState)(""),b=_()(se,2),ue=b[0],te=b[1],le=(0,p.useState)(""),z=_()(le,2),me=z[0],ie=z[1],ce=function(t){var n=t.fileList;return K(n)},he=function(){var s=f()(m()().mark(function t(n){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!n.url&&!n.preview)){o.next=4;break}return o.next=3,Q(n.originFileObj);case 3:n.preview=o.sent;case 4:te(n.url||n.preview),re(!0),ie(n.name||n.url.substring(n.url.lastIndexOf("/")+1));case 7:case"end":return o.stop()}},t)}));return function(n){return s.apply(this,arguments)}}();console.log(i.dataEdit),p.useEffect(function(){if(i.dataEdit){var s,t;d.setFields([{name:"name",value:i.dataEdit.name},{name:"email",value:i.dataEdit.email},{name:"email",value:i.dataEdit.email},{name:"phone",value:i.dataEdit.phone},{name:"role",value:i.dataEdit.role},{name:"area_id",value:(s=i.dataEdit)===null||s===void 0||(t=s.Nebula_Area)===null||t===void 0?void 0:t.id},{name:"address",value:i.dataEdit.address}]),K([{uid:"1",name:"default logo",status:"done",url:i.dataEdit.photo}])}else c.history.push("/users/company")},[i.dataEdit]);var de=function(){var s=f()(m()().mark(function t(n){var E;return m()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return console.log(n),F(!0),j.next=4,(0,Z.L)({name:n.name,phone:n.phone,email:n.email,id:i.dataEdit.id,password:n.newPassword});case 4:E=j.sent,F(!1),E.error?U.Z.error({content:E.message}):U.Z.success({content:E.message,onOk:function(){c.history.back()}});case 7:case"end":return j.stop()}},t)}));return function(n){return s.apply(this,arguments)}}();return(0,e.jsxs)(N._zJ,{breadcrumb:void 0,title:(0,e.jsx)(g.Z,{type:"link",onClick:function(){return c.history.push("/users")},size:"large",children:(0,e.jsxs)(y.Z,{style:{cursor:"pointer"},align:"start",size:"large",children:[(0,e.jsx)(k.Z,{onClick:function(){return c.history.push("/users")},style:{marginTop:"12px",fontSize:"24px",color:"#000"}}),(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"left"},children:[(0,e.jsxs)(A.Z,{children:[(0,e.jsx)(A.Z.Item,{children:"User Management"}),(0,e.jsx)(A.Z.Item,{href:"#",children:"Edit User"})]}),(0,e.jsx)(u.Z.Title,{level:5,children:"Edit User"})]})]})}),style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},children:[(0,e.jsxs)(J.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | User Management"}),(0,e.jsx)("link",{rel:"icon",href:"/Sinar-mas.png",type:"image/x-icon"})]}),(0,e.jsx)(w.Z,{style:{paddingTop:0,marginTop:0}}),(0,e.jsx)($.Z,{spinning:ae,children:(0,e.jsx)(l.Z,{form:d,name:"add-area",onFinish:de,style:{width:500,margin:"0px auto",paddingTop:20},children:(0,e.jsxs)(G.Z,{gutter:16,children:[(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Full Name"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"name",rules:[{required:!0,message:"Please input full name!"}],requiredMark:"optional",children:(0,e.jsx)(h.Z,{placeholder:"Full Name"})})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Email"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"email",rules:[{required:!0,message:"Please input email!",type:"email"}],requiredMark:"optional",children:(0,e.jsx)(h.Z,{placeholder:"Email",disabled:!0})})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Phone"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"phone",rules:[{required:!0,message:"Please input phone!"},{pattern:/^(\+62|62|0)8[1-9][0-9]{6,13}$/g,message:"Phone not valid!"}],requiredMark:"optional",children:(0,e.jsx)(h.Z,{placeholder:"Phone"})})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Role"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"role",rules:[{required:!0,message:"Please select role!"}],requiredMark:"optional",children:(0,e.jsx)(H.Z,{placeholder:"Select Role",className:"not-rounded",disabled:!0,options:[{label:"Admin",value:"admin"},{label:"Area",value:"area"}],onChange:function(){d.setFieldsValue({area_id:void 0})}})})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{noStyle:!0,shouldUpdate:function(t,n){return t.role_id!==n.role_id},children:function(){return d.getFieldValue("role")=="area"?(0,e.jsx)(u.Z,{children:"Area"}):null}})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{noStyle:!0,shouldUpdate:function(t,n){return t.role_id!==n.role_id},children:function(){return d.getFieldValue("role")=="area"?(0,e.jsx)(l.Z.Item,{name:"area_id",rules:[{required:!0,message:"Please input Area!"}],requiredMark:"optional",children:(0,e.jsx)(M.U,{disabled:!0})}):null}})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Address"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"address",requiredMark:"optional",children:(0,e.jsx)(h.Z.TextArea,{placeholder:"Address"})})}),(0,e.jsx)(a.Z,{span:24,children:(0,e.jsx)(w.Z,{})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"New Password"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"newPassword",rules:[{required:!0,message:"Please input password!"}],requiredMark:"optional",children:(0,e.jsx)(h.Z.Password,{placeholder:"Input Password"})})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(u.Z,{children:"Retype Password"})}),(0,e.jsx)(a.Z,{span:12,children:(0,e.jsx)(l.Z.Item,{name:"retypePassword",requiredMark:"optional",rules:[{required:!0,message:"Please input password!"},function(s){var t=s.getFieldValue;return{validator:function(E,o){return!o||t("newPassword")===o?Promise.resolve():Promise.reject(new Error("Passwords not match!"))}}}],children:(0,e.jsx)(h.Z.Password,{placeholder:"Retype Password"})})}),(0,e.jsx)(a.Z,{offset:16,children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(l.Z.Item,{children:(0,e.jsx)(g.Z,{type:"primary",htmlType:"submit",children:"Save"})}),(0,e.jsx)(l.Z.Item,{children:(0,e.jsx)(g.Z,{type:"default",htmlType:"button",onClick:function(){return c.history.push("/users")},children:"Cancel"})})]})})]})})})]})};v.default=X}}]);
