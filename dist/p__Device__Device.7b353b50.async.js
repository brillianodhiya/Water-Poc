"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7315],{78491:function(be,w,n){n.r(w),n.d(w,{default:function(){return Ie}});var le=n(12741),c=n.n(le),ce=n(24969),O=n(38402),C=n(30028),de=n(71230),A=n(15746),z=n(21802),j=n(71577),ue=n(30381),y=n.n(ue),qe=n(29218),l=n(67294),U=n(64593),ve=n(11281),h=n.n(ve),fe=n(97983),D=n.n(fe),he=n(40794),V=n.n(he),xe=n(45428),m=n(38405),je=n(78120),me=n(5077),Y=n(28530),ge=n(91321),d=n(62816),k=n(23349),ye=n(69677),f=n(26713),H=n(20550),pe=n(13013),Z=n(66516),Se=n(18537),Ce=n(42054),De=n.n(Ce),e=n(85893),Ze=(0,ge.Z)({scriptUrl:"//at.alicdn.com/t/c/font_3875475_w5k22iyjel.js"}),u=k.Z.Column;y().locale("en");var Re=function(R){var p=R.isFocused,F=R.counter,B=l.useState([]),$=c()(B,2),W=$[0],Le=$[1],Fe=l.useState(!1),G=c()(Fe,2),Ee=G[0],I=G[1],Pe=l.useState(""),Q=c()(Pe,2),Me=Q[0],E=Q[1],Ne=l.useState(""),X=c()(Ne,2),we=X[0],J=X[1],b=l.useRef(null),Oe=l.useState([]),q=c()(Oe,2),_e=q[0],Ae=q[1],P=Se.Z.parse(window.location.search),ze=l.useState(!1),_=c()(ze,2),Ue=_[0],M=_[1],Ve=l.useState({}),ee=c()(Ve,2),x=ee[0],N=ee[1],Ye=l.useState([]),te=c()(Ye,2),ke=te[0],He=te[1],Ke=l.useState(!1),ne=c()(Ke,2),Be=ne[0],T=ne[1],We=l.useState(!1),ae=c()(We,2),Ge=ae[0],re=ae[1],se=function(){var i=V()(D()().mark(function t(){var a;return D()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return I(!0),s.next=3,(0,Y._v)({});case 3:a=s.sent,I(!1),a.error||(a.data.map(function(o,v){a.data[v].area_name=o.Nebula_Area.area_name,a.data[v].tenant_name=o.Nebula_Tenant.name}),Le(a.data),Ae(a.data));case 6:case"end":return s.stop()}},t)}));return function(){return i.apply(this,arguments)}}(),Qe=function(){var i=V()(D()().mark(function t(){var a;return D()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return I(!0),s.next=3,(0,Y.We)({},P.node_type);case 3:a=s.sent,I(!1),a.error||He(a.data);case 6:case"end":return s.stop()}},t)}));return function(){return i.apply(this,arguments)}}();l.useEffect(function(){p?(se(),Qe()):C.history.push("/device/Node")},[p,F]);var ie=function(t,a,r){a(),E(t[0]),J(r)},Xe=function(t){t(),E("")},S=function(t){return{filterDropdown:function(r){var s=r.setSelectedKeys,o=r.selectedKeys,v=r.confirm,oe=r.clearFilters,Je=r.close;return(0,e.jsxs)("div",{style:{padding:8},onKeyDown:function(L){return L.stopPropagation()},children:[(0,e.jsx)(ye.Z,{ref:b,placeholder:"Search ".concat(t),value:o[0],onChange:function(L){return s(L.target.value?[L.target.value]:[])},onPressEnter:function(){return ie(o,v,t)},style:{marginBottom:8,display:"block"}}),(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(j.Z,{type:"primary",onClick:function(){return ie(o,v,t)},icon:(0,e.jsx)(d.l62,{}),size:"small",style:{width:90},children:"Search"}),(0,e.jsx)(j.Z,{onClick:function(){return oe&&Xe(oe)},size:"small",style:{width:90},children:"Reset"}),(0,e.jsx)(j.Z,{type:"link",size:"small",onClick:function(){v({closeDropdown:!1}),E(o[0]),J(t)},children:"Filter"}),(0,e.jsx)(j.Z,{type:"link",size:"small",onClick:function(){Je()},children:"close"})]})]})},filterIcon:function(r){return(0,e.jsx)(d.l62,{style:{color:r?"#1890ff":void 0}})},onFilter:function(r,s){var o;return((o=s[t])!==null&&o!==void 0?o:"").toString().toLowerCase().includes(r.toLowerCase())},onFilterDropdownOpenChange:function(r){r&&setTimeout(function(){var s;return(s=b.current)===null||s===void 0?void 0:s.select()},100)},render:function(r){return we===t?(0,e.jsx)(De(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[Me],autoEscape:!0,textToHighlight:r?r.toString():""}):r}}};return(0,e.jsxs)(O._z,{childrenContentStyle:{minHeight:"70vh"},title:" ",extra:void 0,children:[(0,e.jsxs)(U.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | Device"}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsx)(me.X,{device_id:x.id,open:Ue,onCancel:function(){return M(!1)},onOk:function(){M(!1)},typeName:P.node_type_name,devEui:x.devEui,desc:x.description}),(0,e.jsx)(xe.Y,{devEui:x.devEui,open:Be,interval:x.interval,onCancel:function(){T(!1)},onOk:function(){T(!1),se()}}),(0,e.jsx)(je.T,{devEui:x.devEui,dataModal:x,open:Ge,onCancel:function(){re(!1)},onOk:function(){re(!1)},typeName:P.node_type_name}),(0,e.jsxs)(k.Z,{dataSource:W,loading:Ee,scroll:{x:1300},children:[(0,e.jsx)(u,h()(h()({},S("tenant_name")),{},{width:200,title:"Tenant",dataIndex:"tenant_name",sorter:function(t,a){return t.tenant_name.length-a.tenant_name.length}})),(0,e.jsx)(u,h()({width:200,title:"Device Type",dataIndex:"device_type"},S("device_type")),"device_type"),(0,e.jsx)(u,h()({width:200,title:"Dev Eui",dataIndex:"devEui"},S("devEui")),"devEui"),(0,e.jsx)(u,{width:200,title:"Last Update",dataIndex:"lastUpdate",render:function(t){if(t)return y()(t).format("MMM DD YYYY HH:mm:ss")},sorter:function(t,a){return y()(t.lastUpdate).unix()-y()(a.lastUpdate).unix()}},"lastUpdate"),(0,e.jsx)(u,h()(h()({width:200,title:"Status",dataIndex:"status"},S("status")),{},{sorter:function(t,a){return t.status.length-a.status.length},render:function(t){return t==="ONLINE"?(0,e.jsx)(H.Z,{color:"green",children:t}):(0,e.jsx)(H.Z,{color:"red",children:t})}}),"status"),(0,e.jsx)(u,{width:130,title:"Interval",dataIndex:"interval",sorter:function(t,a){return t.interval-a.interval},render:function(t){return(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(d.Wyb,{style:{color:"gray"}}),(0,e.jsxs)(z.Z,{children:[t," min"]})]})}},"interval"),(0,e.jsx)(u,{width:150,title:"Battery Level",dataIndex:"battery",sorter:function(t,a){return t.battery-a.battery},filters:[{text:(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.QP,{}),"50 - 100"]}),value:"50-100"},{text:(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.xT,{}),"20 - 50"]}),value:"20-50"},{text:(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.t3,{style:{marginLeft:"3px"}})," ","0 - 20"]}),value:"0-20"}],onFilter:function(t,a){return t==="50-100"?a.battery>50:t==="20-50"?a.battery>20&&a.battery<=50:t==="0-20"?a.battery<=20:!0},render:function(t){return(0,e.jsx)(e.Fragment,{children:t>20&&t<=50?(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.xT,{}),t]}):t<=20?(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.t3,{}),t]}):t>50?(0,e.jsxs)(f.Z,{children:[(0,e.jsx)(m.QP,{}),t]}):null})}},"battery"),(0,e.jsx)(u,h()({width:200,title:"Description",dataIndex:"description"},S("description")),"description"),(0,e.jsx)(u,{dataIndex:"id",width:80,title:"Action",fixed:"right",render:function(t,a){return(0,e.jsx)(pe.Z,{trigger:["click"],overlay:(0,e.jsxs)(Z.Z,{children:[(0,e.jsxs)(Z.Z.Item,{onClick:function(){M(!0),N(a)},children:[(0,e.jsx)(d.lY0,{}),"  ","View Log"]},"1"),ke.map(function(r){var s=(0,e.jsx)(d.pW8,{}),o=function(){T(!0),N(a)};switch(r){case"interval":s=(0,e.jsx)(d.Wyb,{}),o=function(){T(!0),N(a)};break;case"meter reading":s=(0,e.jsx)(d.dU4,{});break;case"valve":s=(0,e.jsx)(Ze,{type:"icon-valve"});break;default:break}return(0,e.jsxs)(Z.Z.Item,{onClick:function(){o()},style:{textTransform:"capitalize"},children:[s," ",r]},r)}),(0,e.jsxs)(Z.Z.Item,{onClick:function(){C.history.push("/device/".concat(a.id,"/delete"))},style:{color:"red"},children:[(0,e.jsx)(d.E0z,{})," Unsign"]},"3")]}),placement:"bottomRight",children:(0,e.jsx)(j.Z,{type:"text",children:(0,e.jsx)(d.xjY,{})})})}},"id")]})]})},K=Re;y().locale("en");var $e=function(){var R=l.useState(1),p=c()(R,2),F=p[0],B=p[1],$=(0,C.useParams)();return $.sub=="list"?(0,e.jsx)(K,{isFocused:!0,counter:F}):(0,e.jsxs)(O._z,{title:" ",style:{borderTop:"1px solid rgba(0, 0, 0, 0.06)"},childrenContentStyle:{minHeight:"75vh"},children:[(0,e.jsxs)(U.q,{children:[(0,e.jsx)("meta",{charSet:"utf-8"}),(0,e.jsx)("title",{children:"AAT IoT Platform | Device"}),(0,e.jsx)("link",{rel:"icon",href:"https://aetratangerang.co.id/wp-content/uploads/2020/07/cropped-favicon-192x192.png",type:"image/x-icon"})]}),(0,e.jsxs)(de.Z,{gutter:[16,16],children:[(0,e.jsxs)(A.Z,{xs:24,sm:24,md:24,lg:24,xl:24,xxl:24,style:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid rgba(0, 0, 0, 0.06)",paddingBottom:"18px"},children:[(0,e.jsx)(z.Z.Title,{level:4,children:"Device Management"}),(0,e.jsxs)(j.Z,{style:{},onClick:function(){C.history.push("/device/create")},children:[(0,e.jsx)(ce.Z,{})," Add Device"]})]}),(0,e.jsx)(A.Z,{span:24,children:(0,e.jsx)(K,{isFocused:!0,counter:0})})]})]})},Ie=$e}}]);
